/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./script.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./audio.ts":
/*!******************!*\
  !*** ./audio.ts ***!
  \******************/
/*! exports provided: SongPlayer, AudioArrays */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SongPlayer\", function() { return SongPlayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AudioArrays\", function() { return AudioArrays; });\n/* harmony import */ var web_audio_analyser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! web-audio-analyser */ \"./node_modules/web-audio-analyser/index.js\");\n/* harmony import */ var web_audio_analyser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(web_audio_analyser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _soundcloud_badge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./soundcloud-badge */ \"./soundcloud-badge.js\");\n/* harmony import */ var _soundcloud_badge__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_soundcloud_badge__WEBPACK_IMPORTED_MODULE_1__);\n/**\r\n * Audio support\r\n */\r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nfunction SoundcloudBadgePromise(opts) {\r\n    return new Promise((resolve, reject) => {\r\n        _soundcloud_badge__WEBPACK_IMPORTED_MODULE_1___default()(opts, (err, src, data, div) => {\r\n            if (err) {\r\n                return reject(err);\r\n            }\r\n            resolve({\r\n                src,\r\n                data,\r\n                div,\r\n            });\r\n        });\r\n    });\r\n}\r\nconst fftSize = 256;\r\nclass SongPlayer {\r\n    constructor() {\r\n        this.audio = new Audio();\r\n        this.div = undefined;\r\n        this.analyzer = undefined;\r\n        this.audio.crossOrigin = 'Anonymous';\r\n        this.audio.addEventListener('ended', () => {\r\n            console.log('looping da soundz');\r\n            this.audio.currentTime = 0;\r\n            this.audio.play();\r\n        });\r\n    }\r\n    setSoundcloudUrl(song) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // Stop\r\n            if (this.div) {\r\n                this.div.remove();\r\n                this.div = undefined;\r\n            }\r\n            this.audio.currentTime = 0;\r\n            this.audio.src = '';\r\n            // Load data\r\n            const { src, div } = yield SoundcloudBadgePromise({\r\n                // Soundcloud isn't accepting new API access requests!?\r\n                // Stolen from http://hughsk.io/moire-1/,\r\n                client_id: 'ded451c6d8f9ff1c62f72523f49dab68',\r\n                song,\r\n                dark: false,\r\n                getFonts: true,\r\n            });\r\n            this.audio.src = src;\r\n            this.audio.play();\r\n            this.div = div;\r\n            // Go\r\n            if (!this.analyzer) {\r\n                const analyzer = web_audio_analyser__WEBPACK_IMPORTED_MODULE_0___default()(this.audio);\r\n                analyzer.analyser.fftSize = fftSize;\r\n                console.log('freq bin count', analyzer.analyser.frequencyBinCount);\r\n                this.wav = new AudioArrays(analyzer.analyser.frequencyBinCount);\r\n                this.freq = new AudioArrays(analyzer.analyser.frequencyBinCount);\r\n                this.analyzer = analyzer;\r\n            }\r\n        });\r\n    }\r\n    update() {\r\n        if (this.analyzer && this.wav && this.freq) {\r\n            this.freq.swap();\r\n            this.analyzer.frequencies(this.freq.current);\r\n            this.wav.swap();\r\n            this.analyzer.waveform(this.wav.current);\r\n            return { wav: this.wav, freq: this.freq };\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nclass AudioArrays {\r\n    constructor(buckets) {\r\n        this.buckets = buckets;\r\n        this.current = new Uint8Array(this.buckets);\r\n        this.prev = new Uint8Array(this.buckets);\r\n    }\r\n    swap() {\r\n        const prev = this.current;\r\n        this.current = prev;\r\n        this.prev = prev;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hdWRpby50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2F1ZGlvLnRzP2VmOGMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEF1ZGlvIHN1cHBvcnRcclxuICovXHJcblxyXG5pbXBvcnQgY3JlYXRlQW5hbHl6ZXIsIHsgV2ViQXVkaW9BbmFseXNlciB9IGZyb20gJ3dlYi1hdWRpby1hbmFseXNlcidcclxuaW1wb3J0IFNvdW5kY2xvdWRCYWRnZSwgeyBTb3VuZGNsb3VkQmFkZ2VPcHRpb25zIH0gZnJvbSAnLi9zb3VuZGNsb3VkLWJhZGdlJ1xyXG5cclxuZnVuY3Rpb24gU291bmRjbG91ZEJhZGdlUHJvbWlzZShcclxuICBvcHRzOiBTb3VuZGNsb3VkQmFkZ2VPcHRpb25zXHJcbik6IFByb21pc2U8eyBzcmM6IHN0cmluZzsgZGF0YTogdW5rbm93bjsgZGl2OiBIVE1MRGl2RWxlbWVudCB9PiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIFNvdW5kY2xvdWRCYWRnZShvcHRzLCAoZXJyLCBzcmMsIGRhdGEsIGRpdikgPT4ge1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgIHNyYyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIGRpdixcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSlcclxufVxyXG5cclxuY29uc3QgZmZ0U2l6ZSA9IDI1NlxyXG5cclxuZXhwb3J0IGNsYXNzIFNvbmdQbGF5ZXIge1xyXG4gIGF1ZGlvID0gbmV3IEF1ZGlvKClcclxuICBkaXY6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXHJcbiAgYW5hbHl6ZXI6IFdlYkF1ZGlvQW5hbHlzZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcclxuICBmcmVxOiBBdWRpb0FycmF5cyB8IHVuZGVmaW5lZFxyXG4gIHdhdjogQXVkaW9BcnJheXMgfCB1bmRlZmluZWRcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmF1ZGlvLmNyb3NzT3JpZ2luID0gJ0Fub255bW91cydcclxuICAgIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdsb29waW5nIGRhIHNvdW5keicpXHJcbiAgICAgIHRoaXMuYXVkaW8uY3VycmVudFRpbWUgPSAwXHJcbiAgICAgIHRoaXMuYXVkaW8ucGxheSgpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0U291bmRjbG91ZFVybChzb25nOiBzdHJpbmcpIHtcclxuICAgIC8vIFN0b3BcclxuICAgIGlmICh0aGlzLmRpdikge1xyXG4gICAgICB0aGlzLmRpdi5yZW1vdmUoKVxyXG4gICAgICB0aGlzLmRpdiA9IHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgdGhpcy5hdWRpby5jdXJyZW50VGltZSA9IDBcclxuICAgIHRoaXMuYXVkaW8uc3JjID0gJydcclxuXHJcbiAgICAvLyBMb2FkIGRhdGFcclxuICAgIGNvbnN0IHsgc3JjLCBkaXYgfSA9IGF3YWl0IFNvdW5kY2xvdWRCYWRnZVByb21pc2Uoe1xyXG4gICAgICAvLyBTb3VuZGNsb3VkIGlzbid0IGFjY2VwdGluZyBuZXcgQVBJIGFjY2VzcyByZXF1ZXN0cyE/XHJcbiAgICAgIC8vIFN0b2xlbiBmcm9tIGh0dHA6Ly9odWdoc2suaW8vbW9pcmUtMS8sXHJcbiAgICAgIGNsaWVudF9pZDogJ2RlZDQ1MWM2ZDhmOWZmMWM2MmY3MjUyM2Y0OWRhYjY4JyxcclxuICAgICAgc29uZyxcclxuICAgICAgZGFyazogZmFsc2UsXHJcbiAgICAgIGdldEZvbnRzOiB0cnVlLFxyXG4gICAgfSlcclxuICAgIHRoaXMuYXVkaW8uc3JjID0gc3JjXHJcbiAgICB0aGlzLmF1ZGlvLnBsYXkoKVxyXG5cclxuICAgIHRoaXMuZGl2ID0gZGl2XHJcblxyXG4gICAgLy8gR29cclxuICAgIGlmICghdGhpcy5hbmFseXplcikge1xyXG4gICAgICBjb25zdCBhbmFseXplciA9IGNyZWF0ZUFuYWx5emVyKHRoaXMuYXVkaW8pXHJcbiAgICAgIGFuYWx5emVyLmFuYWx5c2VyLmZmdFNpemUgPSBmZnRTaXplXHJcbiAgICAgIGNvbnNvbGUubG9nKCdmcmVxIGJpbiBjb3VudCcsIGFuYWx5emVyLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KVxyXG4gICAgICB0aGlzLndhdiA9IG5ldyBBdWRpb0FycmF5cyhhbmFseXplci5hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudClcclxuICAgICAgdGhpcy5mcmVxID0gbmV3IEF1ZGlvQXJyYXlzKGFuYWx5emVyLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KVxyXG4gICAgICB0aGlzLmFuYWx5emVyID0gYW5hbHl6ZXJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLmFuYWx5emVyICYmIHRoaXMud2F2ICYmIHRoaXMuZnJlcSkge1xyXG4gICAgICB0aGlzLmZyZXEuc3dhcCgpXHJcbiAgICAgIHRoaXMuYW5hbHl6ZXIuZnJlcXVlbmNpZXModGhpcy5mcmVxLmN1cnJlbnQpXHJcbiAgICAgIHRoaXMud2F2LnN3YXAoKVxyXG4gICAgICB0aGlzLmFuYWx5emVyLndhdmVmb3JtKHRoaXMud2F2LmN1cnJlbnQpXHJcbiAgICAgIHJldHVybiB7IHdhdjogdGhpcy53YXYsIGZyZXE6IHRoaXMuZnJlcSB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQXVkaW9BcnJheXMge1xyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBidWNrZXRzOiBudW1iZXIpIHt9XHJcbiAgY3VycmVudCA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVja2V0cylcclxuICBwcmV2ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWNrZXRzKVxyXG4gIHN3YXAoKSB7XHJcbiAgICBjb25zdCBwcmV2ID0gdGhpcy5jdXJyZW50XHJcbiAgICB0aGlzLmN1cnJlbnQgPSBwcmV2XHJcbiAgICB0aGlzLnByZXYgPSBwcmV2XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFFQTs7Ozs7Ozs7OztBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQU9BO0FBTkE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./audio.ts\n");

/***/ }),

/***/ "./node_modules/global/window.js":
/*!***************************************!*\
  !*** ./node_modules/global/window.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {if (typeof window !== \"undefined\") {\n    module.exports = window\n} else if (typeof global !== \"undefined\") {\n    module.exports = global\n} else {\n    module.exports = {}\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZ2xvYmFsL3dpbmRvdy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9nbG9iYWwvd2luZG93LmpzP2JlMDkiXSwic291cmNlc0NvbnRlbnQiOlsiaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHdpbmRvd1xufSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxcbn0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7fVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/global/window.js\n");

/***/ }),

/***/ "./node_modules/google-fonts/index.js":
/*!********************************************!*\
  !*** ./node_modules/google-fonts/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = asString\nmodule.exports.add = append\n\nfunction asString(fonts) {\n  var href = getHref(fonts)\n  return '<link href=\"' + href + '\" rel=\"stylesheet\" type=\"text/css\">'\n}\n\nfunction asElement(fonts) {\n  var href = getHref(fonts)\n  var link = document.createElement('link')\n  link.setAttribute('href', href)\n  link.setAttribute('rel', 'stylesheet')\n  link.setAttribute('type', 'text/css')\n  return link\n}\n\nfunction getHref(fonts) {\n  var family = Object.keys(fonts).map(function(name) {\n    var details = fonts[name]\n    name = name.replace(/\\s+/, '+')\n    return typeof details === 'boolean'\n      ? name\n      : name + ':' + makeArray(details).join(',')\n  }).join('|')\n\n  return 'http://fonts.googleapis.com/css?family=' + family\n}\n\nfunction append(fonts) {\n  var link = asElement(fonts)\n  document.head.appendChild(link)\n  return link\n}\n\nfunction makeArray(arr) {\n  return Array.isArray(arr) ? arr : [arr]\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZ29vZ2xlLWZvbnRzL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2dvb2dsZS1mb250cy9pbmRleC5qcz8yNjhiIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gYXNTdHJpbmdcbm1vZHVsZS5leHBvcnRzLmFkZCA9IGFwcGVuZFxuXG5mdW5jdGlvbiBhc1N0cmluZyhmb250cykge1xuICB2YXIgaHJlZiA9IGdldEhyZWYoZm9udHMpXG4gIHJldHVybiAnPGxpbmsgaHJlZj1cIicgKyBocmVmICsgJ1wiIHJlbD1cInN0eWxlc2hlZXRcIiB0eXBlPVwidGV4dC9jc3NcIj4nXG59XG5cbmZ1bmN0aW9uIGFzRWxlbWVudChmb250cykge1xuICB2YXIgaHJlZiA9IGdldEhyZWYoZm9udHMpXG4gIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpXG4gIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZilcbiAgbGluay5zZXRBdHRyaWJ1dGUoJ3JlbCcsICdzdHlsZXNoZWV0JylcbiAgbGluay5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKVxuICByZXR1cm4gbGlua1xufVxuXG5mdW5jdGlvbiBnZXRIcmVmKGZvbnRzKSB7XG4gIHZhciBmYW1pbHkgPSBPYmplY3Qua2V5cyhmb250cykubWFwKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgZGV0YWlscyA9IGZvbnRzW25hbWVdXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvXFxzKy8sICcrJylcbiAgICByZXR1cm4gdHlwZW9mIGRldGFpbHMgPT09ICdib29sZWFuJ1xuICAgICAgPyBuYW1lXG4gICAgICA6IG5hbWUgKyAnOicgKyBtYWtlQXJyYXkoZGV0YWlscykuam9pbignLCcpXG4gIH0pLmpvaW4oJ3wnKVxuXG4gIHJldHVybiAnaHR0cDovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9JyArIGZhbWlseVxufVxuXG5mdW5jdGlvbiBhcHBlbmQoZm9udHMpIHtcbiAgdmFyIGxpbmsgPSBhc0VsZW1lbnQoZm9udHMpXG4gIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluaylcbiAgcmV0dXJuIGxpbmtcbn1cblxuZnVuY3Rpb24gbWFrZUFycmF5KGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpID8gYXJyIDogW2Fycl1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/google-fonts/index.js\n");

/***/ }),

/***/ "./node_modules/insert-css/index.js":
/*!******************************************!*\
  !*** ./node_modules/insert-css/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var inserted = [];\n\nmodule.exports = function (css) {\n    if (inserted.indexOf(css) >= 0) return;\n    inserted.push(css);\n    \n    var elem = document.createElement('style');\n    var text = document.createTextNode(css);\n    elem.appendChild(text);\n    \n    if (document.head.childNodes.length) {\n        document.head.insertBefore(elem, document.head.childNodes[0]);\n    }\n    else {\n        document.head.appendChild(elem);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaW5zZXJ0LWNzcy9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pbnNlcnQtY3NzL2luZGV4LmpzPzFhZWYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGluc2VydGVkID0gW107XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAgIGlmIChpbnNlcnRlZC5pbmRleE9mKGNzcykgPj0gMCkgcmV0dXJuO1xuICAgIGluc2VydGVkLnB1c2goY3NzKTtcbiAgICBcbiAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIGVsZW0uYXBwZW5kQ2hpbGQodGV4dCk7XG4gICAgXG4gICAgaWYgKGRvY3VtZW50LmhlYWQuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5pbnNlcnRCZWZvcmUoZWxlbSwgZG9jdW1lbnQuaGVhZC5jaGlsZE5vZGVzWzBdKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgfVxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/insert-css/index.js\n");

/***/ }),

/***/ "./node_modules/minstache/index.js":
/*!*****************************************!*\
  !*** ./node_modules/minstache/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\n/**\n * Expose `render()`.`\n */\n\nexports = module.exports = render;\n\n/**\n * Expose `compile()`.\n */\n\nexports.compile = compile;\n\n/**\n * Render the given mustache `str` with `obj`.\n *\n * @param {String} str\n * @param {Object} obj\n * @return {String}\n * @api public\n */\n\nfunction render(str, obj) {\n  obj = obj || {};\n  var fn = compile(str);\n  return fn(obj);\n}\n\n/**\n * Compile the given `str` to a `Function`.\n *\n * @param {String} str\n * @return {Function}\n * @api public\n */\n\nfunction compile(str) {\n  var js = [];\n  var toks = parse(str);\n  var tok;\n\n  for (var i = 0; i < toks.length; ++i) {\n    tok = toks[i];\n    if (i % 2 == 0) {\n      js.push('\"' + tok.replace(/\"/g, '\\\\\"') + '\"');\n    } else {\n      switch (tok[0]) {\n        case '/':\n          tok = tok.slice(1);\n          js.push(') + ');\n          break;\n        case '^':\n          tok = tok.slice(1);\n          assertProperty(tok);\n          js.push(' + section(obj, \"' + tok + '\", true, ');\n          break;\n        case '#':\n          tok = tok.slice(1);\n          assertProperty(tok);\n          js.push(' + section(obj, \"' + tok + '\", false, ');\n          break;\n        case '!':\n          tok = tok.slice(1);\n          assertProperty(tok);\n          js.push(' + obj.' + tok + ' + ');\n          break;\n        default:\n          assertProperty(tok);\n          js.push(' + escape(obj.' + tok + ') + ');\n      }\n    }\n  }\n\n  js = '\\n'\n    + indent(escape.toString()) + ';\\n\\n'\n    + indent(section.toString()) + ';\\n\\n'\n    + '  return ' + js.join('').replace(/\\n/g, '\\\\n');\n\n  return new Function('obj', js);\n}\n\n/**\n * Assert that `prop` is a valid property.\n *\n * @param {String} prop\n * @api private\n */\n\nfunction assertProperty(prop) {\n  if (!prop.match(/^[\\w.]+$/)) throw new Error('invalid property \"' + prop + '\"');\n}\n\n/**\n * Parse `str`.\n *\n * @param {String} str\n * @return {Array}\n * @api private\n */\n\nfunction parse(str) {\n  return str.split(/\\{\\{|\\}\\}/);\n}\n\n/**\n * Indent `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction indent(str) {\n  return str.replace(/^/gm, '  ');\n}\n\n/**\n * Section handler.\n *\n * @param {Object} context obj\n * @param {String} prop\n * @param {String} str\n * @param {Boolean} negate\n * @api private\n */\n\nfunction section(obj, prop, negate, str) {\n  var val = obj[prop];\n  if ('function' == typeof val) return val.call(obj, str);\n  if (negate) val = !val;\n  if (val) return str;\n  return '';\n}\n\n/**\n * Escape the given `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nfunction escape(html) {\n  return String(html)\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWluc3RhY2hlL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pbnN0YWNoZS9pbmRleC5qcz9kMWRiIl0sInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBFeHBvc2UgYHJlbmRlcigpYC5gXG4gKi9cblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVuZGVyO1xuXG4vKipcbiAqIEV4cG9zZSBgY29tcGlsZSgpYC5cbiAqL1xuXG5leHBvcnRzLmNvbXBpbGUgPSBjb21waWxlO1xuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gbXVzdGFjaGUgYHN0cmAgd2l0aCBgb2JqYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIHJlbmRlcihzdHIsIG9iaikge1xuICBvYmogPSBvYmogfHwge307XG4gIHZhciBmbiA9IGNvbXBpbGUoc3RyKTtcbiAgcmV0dXJuIGZuKG9iaik7XG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgZ2l2ZW4gYHN0cmAgdG8gYSBgRnVuY3Rpb25gLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlKHN0cikge1xuICB2YXIganMgPSBbXTtcbiAgdmFyIHRva3MgPSBwYXJzZShzdHIpO1xuICB2YXIgdG9rO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rcy5sZW5ndGg7ICsraSkge1xuICAgIHRvayA9IHRva3NbaV07XG4gICAgaWYgKGkgJSAyID09IDApIHtcbiAgICAgIGpzLnB1c2goJ1wiJyArIHRvay5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykgKyAnXCInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoICh0b2tbMF0pIHtcbiAgICAgICAgY2FzZSAnLyc6XG4gICAgICAgICAgdG9rID0gdG9rLnNsaWNlKDEpO1xuICAgICAgICAgIGpzLnB1c2goJykgKyAnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnXic6XG4gICAgICAgICAgdG9rID0gdG9rLnNsaWNlKDEpO1xuICAgICAgICAgIGFzc2VydFByb3BlcnR5KHRvayk7XG4gICAgICAgICAganMucHVzaCgnICsgc2VjdGlvbihvYmosIFwiJyArIHRvayArICdcIiwgdHJ1ZSwgJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJyMnOlxuICAgICAgICAgIHRvayA9IHRvay5zbGljZSgxKTtcbiAgICAgICAgICBhc3NlcnRQcm9wZXJ0eSh0b2spO1xuICAgICAgICAgIGpzLnB1c2goJyArIHNlY3Rpb24ob2JqLCBcIicgKyB0b2sgKyAnXCIsIGZhbHNlLCAnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnISc6XG4gICAgICAgICAgdG9rID0gdG9rLnNsaWNlKDEpO1xuICAgICAgICAgIGFzc2VydFByb3BlcnR5KHRvayk7XG4gICAgICAgICAganMucHVzaCgnICsgb2JqLicgKyB0b2sgKyAnICsgJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYXNzZXJ0UHJvcGVydHkodG9rKTtcbiAgICAgICAgICBqcy5wdXNoKCcgKyBlc2NhcGUob2JqLicgKyB0b2sgKyAnKSArICcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGpzID0gJ1xcbidcbiAgICArIGluZGVudChlc2NhcGUudG9TdHJpbmcoKSkgKyAnO1xcblxcbidcbiAgICArIGluZGVudChzZWN0aW9uLnRvU3RyaW5nKCkpICsgJztcXG5cXG4nXG4gICAgKyAnICByZXR1cm4gJyArIGpzLmpvaW4oJycpLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKTtcblxuICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdvYmonLCBqcyk7XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoYXQgYHByb3BgIGlzIGEgdmFsaWQgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGFzc2VydFByb3BlcnR5KHByb3ApIHtcbiAgaWYgKCFwcm9wLm1hdGNoKC9eW1xcdy5dKyQvKSkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHByb3BlcnR5IFwiJyArIHByb3AgKyAnXCInKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBgc3RyYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICByZXR1cm4gc3RyLnNwbGl0KC9cXHtcXHt8XFx9XFx9Lyk7XG59XG5cbi8qKlxuICogSW5kZW50IGBzdHJgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGluZGVudChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eL2dtLCAnICAnKTtcbn1cblxuLyoqXG4gKiBTZWN0aW9uIGhhbmRsZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQgb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtCb29sZWFufSBuZWdhdGVcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNlY3Rpb24ob2JqLCBwcm9wLCBuZWdhdGUsIHN0cikge1xuICB2YXIgdmFsID0gb2JqW3Byb3BdO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdmFsKSByZXR1cm4gdmFsLmNhbGwob2JqLCBzdHIpO1xuICBpZiAobmVnYXRlKSB2YWwgPSAhdmFsO1xuICBpZiAodmFsKSByZXR1cm4gc3RyO1xuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogRXNjYXBlIHRoZSBnaXZlbiBgaHRtbGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGVzY2FwZShodG1sKSB7XG4gIHJldHVybiBTdHJpbmcoaHRtbClcbiAgICAucmVwbGFjZSgvJi9nLCAnJmFtcDsnKVxuICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/minstache/index.js\n");

/***/ }),

/***/ "./node_modules/once/once.js":
/*!***********************************!*\
  !*** ./node_modules/once/once.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = once\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var called = false\n  return function () {\n    if (called) return\n    called = true\n    return fn.apply(this, arguments)\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvb25jZS9vbmNlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29uY2Uvb25jZS5qcz81NjZiIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gb25jZVxuXG5vbmNlLnByb3RvID0gb25jZShmdW5jdGlvbiAoKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsICdvbmNlJywge1xuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gb25jZSh0aGlzKVxuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pXG59KVxuXG5mdW5jdGlvbiBvbmNlIChmbikge1xuICB2YXIgY2FsbGVkID0gZmFsc2VcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY2FsbGVkKSByZXR1cm5cbiAgICBjYWxsZWQgPSB0cnVlXG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/once/once.js\n");

/***/ }),

/***/ "./node_modules/querystring-es3/decode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/decode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2RlY29kZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZGVjb2RlLmpzPzkxZGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gSWYgb2JqLmhhc093blByb3BlcnR5IGhhcyBiZWVuIG92ZXJyaWRkZW4sIHRoZW4gY2FsbGluZ1xuLy8gb2JqLmhhc093blByb3BlcnR5KHByb3ApIHdpbGwgYnJlYWsuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9pc3N1ZXMvMTcwN1xuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihxcywgc2VwLCBlcSwgb3B0aW9ucykge1xuICBzZXAgPSBzZXAgfHwgJyYnO1xuICBlcSA9IGVxIHx8ICc9JztcbiAgdmFyIG9iaiA9IHt9O1xuXG4gIGlmICh0eXBlb2YgcXMgIT09ICdzdHJpbmcnIHx8IHFzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICB2YXIgcmVnZXhwID0gL1xcKy9nO1xuICBxcyA9IHFzLnNwbGl0KHNlcCk7XG5cbiAgdmFyIG1heEtleXMgPSAxMDAwO1xuICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhLZXlzID09PSAnbnVtYmVyJykge1xuICAgIG1heEtleXMgPSBvcHRpb25zLm1heEtleXM7XG4gIH1cblxuICB2YXIgbGVuID0gcXMubGVuZ3RoO1xuICAvLyBtYXhLZXlzIDw9IDAgbWVhbnMgdGhhdCB3ZSBzaG91bGQgbm90IGxpbWl0IGtleXMgY291bnRcbiAgaWYgKG1heEtleXMgPiAwICYmIGxlbiA+IG1heEtleXMpIHtcbiAgICBsZW4gPSBtYXhLZXlzO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIHZhciB4ID0gcXNbaV0ucmVwbGFjZShyZWdleHAsICclMjAnKSxcbiAgICAgICAgaWR4ID0geC5pbmRleE9mKGVxKSxcbiAgICAgICAga3N0ciwgdnN0ciwgaywgdjtcblxuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAga3N0ciA9IHguc3Vic3RyKDAsIGlkeCk7XG4gICAgICB2c3RyID0geC5zdWJzdHIoaWR4ICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtzdHIgPSB4O1xuICAgICAgdnN0ciA9ICcnO1xuICAgIH1cblxuICAgIGsgPSBkZWNvZGVVUklDb21wb25lbnQoa3N0cik7XG4gICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2c3RyKTtcblxuICAgIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrKSkge1xuICAgICAgb2JqW2tdID0gdjtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqW2tdKSkge1xuICAgICAgb2JqW2tdLnB1c2godik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtrXSA9IFtvYmpba10sIHZdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKHhzKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeHMpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/querystring-es3/decode.js\n");

/***/ }),

/***/ "./node_modules/querystring-es3/encode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/encode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2VuY29kZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZW5jb2RlLmpzP2UwOTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgc3dpdGNoICh0eXBlb2Ygdikge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gdjtcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIHYgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSA/IHYgOiAnJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgb2JqID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG1hcChvYmplY3RLZXlzKG9iaiksIGZ1bmN0aW9uKGspIHtcbiAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG4gICAgICBpZiAoaXNBcnJheShvYmpba10pKSB7XG4gICAgICAgIHJldHVybiBtYXAob2JqW2tdLCBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7XG4gICAgICAgIH0pLmpvaW4oc2VwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7XG4gICAgICB9XG4gICAgfSkuam9pbihzZXApO1xuXG4gIH1cblxuICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUobmFtZSkpICsgZXEgK1xuICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoeHMpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4cykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5mdW5jdGlvbiBtYXAgKHhzLCBmKSB7XG4gIGlmICh4cy5tYXApIHJldHVybiB4cy5tYXAoZik7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgIHJlcy5wdXNoKGYoeHNbaV0sIGkpKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHJlcy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/querystring-es3/encode.js\n");

/***/ }),

/***/ "./node_modules/querystring-es3/index.js":
/*!***********************************************!*\
  !*** ./node_modules/querystring-es3/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.decode = exports.parse = __webpack_require__(/*! ./decode */ \"./node_modules/querystring-es3/decode.js\");\nexports.encode = exports.stringify = __webpack_require__(/*! ./encode */ \"./node_modules/querystring-es3/encode.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3F1ZXJ5c3RyaW5nLWVzMy9pbmRleC5qcz9iMzgzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5kZWNvZGUgPSBleHBvcnRzLnBhcnNlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcbmV4cG9ydHMuZW5jb2RlID0gZXhwb3J0cy5zdHJpbmdpZnkgPSByZXF1aXJlKCcuL2VuY29kZScpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/querystring-es3/index.js\n");

/***/ }),

/***/ "./node_modules/soundcloud-resolve/browser.js":
/*!****************************************************!*\
  !*** ./node_modules/soundcloud-resolve/browser.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var qs  = __webpack_require__(/*! querystring */ \"./node_modules/querystring-es3/index.js\")\nvar xhr = __webpack_require__(/*! xhr */ \"./node_modules/xhr/index.js\")\n\nmodule.exports = resolve\n\nfunction resolve(id, goal, callback) {\n  var uri = 'https://api.soundcloud.com/resolve.json?' + qs.stringify({\n      url: goal\n    , client_id: id\n  })\n\n  xhr({\n      uri: uri\n    , method: 'GET'\n  }, function(err, res, body) {\n    if (err) return callback(err)\n    try {\n      body = JSON.parse(body)\n    } catch(e) {\n      return callback(e)\n    }\n    if (body.errors) return callback(new Error(\n      body.errors[0].error_message\n    ))\n\n    var stream_url = body.kind === 'track'\n      && body.stream_url + '?client_id=' + id\n\n    return callback(null, body, stream_url)\n  })\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc291bmRjbG91ZC1yZXNvbHZlL2Jyb3dzZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc291bmRjbG91ZC1yZXNvbHZlL2Jyb3dzZXIuanM/MDlhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcXMgID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKVxudmFyIHhociA9IHJlcXVpcmUoJ3hocicpXG5cbm1vZHVsZS5leHBvcnRzID0gcmVzb2x2ZVxuXG5mdW5jdGlvbiByZXNvbHZlKGlkLCBnb2FsLCBjYWxsYmFjaykge1xuICB2YXIgdXJpID0gJ2h0dHBzOi8vYXBpLnNvdW5kY2xvdWQuY29tL3Jlc29sdmUuanNvbj8nICsgcXMuc3RyaW5naWZ5KHtcbiAgICAgIHVybDogZ29hbFxuICAgICwgY2xpZW50X2lkOiBpZFxuICB9KVxuXG4gIHhocih7XG4gICAgICB1cmk6IHVyaVxuICAgICwgbWV0aG9kOiAnR0VUJ1xuICB9LCBmdW5jdGlvbihlcnIsIHJlcywgYm9keSkge1xuICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG4gICAgdHJ5IHtcbiAgICAgIGJvZHkgPSBKU09OLnBhcnNlKGJvZHkpXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soZSlcbiAgICB9XG4gICAgaWYgKGJvZHkuZXJyb3JzKSByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKFxuICAgICAgYm9keS5lcnJvcnNbMF0uZXJyb3JfbWVzc2FnZVxuICAgICkpXG5cbiAgICB2YXIgc3RyZWFtX3VybCA9IGJvZHkua2luZCA9PT0gJ3RyYWNrJ1xuICAgICAgJiYgYm9keS5zdHJlYW1fdXJsICsgJz9jbGllbnRfaWQ9JyArIGlkXG5cbiAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgYm9keSwgc3RyZWFtX3VybClcbiAgfSlcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/soundcloud-resolve/browser.js\n");

/***/ }),

/***/ "./node_modules/web-audio-analyser/index.js":
/*!**************************************************!*\
  !*** ./node_modules/web-audio-analyser/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var AudioContext = window.AudioContext || window.webkitAudioContext\n\nmodule.exports = WebAudioAnalyser\n\nfunction WebAudioAnalyser(audio, ctx, opts) {\n  if (!(this instanceof WebAudioAnalyser)) return new WebAudioAnalyser(audio, ctx, opts)\n  if (!(ctx instanceof AudioContext)) (opts = ctx), (ctx = null)\n\n  opts = opts || {}\n  this.ctx = ctx = ctx || new AudioContext\n\n  if (!(audio instanceof AudioNode)) {\n    audio = (audio instanceof Audio || audio instanceof HTMLAudioElement)\n      ? ctx.createMediaElementSource(audio)\n      : ctx.createMediaStreamSource(audio)\n  }\n\n  this.analyser = ctx.createAnalyser()\n  this.stereo   = !!opts.stereo\n  this.audible  = opts.audible !== false\n  this.wavedata = null\n  this.freqdata = null\n  this.splitter = null\n  this.merger   = null\n  this.source   = audio\n\n  if (!this.stereo) {\n    this.output = this.source\n    this.source.connect(this.analyser)\n    if (this.audible)\n      this.analyser.connect(ctx.destination)\n  } else {\n    this.analyser = [this.analyser]\n    this.analyser.push(ctx.createAnalyser())\n\n    this.splitter = ctx.createChannelSplitter(2)\n    this.merger   = ctx.createChannelMerger(2)\n    this.output   = this.merger\n\n    this.source.connect(this.splitter)\n\n    for (var i = 0; i < 2; i++) {\n      this.splitter.connect(this.analyser[i], i, 0)\n      this.analyser[i].connect(this.merger, 0, i)\n    }\n\n    if (this.audible)\n      this.merger.connect(ctx.destination)\n  }\n}\n\nWebAudioAnalyser.prototype.waveform = function(output, channel) {\n  if (!output) output = this.wavedata || (\n    this.wavedata = new Uint8Array((this.analyser[0] || this.analyser).frequencyBinCount)\n  )\n\n  var analyser = this.stereo\n    ? this.analyser[channel || 0]\n    : this.analyser\n\n  analyser.getByteTimeDomainData(output)\n\n  return output\n}\n\nWebAudioAnalyser.prototype.frequencies = function(output, channel) {\n  if (!output) output = this.freqdata || (\n    this.freqdata = new Uint8Array((this.analyser[0] || this.analyser).frequencyBinCount)\n  )\n\n  var analyser = this.stereo\n    ? this.analyser[channel || 0]\n    : this.analyser\n\n  analyser.getByteFrequencyData(output)\n\n  return output\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2ViLWF1ZGlvLWFuYWx5c2VyL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYi1hdWRpby1hbmFseXNlci9pbmRleC5qcz9kNzY5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBBdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHRcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJBdWRpb0FuYWx5c2VyXG5cbmZ1bmN0aW9uIFdlYkF1ZGlvQW5hbHlzZXIoYXVkaW8sIGN0eCwgb3B0cykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgV2ViQXVkaW9BbmFseXNlcikpIHJldHVybiBuZXcgV2ViQXVkaW9BbmFseXNlcihhdWRpbywgY3R4LCBvcHRzKVxuICBpZiAoIShjdHggaW5zdGFuY2VvZiBBdWRpb0NvbnRleHQpKSAob3B0cyA9IGN0eCksIChjdHggPSBudWxsKVxuXG4gIG9wdHMgPSBvcHRzIHx8IHt9XG4gIHRoaXMuY3R4ID0gY3R4ID0gY3R4IHx8IG5ldyBBdWRpb0NvbnRleHRcblxuICBpZiAoIShhdWRpbyBpbnN0YW5jZW9mIEF1ZGlvTm9kZSkpIHtcbiAgICBhdWRpbyA9IChhdWRpbyBpbnN0YW5jZW9mIEF1ZGlvIHx8IGF1ZGlvIGluc3RhbmNlb2YgSFRNTEF1ZGlvRWxlbWVudClcbiAgICAgID8gY3R4LmNyZWF0ZU1lZGlhRWxlbWVudFNvdXJjZShhdWRpbylcbiAgICAgIDogY3R4LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKGF1ZGlvKVxuICB9XG5cbiAgdGhpcy5hbmFseXNlciA9IGN0eC5jcmVhdGVBbmFseXNlcigpXG4gIHRoaXMuc3RlcmVvICAgPSAhIW9wdHMuc3RlcmVvXG4gIHRoaXMuYXVkaWJsZSAgPSBvcHRzLmF1ZGlibGUgIT09IGZhbHNlXG4gIHRoaXMud2F2ZWRhdGEgPSBudWxsXG4gIHRoaXMuZnJlcWRhdGEgPSBudWxsXG4gIHRoaXMuc3BsaXR0ZXIgPSBudWxsXG4gIHRoaXMubWVyZ2VyICAgPSBudWxsXG4gIHRoaXMuc291cmNlICAgPSBhdWRpb1xuXG4gIGlmICghdGhpcy5zdGVyZW8pIHtcbiAgICB0aGlzLm91dHB1dCA9IHRoaXMuc291cmNlXG4gICAgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmFuYWx5c2VyKVxuICAgIGlmICh0aGlzLmF1ZGlibGUpXG4gICAgICB0aGlzLmFuYWx5c2VyLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKVxuICB9IGVsc2Uge1xuICAgIHRoaXMuYW5hbHlzZXIgPSBbdGhpcy5hbmFseXNlcl1cbiAgICB0aGlzLmFuYWx5c2VyLnB1c2goY3R4LmNyZWF0ZUFuYWx5c2VyKCkpXG5cbiAgICB0aGlzLnNwbGl0dGVyID0gY3R4LmNyZWF0ZUNoYW5uZWxTcGxpdHRlcigyKVxuICAgIHRoaXMubWVyZ2VyICAgPSBjdHguY3JlYXRlQ2hhbm5lbE1lcmdlcigyKVxuICAgIHRoaXMub3V0cHV0ICAgPSB0aGlzLm1lcmdlclxuXG4gICAgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLnNwbGl0dGVyKVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAgIHRoaXMuc3BsaXR0ZXIuY29ubmVjdCh0aGlzLmFuYWx5c2VyW2ldLCBpLCAwKVxuICAgICAgdGhpcy5hbmFseXNlcltpXS5jb25uZWN0KHRoaXMubWVyZ2VyLCAwLCBpKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmF1ZGlibGUpXG4gICAgICB0aGlzLm1lcmdlci5jb25uZWN0KGN0eC5kZXN0aW5hdGlvbilcbiAgfVxufVxuXG5XZWJBdWRpb0FuYWx5c2VyLnByb3RvdHlwZS53YXZlZm9ybSA9IGZ1bmN0aW9uKG91dHB1dCwgY2hhbm5lbCkge1xuICBpZiAoIW91dHB1dCkgb3V0cHV0ID0gdGhpcy53YXZlZGF0YSB8fCAoXG4gICAgdGhpcy53YXZlZGF0YSA9IG5ldyBVaW50OEFycmF5KCh0aGlzLmFuYWx5c2VyWzBdIHx8IHRoaXMuYW5hbHlzZXIpLmZyZXF1ZW5jeUJpbkNvdW50KVxuICApXG5cbiAgdmFyIGFuYWx5c2VyID0gdGhpcy5zdGVyZW9cbiAgICA/IHRoaXMuYW5hbHlzZXJbY2hhbm5lbCB8fCAwXVxuICAgIDogdGhpcy5hbmFseXNlclxuXG4gIGFuYWx5c2VyLmdldEJ5dGVUaW1lRG9tYWluRGF0YShvdXRwdXQpXG5cbiAgcmV0dXJuIG91dHB1dFxufVxuXG5XZWJBdWRpb0FuYWx5c2VyLnByb3RvdHlwZS5mcmVxdWVuY2llcyA9IGZ1bmN0aW9uKG91dHB1dCwgY2hhbm5lbCkge1xuICBpZiAoIW91dHB1dCkgb3V0cHV0ID0gdGhpcy5mcmVxZGF0YSB8fCAoXG4gICAgdGhpcy5mcmVxZGF0YSA9IG5ldyBVaW50OEFycmF5KCh0aGlzLmFuYWx5c2VyWzBdIHx8IHRoaXMuYW5hbHlzZXIpLmZyZXF1ZW5jeUJpbkNvdW50KVxuICApXG5cbiAgdmFyIGFuYWx5c2VyID0gdGhpcy5zdGVyZW9cbiAgICA/IHRoaXMuYW5hbHlzZXJbY2hhbm5lbCB8fCAwXVxuICAgIDogdGhpcy5hbmFseXNlclxuXG4gIGFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKG91dHB1dClcblxuICByZXR1cm4gb3V0cHV0XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/web-audio-analyser/index.js\n");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/Y2QwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/global.js\n");

/***/ }),

/***/ "./node_modules/xhr/index.js":
/*!***********************************!*\
  !*** ./node_modules/xhr/index.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var window = __webpack_require__(/*! global/window */ \"./node_modules/global/window.js\")\nvar once = __webpack_require__(/*! once */ \"./node_modules/once/once.js\")\n\nvar messages = {\n    \"0\": \"Internal XMLHttpRequest Error\",\n    \"4\": \"4xx Client Error\",\n    \"5\": \"5xx Server Error\"\n}\n\nvar XHR = window.XMLHttpRequest || noop\nvar XDR = \"withCredentials\" in (new XHR()) ?\n        window.XMLHttpRequest : window.XDomainRequest\n\nmodule.exports = createXHR\n\nfunction createXHR(options, callback) {\n    if (typeof options === \"string\") {\n        options = { uri: options }\n    }\n\n    options = options || {}\n    callback = once(callback)\n\n    var xhr\n\n    if (options.cors) {\n        xhr = new XDR()\n    } else {\n        xhr = new XHR()\n    }\n\n    var uri = xhr.url = options.uri\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var isJson = false\n\n    if (\"json\" in options) {\n        isJson = true\n        headers[\"Content-Type\"] = \"application/json\"\n        body = JSON.stringify(options.json)\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = load\n    xhr.onerror = error\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    // hate IE\n    xhr.ontimeout = noop\n    xhr.open(method, uri)\n    if (options.cors) {\n        xhr.withCredentials = true\n    }\n    xhr.timeout = \"timeout\" in options ? options.timeout : 5000\n\n    if ( xhr.setRequestHeader) {\n        Object.keys(headers).forEach(function (key) {\n            xhr.setRequestHeader(key, headers[key])\n        })\n    }\n\n    xhr.send(body)\n\n    return xhr\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            load()\n        }\n    }\n\n    function load() {\n        var error = null\n        var status = xhr.statusCode = xhr.status\n        var body = xhr.body = xhr.response ||\n            xhr.responseText || xhr.responseXML\n\n        if (status === 0 || (status >= 400 && status < 600)) {\n            var message = xhr.responseText ||\n                messages[String(xhr.status).charAt(0)]\n            error = new Error(message)\n\n            error.statusCode = xhr.status\n        }\n\n        if (isJson) {\n            try {\n                body = xhr.body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        callback(error, xhr, body)\n    }\n\n    function error(evt) {\n        callback(evt, xhr)\n    }\n}\n\n\nfunction noop() {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMveGhyL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3hoci9pbmRleC5qcz9lZWM3Il0sInNvdXJjZXNDb250ZW50IjpbInZhciB3aW5kb3cgPSByZXF1aXJlKFwiZ2xvYmFsL3dpbmRvd1wiKVxudmFyIG9uY2UgPSByZXF1aXJlKFwib25jZVwiKVxuXG52YXIgbWVzc2FnZXMgPSB7XG4gICAgXCIwXCI6IFwiSW50ZXJuYWwgWE1MSHR0cFJlcXVlc3QgRXJyb3JcIixcbiAgICBcIjRcIjogXCI0eHggQ2xpZW50IEVycm9yXCIsXG4gICAgXCI1XCI6IFwiNXh4IFNlcnZlciBFcnJvclwiXG59XG5cbnZhciBYSFIgPSB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgfHwgbm9vcFxudmFyIFhEUiA9IFwid2l0aENyZWRlbnRpYWxzXCIgaW4gKG5ldyBYSFIoKSkgP1xuICAgICAgICB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgOiB3aW5kb3cuWERvbWFpblJlcXVlc3RcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVYSFJcblxuZnVuY3Rpb24gY3JlYXRlWEhSKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7IHVyaTogb3B0aW9ucyB9XG4gICAgfVxuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICBjYWxsYmFjayA9IG9uY2UoY2FsbGJhY2spXG5cbiAgICB2YXIgeGhyXG5cbiAgICBpZiAob3B0aW9ucy5jb3JzKSB7XG4gICAgICAgIHhociA9IG5ldyBYRFIoKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHhociA9IG5ldyBYSFIoKVxuICAgIH1cblxuICAgIHZhciB1cmkgPSB4aHIudXJsID0gb3B0aW9ucy51cmlcbiAgICB2YXIgbWV0aG9kID0geGhyLm1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8IFwiR0VUXCJcbiAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keSB8fCBvcHRpb25zLmRhdGFcbiAgICB2YXIgaGVhZGVycyA9IHhoci5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9XG4gICAgdmFyIGlzSnNvbiA9IGZhbHNlXG5cbiAgICBpZiAoXCJqc29uXCIgaW4gb3B0aW9ucykge1xuICAgICAgICBpc0pzb24gPSB0cnVlXG4gICAgICAgIGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5qc29uKVxuICAgIH1cblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSByZWFkeXN0YXRlY2hhbmdlXG4gICAgeGhyLm9ubG9hZCA9IGxvYWRcbiAgICB4aHIub25lcnJvciA9IGVycm9yXG4gICAgLy8gSUU5IG11c3QgaGF2ZSBvbnByb2dyZXNzIGJlIHNldCB0byBhIHVuaXF1ZSBmdW5jdGlvbi5cbiAgICB4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSUUgbXVzdCBkaWVcbiAgICB9XG4gICAgLy8gaGF0ZSBJRVxuICAgIHhoci5vbnRpbWVvdXQgPSBub29wXG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmkpXG4gICAgaWYgKG9wdGlvbnMuY29ycykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICAgIH1cbiAgICB4aHIudGltZW91dCA9IFwidGltZW91dFwiIGluIG9wdGlvbnMgPyBvcHRpb25zLnRpbWVvdXQgOiA1MDAwXG5cbiAgICBpZiAoIHhoci5zZXRSZXF1ZXN0SGVhZGVyKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgeGhyLnNlbmQoYm9keSlcblxuICAgIHJldHVybiB4aHJcblxuICAgIGZ1bmN0aW9uIHJlYWR5c3RhdGVjaGFuZ2UoKSB7XG4gICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgbG9hZCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkKCkge1xuICAgICAgICB2YXIgZXJyb3IgPSBudWxsXG4gICAgICAgIHZhciBzdGF0dXMgPSB4aHIuc3RhdHVzQ29kZSA9IHhoci5zdGF0dXNcbiAgICAgICAgdmFyIGJvZHkgPSB4aHIuYm9keSA9IHhoci5yZXNwb25zZSB8fFxuICAgICAgICAgICAgeGhyLnJlc3BvbnNlVGV4dCB8fCB4aHIucmVzcG9uc2VYTUxcblxuICAgICAgICBpZiAoc3RhdHVzID09PSAwIHx8IChzdGF0dXMgPj0gNDAwICYmIHN0YXR1cyA8IDYwMCkpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0geGhyLnJlc3BvbnNlVGV4dCB8fFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzW1N0cmluZyh4aHIuc3RhdHVzKS5jaGFyQXQoMCldXG4gICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKVxuXG4gICAgICAgICAgICBlcnJvci5zdGF0dXNDb2RlID0geGhyLnN0YXR1c1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzSnNvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBib2R5ID0geGhyLmJvZHkgPSBKU09OLnBhcnNlKGJvZHkpXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIHhociwgYm9keSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlcnJvcihldnQpIHtcbiAgICAgICAgY2FsbGJhY2soZXZ0LCB4aHIpXG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/xhr/index.js\n");

/***/ }),

/***/ "./script.ts":
/*!*******************!*\
  !*** ./script.ts ***!
  \*******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _audio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./audio */ \"./audio.ts\");\n/*\r\nMIT License\r\n\r\nCopyright (c) 2017 Pavel Dobryakov\r\nTypescript fork (c) 2020 Jake Teton-Landis\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\nfunction safeParseInt(x) {\r\n    return parseInt(x.toString());\r\n}\r\nfunction notNull(value, msg) {\r\n    if (value == null) {\r\n        throw new Error(msg || 'value unexpectedly null');\r\n    }\r\n    return value; // TODO\r\n}\r\nconst canvas = document.getElementsByTagName('canvas')[0];\r\nresizeCanvas();\r\nvar songPlayer = new _audio__WEBPACK_IMPORTED_MODULE_0__[\"SongPlayer\"]();\r\nwindow.songPlayer = songPlayer;\r\nconst Shortcuts = {\r\n    Black: { r: 0, g: 0, b: 0 },\r\n    Red: { r: 245, g: 0, b: 0 },\r\n    NotionMarketingBackground: { r: 255, g: 254, b: 252 },\r\n    FloatSong: 'https://soundcloud.com/coltongorg/floating',\r\n    SimonSong: 'https://soundcloud.com/simonlast/session_74',\r\n};\r\nfunction dup(val) {\r\n    return JSON.parse(JSON.stringify(val));\r\n}\r\nconst config = {\r\n    SIM_RESOLUTION: 256,\r\n    DYE_RESOLUTION: 1024,\r\n    CAPTURE_RESOLUTION: 512,\r\n    DENSITY_DISSIPATION: 1,\r\n    VELOCITY_DISSIPATION: 0.2,\r\n    PRESSURE: 0.8,\r\n    PRESSURE_ITERATIONS: 20,\r\n    CURL: 8,\r\n    SPLAT_RADIUS: 0.25,\r\n    SPLAT_FORCE: 6000,\r\n    SHADING: true,\r\n    SPLAT_COLOR: dup(Shortcuts.Red),\r\n    RANDOM_COLOR: true,\r\n    COLORFUL: true,\r\n    COLOR_UPDATE_SPEED: 10,\r\n    PAUSED: false,\r\n    BACK_COLOR: dup(Shortcuts.Black),\r\n    TRANSPARENT: false,\r\n    BLOOM: false,\r\n    BLOOM_ITERATIONS: 8,\r\n    BLOOM_RESOLUTION: 256,\r\n    BLOOM_INTENSITY: 0.8,\r\n    BLOOM_THRESHOLD: 0.6,\r\n    BLOOM_SOFT_KNEE: 0.7,\r\n    SUNRAYS: true,\r\n    SUNRAYS_RESOLUTION: 196,\r\n    SUNRAYS_WEIGHT: 1.0,\r\n};\r\nclass Pointer {\r\n    constructor() {\r\n        this.id = -1;\r\n        this.texcoordX = 0;\r\n        this.texcoordY = 0;\r\n        this.prevTexcoordX = 0;\r\n        this.prevTexcoordY = 0;\r\n        this.deltaX = 0;\r\n        this.deltaY = 0;\r\n        this.down = false;\r\n        this.moved = false;\r\n        this.color = { r: 0, g: 0, b: 0 };\r\n        this.colorUpdates = 0;\r\n    }\r\n}\r\nlet pointers = [];\r\nlet splatStack = [];\r\npointers.push(new Pointer());\r\nconst { gl, ext } = getWebGLContext(canvas);\r\nif (isMobile()) {\r\n    config.DYE_RESOLUTION = 512;\r\n}\r\nif (!ext.supportLinearFiltering) {\r\n    config.DYE_RESOLUTION = 512;\r\n    config.SHADING = false;\r\n    config.BLOOM = false;\r\n    config.SUNRAYS = false;\r\n}\r\nstartGUI();\r\nfunction getWebGLContext(canvas) {\r\n    const params = {\r\n        alpha: true,\r\n        depth: false,\r\n        stencil: false,\r\n        antialias: false,\r\n        preserveDrawingBuffer: false,\r\n    };\r\n    const gl2 = canvas.getContext('webgl2', params);\r\n    const gl = gl2 ||\r\n        canvas.getContext('webgl', params) ||\r\n        canvas.getContext('experimental-webgl', params);\r\n    const isWebGL2 = !!gl2;\r\n    let halfFloat = undefined;\r\n    let supportLinearFiltering;\r\n    if (isWebGL2) {\r\n        gl.getExtension('EXT_color_buffer_float');\r\n        supportLinearFiltering = gl.getExtension('OES_texture_float_linear');\r\n    }\r\n    else {\r\n        halfFloat = gl.getExtension('OES_texture_half_float');\r\n        supportLinearFiltering = gl.getExtension('OES_texture_half_float_linear');\r\n    }\r\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n    const halfFloatTexType = isWebGL2 ? gl.HALF_FLOAT : halfFloat.HALF_FLOAT_OES;\r\n    let formatRGBA;\r\n    let formatRG;\r\n    let formatR;\r\n    if (isWebGL2) {\r\n        formatRGBA = getSupportedFormat(gl, gl.RGBA16F, gl.RGBA, halfFloatTexType);\r\n        formatRG = getSupportedFormat(gl, gl.RG16F, gl.RG, halfFloatTexType);\r\n        formatR = getSupportedFormat(gl, gl.R16F, gl.RED, halfFloatTexType);\r\n    }\r\n    else {\r\n        formatRGBA = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\r\n        formatRG = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\r\n        formatR = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\r\n    }\r\n    // Assumes global Google Analytics, disabled.\r\n    //ga('send', 'event', isWebGL2 ? 'webgl2' : 'webgl', formatRGBA == null ? 'not supported' : 'supported');\r\n    return {\r\n        gl,\r\n        ext: {\r\n            formatRGBA,\r\n            formatRG,\r\n            formatR,\r\n            halfFloatTexType,\r\n            supportLinearFiltering,\r\n        },\r\n    };\r\n}\r\nfunction getSupportedFormat(gl, internalFormat, format, type) {\r\n    /** TODO: | null */\r\n    if (!supportRenderTextureFormat(gl, internalFormat, format, type)) {\r\n        switch (internalFormat) {\r\n            case gl.R16F:\r\n                return getSupportedFormat(gl, gl.RG16F, gl.RG, type);\r\n            case gl.RG16F:\r\n                return getSupportedFormat(gl, gl.RGBA16F, gl.RGBA, type);\r\n            default:\r\n                return null; // TODO\r\n        }\r\n    }\r\n    return {\r\n        internalFormat,\r\n        format,\r\n    };\r\n}\r\nfunction supportRenderTextureFormat(gl, internalFormat, format, type) {\r\n    let texture = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, 4, 4, 0, format, type, null);\r\n    let fbo = gl.createFramebuffer();\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\r\n    const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\r\n    return status == gl.FRAMEBUFFER_COMPLETE;\r\n}\r\nfunction startGUI() {\r\n    var gui = new dat.GUI({ width: 300 });\r\n    gui\r\n        .add(config, 'DYE_RESOLUTION', {\r\n        ultra: 2048,\r\n        high: 1024,\r\n        medium: 512,\r\n        low: 256,\r\n        'very low': 128,\r\n    })\r\n        .name('quality')\r\n        .onFinishChange(initFramebuffers);\r\n    gui\r\n        .add(config, 'SIM_RESOLUTION', { '32': 32, '64': 64, '128': 128, '256': 256, '512': 512 })\r\n        .name('sim resolution')\r\n        .onFinishChange(initFramebuffers);\r\n    gui.add(config, 'DENSITY_DISSIPATION', 0, 4.0).name('density diffusion');\r\n    gui.add(config, 'VELOCITY_DISSIPATION', 0, 4.0).name('velocity diffusion');\r\n    gui.add(config, 'PRESSURE', 0.0, 1.0).name('pressure');\r\n    gui\r\n        .add(config, 'CURL', 0, 50)\r\n        .name('vorticity')\r\n        .step(1);\r\n    gui.add(config, 'SPLAT_RADIUS', 0.01, 1.0).name('splat radius');\r\n    gui\r\n        .add(config, 'SHADING')\r\n        .name('shading')\r\n        .onFinishChange(updateKeywords);\r\n    gui.addColor(config, 'SPLAT_COLOR').name('Splat color');\r\n    gui.add(config, 'RANDOM_COLOR').name('Use random color');\r\n    gui.add(config, 'COLORFUL').name('Paint the rainbow');\r\n    gui\r\n        .add(config, 'PAUSED')\r\n        .name('paused')\r\n        .listen();\r\n    gui\r\n        .add({\r\n        fun: () => {\r\n            splatStack.push(safeParseInt(Math.random() * 20) + 5);\r\n        },\r\n    }, 'fun')\r\n        .name('Random splats');\r\n    gui\r\n        .add({\r\n        fun: () => {\r\n            songPlayer.setSoundcloudUrl(Shortcuts.SimonSong);\r\n        },\r\n    }, 'fun')\r\n        .name('Play Soundcloud Visualizer (WIP)');\r\n    let bloomFolder = gui.addFolder('Bloom');\r\n    bloomFolder\r\n        .add(config, 'BLOOM')\r\n        .name('enabled')\r\n        .onFinishChange(updateKeywords);\r\n    bloomFolder.add(config, 'BLOOM_INTENSITY', 0.1, 2.0).name('intensity');\r\n    bloomFolder.add(config, 'BLOOM_THRESHOLD', 0.0, 1.0).name('threshold');\r\n    let sunraysFolder = gui.addFolder('Sunrays');\r\n    sunraysFolder\r\n        .add(config, 'SUNRAYS')\r\n        .name('enabled')\r\n        .onFinishChange(updateKeywords);\r\n    sunraysFolder.add(config, 'SUNRAYS_WEIGHT', 0.3, 1.0).name('weight');\r\n    let captureFolder = gui.addFolder('Capture');\r\n    captureFolder.addColor(config, 'BACK_COLOR').name('background color');\r\n    captureFolder.add(config, 'TRANSPARENT').name('transparent');\r\n    captureFolder.add({ fun: captureScreenshot }, 'fun').name('take screenshot');\r\n    let github = gui\r\n        .add({\r\n        fun: () => {\r\n            window.open('https://github.com/justjake/WebGL-Fluid-Simulation');\r\n            //ga('send', 'event', 'link button', 'github');\r\n        },\r\n    }, 'fun')\r\n        .name('Typescript');\r\n    github.__li.className = 'cr function bigFont';\r\n    github.__li.style.borderLeft = '3px solid #8C8C8C';\r\n    let githubIcon = document.createElement('span');\r\n    github.domElement.parentElement.appendChild(githubIcon);\r\n    githubIcon.className = 'icon github';\r\n    let original = gui\r\n        .add({\r\n        fun: () => {\r\n            window.open('https://github.com/PavelDoGreat/WebGL-Fluid-Simulation');\r\n            //ga('send', 'event', 'link button', 'github');\r\n        },\r\n    }, 'fun')\r\n        .name('Original');\r\n    original.__li.className = 'cr function bigFont';\r\n    original.__li.style.borderLeft = '3px solid #8C8C8C';\r\n    let originalGithubIcon = document.createElement('span');\r\n    original.domElement.parentElement.appendChild(originalGithubIcon);\r\n    originalGithubIcon.className = 'icon github';\r\n    if (isMobile())\r\n        gui.close();\r\n}\r\nfunction isMobile() {\r\n    return /Mobi|Android/i.test(navigator.userAgent);\r\n}\r\nfunction captureScreenshot() {\r\n    let res = getResolution(config.CAPTURE_RESOLUTION);\r\n    let target = createFBO(res.width, res.height, ext.formatRGBA.internalFormat, ext.formatRGBA.format, ext.halfFloatTexType, gl.NEAREST);\r\n    render(target);\r\n    let texture = framebufferToTexture(target);\r\n    texture = normalizeTexture(texture, target.width, target.height);\r\n    let captureCanvas = textureToCanvas(texture, target.width, target.height);\r\n    let datauri = captureCanvas.toDataURL();\r\n    downloadURI('fluid.png', datauri);\r\n    URL.revokeObjectURL(datauri);\r\n}\r\nfunction framebufferToTexture(target) {\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, target.fbo);\r\n    let length = target.width * target.height * 4;\r\n    let texture = new Float32Array(length);\r\n    gl.readPixels(0, 0, target.width, target.height, gl.RGBA, gl.FLOAT, texture);\r\n    return texture;\r\n}\r\nfunction normalizeTexture(texture, width, height) {\r\n    let result = new Uint8Array(texture.length);\r\n    let id = 0;\r\n    for (let i = height - 1; i >= 0; i--) {\r\n        for (let j = 0; j < width; j++) {\r\n            let nid = i * width * 4 + j * 4;\r\n            result[nid + 0] = clamp01(texture[id + 0]) * 255;\r\n            result[nid + 1] = clamp01(texture[id + 1]) * 255;\r\n            result[nid + 2] = clamp01(texture[id + 2]) * 255;\r\n            result[nid + 3] = clamp01(texture[id + 3]) * 255;\r\n            id += 4;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction clamp01(input) {\r\n    return Math.min(Math.max(input, 0), 1);\r\n}\r\nfunction textureToCanvas(texture, width, height) {\r\n    let captureCanvas = document.createElement('canvas');\r\n    let ctx = notNull(captureCanvas.getContext('2d'), 'canvas.getContext(2d)');\r\n    captureCanvas.width = width;\r\n    captureCanvas.height = height;\r\n    let imageData = ctx.createImageData(width, height);\r\n    imageData.data.set(texture);\r\n    ctx.putImageData(imageData, 0, 0);\r\n    return captureCanvas;\r\n}\r\nfunction downloadURI(filename, uri) {\r\n    let link = document.createElement('a');\r\n    link.download = filename;\r\n    link.href = uri;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n}\r\nclass Material {\r\n    constructor(vertexShader, fragmentShaderSource) {\r\n        this.vertexShader = vertexShader;\r\n        this.fragmentShaderSource = fragmentShaderSource;\r\n        this.programs = [];\r\n        this.activeProgram = null;\r\n        this.uniforms = undefined;\r\n    }\r\n    setKeywords(keywords) {\r\n        let hash = 0;\r\n        for (let i = 0; i < keywords.length; i++)\r\n            hash += hashCode(keywords[i]);\r\n        let program = this.programs[hash];\r\n        if (program == null) {\r\n            let fragmentShader = compileShader(gl.FRAGMENT_SHADER, this.fragmentShaderSource, keywords);\r\n            program = createProgram(this.vertexShader, fragmentShader);\r\n            this.programs[hash] = program;\r\n        }\r\n        if (program == this.activeProgram)\r\n            return;\r\n        this.uniforms = getUniforms(program);\r\n        this.activeProgram = program;\r\n    }\r\n    bind() {\r\n        gl.useProgram(this.activeProgram);\r\n    }\r\n}\r\nclass Program {\r\n    constructor(vertexShader, fragmentShader) {\r\n        this.program = createProgram(vertexShader, fragmentShader);\r\n        this.uniforms = getUniforms(this.program);\r\n    }\r\n    bind() {\r\n        gl.useProgram(this.program);\r\n    }\r\n}\r\nfunction createProgram(vertexShader, fragmentShader) {\r\n    let program = notNull(gl.createProgram());\r\n    gl.attachShader(program, vertexShader);\r\n    gl.attachShader(program, fragmentShader);\r\n    gl.linkProgram(program);\r\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS))\r\n        throw gl.getProgramInfoLog(program);\r\n    return program;\r\n}\r\nfunction getUniforms(program) {\r\n    let uniforms = []; // TODO switch to {} if possible\r\n    let uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\r\n    for (let i = 0; i < uniformCount; i++) {\r\n        let uniformName = notNull(gl.getActiveUniform(program, i)).name;\r\n        uniforms[uniformName] = notNull(gl.getUniformLocation(program, uniformName));\r\n    }\r\n    return uniforms;\r\n}\r\nfunction compileShader(type, source, keywords) {\r\n    source = addKeywords(source, keywords);\r\n    const shader = gl.createShader(type);\r\n    if (!shader) {\r\n        throw new Error(`failed to create shader type ${type}`);\r\n    }\r\n    gl.shaderSource(shader, source);\r\n    gl.compileShader(shader);\r\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS))\r\n        throw gl.getShaderInfoLog(shader);\r\n    return shader;\r\n}\r\nfunction addKeywords(source, keywords) {\r\n    if (keywords == null)\r\n        return source;\r\n    let keywordsString = '';\r\n    keywords.forEach(keyword => {\r\n        keywordsString += '#define ' + keyword + '\\n';\r\n    });\r\n    return keywordsString + source;\r\n}\r\nconst baseVertexShader = compileShader(gl.VERTEX_SHADER, `\r\n    precision highp float;\r\n\r\n    attribute vec2 aPosition;\r\n    varying vec2 vUv;\r\n    varying vec2 vL;\r\n    varying vec2 vR;\r\n    varying vec2 vT;\r\n    varying vec2 vB;\r\n    uniform vec2 texelSize;\r\n\r\n    void main () {\r\n        vUv = aPosition * 0.5 + 0.5;\r\n        vL = vUv - vec2(texelSize.x, 0.0);\r\n        vR = vUv + vec2(texelSize.x, 0.0);\r\n        vT = vUv + vec2(0.0, texelSize.y);\r\n        vB = vUv - vec2(0.0, texelSize.y);\r\n        gl_Position = vec4(aPosition, 0.0, 1.0);\r\n    }\r\n`);\r\nconst blurVertexShader = compileShader(gl.VERTEX_SHADER, `\r\n    precision highp float;\r\n\r\n    attribute vec2 aPosition;\r\n    varying vec2 vUv;\r\n    varying vec2 vL;\r\n    varying vec2 vR;\r\n    uniform vec2 texelSize;\r\n\r\n    void main () {\r\n        vUv = aPosition * 0.5 + 0.5;\r\n        float offset = 1.33333333;\r\n        vL = vUv - texelSize * offset;\r\n        vR = vUv + texelSize * offset;\r\n        gl_Position = vec4(aPosition, 0.0, 1.0);\r\n    }\r\n`);\r\nconst blurShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying vec2 vUv;\r\n    varying vec2 vL;\r\n    varying vec2 vR;\r\n    uniform sampler2D uTexture;\r\n\r\n    void main () {\r\n        vec4 sum = texture2D(uTexture, vUv) * 0.29411764;\r\n        sum += texture2D(uTexture, vL) * 0.35294117;\r\n        sum += texture2D(uTexture, vR) * 0.35294117;\r\n        gl_FragColor = sum;\r\n    }\r\n`);\r\nconst copyShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying highp vec2 vUv;\r\n    uniform sampler2D uTexture;\r\n\r\n    void main () {\r\n        gl_FragColor = texture2D(uTexture, vUv);\r\n    }\r\n`);\r\nconst clearShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying highp vec2 vUv;\r\n    uniform sampler2D uTexture;\r\n    uniform float value;\r\n\r\n    void main () {\r\n        gl_FragColor = value * texture2D(uTexture, vUv);\r\n    }\r\n`);\r\nconst colorShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n\r\n    uniform vec4 color;\r\n\r\n    void main () {\r\n        gl_FragColor = color;\r\n    }\r\n`);\r\nconst checkerboardShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision highp float;\r\n    precision highp sampler2D;\r\n\r\n    varying vec2 vUv;\r\n    uniform sampler2D uTexture;\r\n    uniform float aspectRatio;\r\n\r\n    #define SCALE 25.0\r\n\r\n    void main () {\r\n        vec2 uv = floor(vUv * SCALE * vec2(aspectRatio, 1.0));\r\n        float v = mod(uv.x + uv.y, 2.0);\r\n        v = v * 0.1 + 0.8;\r\n        gl_FragColor = vec4(vec3(v), 1.0);\r\n    }\r\n`);\r\nconst displayShaderSource = `\r\n    precision highp float;\r\n    precision highp sampler2D;\r\n\r\n    varying vec2 vUv;\r\n    varying vec2 vL;\r\n    varying vec2 vR;\r\n    varying vec2 vT;\r\n    varying vec2 vB;\r\n    uniform sampler2D uTexture;\r\n    uniform sampler2D uBloom;\r\n    uniform sampler2D uSunrays;\r\n    uniform sampler2D uDithering;\r\n    uniform vec2 ditherScale;\r\n    uniform vec2 texelSize;\r\n\r\n    vec3 linearToGamma (vec3 color) {\r\n        color = max(color, vec3(0));\r\n        return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));\r\n    }\r\n\r\n    void main () {\r\n        vec3 c = texture2D(uTexture, vUv).rgb;\r\n\r\n    #ifdef SHADING\r\n        vec3 lc = texture2D(uTexture, vL).rgb;\r\n        vec3 rc = texture2D(uTexture, vR).rgb;\r\n        vec3 tc = texture2D(uTexture, vT).rgb;\r\n        vec3 bc = texture2D(uTexture, vB).rgb;\r\n\r\n        float dx = length(rc) - length(lc);\r\n        float dy = length(tc) - length(bc);\r\n\r\n        vec3 n = normalize(vec3(dx, dy, length(texelSize)));\r\n        vec3 l = vec3(0.0, 0.0, 1.0);\r\n\r\n        float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\r\n        c *= diffuse;\r\n    #endif\r\n\r\n    #ifdef BLOOM\r\n        vec3 bloom = texture2D(uBloom, vUv).rgb;\r\n    #endif\r\n\r\n    #ifdef SUNRAYS\r\n        float sunrays = texture2D(uSunrays, vUv).r;\r\n        c *= sunrays;\r\n    #ifdef BLOOM\r\n        bloom *= sunrays;\r\n    #endif\r\n    #endif\r\n\r\n    #ifdef BLOOM\r\n        float noise = texture2D(uDithering, vUv * ditherScale).r;\r\n        noise = noise * 2.0 - 1.0;\r\n        bloom += noise / 255.0;\r\n        bloom = linearToGamma(bloom);\r\n        c += bloom;\r\n    #endif\r\n\r\n        float a = max(c.r, max(c.g, c.b));\r\n        gl_FragColor = vec4(c, a);\r\n    }\r\n`;\r\nconst bloomPrefilterShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying vec2 vUv;\r\n    uniform sampler2D uTexture;\r\n    uniform vec3 curve;\r\n    uniform float threshold;\r\n\r\n    void main () {\r\n        vec3 c = texture2D(uTexture, vUv).rgb;\r\n        float br = max(c.r, max(c.g, c.b));\r\n        float rq = clamp(br - curve.x, 0.0, curve.y);\r\n        rq = curve.z * rq * rq;\r\n        c *= max(rq, br - threshold) / max(br, 0.0001);\r\n        gl_FragColor = vec4(c, 0.0);\r\n    }\r\n`);\r\nconst bloomBlurShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying vec2 vL;\r\n    varying vec2 vR;\r\n    varying vec2 vT;\r\n    varying vec2 vB;\r\n    uniform sampler2D uTexture;\r\n\r\n    void main () {\r\n        vec4 sum = vec4(0.0);\r\n        sum += texture2D(uTexture, vL);\r\n        sum += texture2D(uTexture, vR);\r\n        sum += texture2D(uTexture, vT);\r\n        sum += texture2D(uTexture, vB);\r\n        sum *= 0.25;\r\n        gl_FragColor = sum;\r\n    }\r\n`);\r\nconst bloomFinalShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying vec2 vL;\r\n    varying vec2 vR;\r\n    varying vec2 vT;\r\n    varying vec2 vB;\r\n    uniform sampler2D uTexture;\r\n    uniform float intensity;\r\n\r\n    void main () {\r\n        vec4 sum = vec4(0.0);\r\n        sum += texture2D(uTexture, vL);\r\n        sum += texture2D(uTexture, vR);\r\n        sum += texture2D(uTexture, vT);\r\n        sum += texture2D(uTexture, vB);\r\n        sum *= 0.25;\r\n        gl_FragColor = sum * intensity;\r\n    }\r\n`);\r\nconst sunraysMaskShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision highp float;\r\n    precision highp sampler2D;\r\n\r\n    varying vec2 vUv;\r\n    uniform sampler2D uTexture;\r\n\r\n    void main () {\r\n        vec4 c = texture2D(uTexture, vUv);\r\n        float br = max(c.r, max(c.g, c.b));\r\n        c.a = 1.0 - min(max(br * 20.0, 0.0), 0.8);\r\n        gl_FragColor = c;\r\n    }\r\n`);\r\nconst sunraysShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision highp float;\r\n    precision highp sampler2D;\r\n\r\n    varying vec2 vUv;\r\n    uniform sampler2D uTexture;\r\n    uniform float weight;\r\n\r\n    #define ITERATIONS 16\r\n\r\n    void main () {\r\n        float Density = 0.3;\r\n        float Decay = 0.95;\r\n        float Exposure = 0.7;\r\n\r\n        vec2 coord = vUv;\r\n        vec2 dir = vUv - 0.5;\r\n\r\n        dir *= 1.0 / float(ITERATIONS) * Density;\r\n        float illuminationDecay = 1.0;\r\n\r\n        float color = texture2D(uTexture, vUv).a;\r\n\r\n        for (int i = 0; i < ITERATIONS; i++)\r\n        {\r\n            coord -= dir;\r\n            float col = texture2D(uTexture, coord).a;\r\n            color += col * illuminationDecay * weight;\r\n            illuminationDecay *= Decay;\r\n        }\r\n\r\n        gl_FragColor = vec4(color * Exposure, 0.0, 0.0, 1.0);\r\n    }\r\n`);\r\nconst splatShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision highp float;\r\n    precision highp sampler2D;\r\n\r\n    varying vec2 vUv;\r\n    uniform sampler2D uTarget;\r\n    uniform float aspectRatio;\r\n    uniform vec3 color;\r\n    uniform vec2 point;\r\n    uniform float radius;\r\n\r\n    void main () {\r\n        vec2 p = vUv - point.xy;\r\n        p.x *= aspectRatio;\r\n        vec3 splat = exp(-dot(p, p) / radius) * color;\r\n        vec3 base = texture2D(uTarget, vUv).xyz;\r\n        gl_FragColor = vec4(base + splat, 1.0);\r\n    }\r\n`);\r\nconst advectionShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision highp float;\r\n    precision highp sampler2D;\r\n\r\n    varying vec2 vUv;\r\n    uniform sampler2D uVelocity;\r\n    uniform sampler2D uSource;\r\n    uniform vec2 texelSize;\r\n    uniform vec2 dyeTexelSize;\r\n    uniform float dt;\r\n    uniform float dissipation;\r\n\r\n    vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\r\n        vec2 st = uv / tsize - 0.5;\r\n\r\n        vec2 iuv = floor(st);\r\n        vec2 fuv = fract(st);\r\n\r\n        vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\r\n        vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\r\n        vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\r\n        vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\r\n\r\n        return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\r\n    }\r\n\r\n    void main () {\r\n    #ifdef MANUAL_FILTERING\r\n        vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\r\n        vec4 result = bilerp(uSource, coord, dyeTexelSize);\r\n    #else\r\n        vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\r\n        vec4 result = texture2D(uSource, coord);\r\n    #endif\r\n        float decay = 1.0 + dissipation * dt;\r\n        gl_FragColor = result / decay;\r\n    }`, ext.supportLinearFiltering ? undefined : ['MANUAL_FILTERING']);\r\nconst divergenceShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying highp vec2 vUv;\r\n    varying highp vec2 vL;\r\n    varying highp vec2 vR;\r\n    varying highp vec2 vT;\r\n    varying highp vec2 vB;\r\n    uniform sampler2D uVelocity;\r\n\r\n    void main () {\r\n        float L = texture2D(uVelocity, vL).x;\r\n        float R = texture2D(uVelocity, vR).x;\r\n        float T = texture2D(uVelocity, vT).y;\r\n        float B = texture2D(uVelocity, vB).y;\r\n\r\n        vec2 C = texture2D(uVelocity, vUv).xy;\r\n        if (vL.x < 0.0) { L = -C.x; }\r\n        if (vR.x > 1.0) { R = -C.x; }\r\n        if (vT.y > 1.0) { T = -C.y; }\r\n        if (vB.y < 0.0) { B = -C.y; }\r\n\r\n        float div = 0.5 * (R - L + T - B);\r\n        gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\r\n    }\r\n`);\r\nconst curlShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying highp vec2 vUv;\r\n    varying highp vec2 vL;\r\n    varying highp vec2 vR;\r\n    varying highp vec2 vT;\r\n    varying highp vec2 vB;\r\n    uniform sampler2D uVelocity;\r\n\r\n    void main () {\r\n        float L = texture2D(uVelocity, vL).y;\r\n        float R = texture2D(uVelocity, vR).y;\r\n        float T = texture2D(uVelocity, vT).x;\r\n        float B = texture2D(uVelocity, vB).x;\r\n        float vorticity = R - L - T + B;\r\n        gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\r\n    }\r\n`);\r\nconst vorticityShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision highp float;\r\n    precision highp sampler2D;\r\n\r\n    varying vec2 vUv;\r\n    varying vec2 vL;\r\n    varying vec2 vR;\r\n    varying vec2 vT;\r\n    varying vec2 vB;\r\n    uniform sampler2D uVelocity;\r\n    uniform sampler2D uCurl;\r\n    uniform float curl;\r\n    uniform float dt;\r\n\r\n    void main () {\r\n        float L = texture2D(uCurl, vL).x;\r\n        float R = texture2D(uCurl, vR).x;\r\n        float T = texture2D(uCurl, vT).x;\r\n        float B = texture2D(uCurl, vB).x;\r\n        float C = texture2D(uCurl, vUv).x;\r\n\r\n        vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\r\n        force /= length(force) + 0.0001;\r\n        force *= curl * C;\r\n        force.y *= -1.0;\r\n\r\n        vec2 vel = texture2D(uVelocity, vUv).xy;\r\n        gl_FragColor = vec4(vel + force * dt, 0.0, 1.0);\r\n    }\r\n`);\r\nconst pressureShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying highp vec2 vUv;\r\n    varying highp vec2 vL;\r\n    varying highp vec2 vR;\r\n    varying highp vec2 vT;\r\n    varying highp vec2 vB;\r\n    uniform sampler2D uPressure;\r\n    uniform sampler2D uDivergence;\r\n\r\n    void main () {\r\n        float L = texture2D(uPressure, vL).x;\r\n        float R = texture2D(uPressure, vR).x;\r\n        float T = texture2D(uPressure, vT).x;\r\n        float B = texture2D(uPressure, vB).x;\r\n        float C = texture2D(uPressure, vUv).x;\r\n        float divergence = texture2D(uDivergence, vUv).x;\r\n        float pressure = (L + R + B + T - divergence) * 0.25;\r\n        gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\r\n    }\r\n`);\r\nconst gradientSubtractShader = compileShader(gl.FRAGMENT_SHADER, `\r\n    precision mediump float;\r\n    precision mediump sampler2D;\r\n\r\n    varying highp vec2 vUv;\r\n    varying highp vec2 vL;\r\n    varying highp vec2 vR;\r\n    varying highp vec2 vT;\r\n    varying highp vec2 vB;\r\n    uniform sampler2D uPressure;\r\n    uniform sampler2D uVelocity;\r\n\r\n    void main () {\r\n        float L = texture2D(uPressure, vL).x;\r\n        float R = texture2D(uPressure, vR).x;\r\n        float T = texture2D(uPressure, vT).x;\r\n        float B = texture2D(uPressure, vB).x;\r\n        vec2 velocity = texture2D(uVelocity, vUv).xy;\r\n        velocity.xy -= vec2(R - L, T - B);\r\n        gl_FragColor = vec4(velocity, 0.0, 1.0);\r\n    }\r\n`);\r\nconst blit = (() => {\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), gl.STATIC_DRAW);\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 0, 2, 3]), gl.STATIC_DRAW);\r\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\r\n    gl.enableVertexAttribArray(0);\r\n    return (destination) => {\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, destination);\r\n        gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);\r\n    };\r\n})();\r\nlet dye;\r\nlet velocity;\r\nlet divergence;\r\nlet curl;\r\nlet pressure;\r\nlet bloom;\r\nlet bloomFramebuffers = [];\r\nlet sunrays;\r\nlet sunraysTemp;\r\nlet ditheringTexture = createTextureAsync('LDR_LLL1_0.png');\r\nconst blurProgram = new Program(blurVertexShader, blurShader);\r\nconst copyProgram = new Program(baseVertexShader, copyShader);\r\nconst clearProgram = new Program(baseVertexShader, clearShader);\r\nconst colorProgram = new Program(baseVertexShader, colorShader);\r\nconst checkerboardProgram = new Program(baseVertexShader, checkerboardShader);\r\nconst bloomPrefilterProgram = new Program(baseVertexShader, bloomPrefilterShader);\r\nconst bloomBlurProgram = new Program(baseVertexShader, bloomBlurShader);\r\nconst bloomFinalProgram = new Program(baseVertexShader, bloomFinalShader);\r\nconst sunraysMaskProgram = new Program(baseVertexShader, sunraysMaskShader);\r\nconst sunraysProgram = new Program(baseVertexShader, sunraysShader);\r\nconst splatProgram = new Program(baseVertexShader, splatShader);\r\nconst advectionProgram = new Program(baseVertexShader, advectionShader);\r\nconst divergenceProgram = new Program(baseVertexShader, divergenceShader);\r\nconst curlProgram = new Program(baseVertexShader, curlShader);\r\nconst vorticityProgram = new Program(baseVertexShader, vorticityShader);\r\nconst pressureProgram = new Program(baseVertexShader, pressureShader);\r\nconst gradienSubtractProgram = new Program(baseVertexShader, gradientSubtractShader);\r\nconst displayMaterial = new Material(baseVertexShader, displayShaderSource);\r\nfunction initFramebuffers() {\r\n    let simRes = getResolution(config.SIM_RESOLUTION);\r\n    let dyeRes = getResolution(config.DYE_RESOLUTION);\r\n    const texType = ext.halfFloatTexType;\r\n    const rgba = ext.formatRGBA;\r\n    const rg = ext.formatRG;\r\n    const r = ext.formatR;\r\n    const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\r\n    if (dye == null)\r\n        dye = createDoubleFBO(dyeRes.width, dyeRes.height, rgba.internalFormat, rgba.format, texType, filtering);\r\n    else\r\n        dye = resizeDoubleFBO(dye, dyeRes.width, dyeRes.height, rgba.internalFormat, rgba.format, texType, filtering);\r\n    if (velocity == null)\r\n        velocity = createDoubleFBO(simRes.width, simRes.height, rg.internalFormat, rg.format, texType, filtering);\r\n    else\r\n        velocity = resizeDoubleFBO(velocity, simRes.width, simRes.height, rg.internalFormat, rg.format, texType, filtering);\r\n    divergence = createFBO(simRes.width, simRes.height, r.internalFormat, r.format, texType, gl.NEAREST);\r\n    curl = createFBO(simRes.width, simRes.height, r.internalFormat, r.format, texType, gl.NEAREST);\r\n    pressure = createDoubleFBO(simRes.width, simRes.height, r.internalFormat, r.format, texType, gl.NEAREST);\r\n    initBloomFramebuffers();\r\n    initSunraysFramebuffers();\r\n}\r\nfunction initBloomFramebuffers() {\r\n    let res = getResolution(config.BLOOM_RESOLUTION);\r\n    const texType = ext.halfFloatTexType;\r\n    const rgba = ext.formatRGBA;\r\n    const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\r\n    bloom = createFBO(res.width, res.height, rgba.internalFormat, rgba.format, texType, filtering);\r\n    bloomFramebuffers.length = 0;\r\n    for (let i = 0; i < config.BLOOM_ITERATIONS; i++) {\r\n        let width = res.width >> (i + 1);\r\n        let height = res.height >> (i + 1);\r\n        if (width < 2 || height < 2)\r\n            break;\r\n        let fbo = createFBO(width, height, rgba.internalFormat, rgba.format, texType, filtering);\r\n        bloomFramebuffers.push(fbo);\r\n    }\r\n}\r\nfunction initSunraysFramebuffers() {\r\n    let res = getResolution(config.SUNRAYS_RESOLUTION);\r\n    const texType = ext.halfFloatTexType;\r\n    const r = ext.formatR;\r\n    const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\r\n    sunrays = createFBO(res.width, res.height, r.internalFormat, r.format, texType, filtering);\r\n    sunraysTemp = createFBO(res.width, res.height, r.internalFormat, r.format, texType, filtering);\r\n}\r\nfunction createFBO(w, h, internalFormat, format, type, param) {\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    let texture = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, param);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, param);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, w, h, 0, format, type, null);\r\n    let fbo = gl.createFramebuffer();\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\r\n    gl.viewport(0, 0, w, h);\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n    let texelSizeX = 1.0 / w;\r\n    let texelSizeY = 1.0 / h;\r\n    return {\r\n        texture,\r\n        fbo,\r\n        width: w,\r\n        height: h,\r\n        texelSizeX,\r\n        texelSizeY,\r\n        attach(id) {\r\n            gl.activeTexture(gl.TEXTURE0 + id);\r\n            gl.bindTexture(gl.TEXTURE_2D, texture);\r\n            return id;\r\n        },\r\n    };\r\n}\r\nfunction createDoubleFBO(w, h, internalFormat, format, type, param) {\r\n    let fbo1 = createFBO(w, h, internalFormat, format, type, param);\r\n    let fbo2 = createFBO(w, h, internalFormat, format, type, param);\r\n    return {\r\n        width: w,\r\n        height: h,\r\n        texelSizeX: fbo1.texelSizeX,\r\n        texelSizeY: fbo1.texelSizeY,\r\n        get read() {\r\n            return fbo1;\r\n        },\r\n        set read(value) {\r\n            fbo1 = value;\r\n        },\r\n        get write() {\r\n            return fbo2;\r\n        },\r\n        set write(value) {\r\n            fbo2 = value;\r\n        },\r\n        swap() {\r\n            let temp = fbo1;\r\n            fbo1 = fbo2;\r\n            fbo2 = temp;\r\n        },\r\n    };\r\n}\r\nfunction resizeFBO(target, w, h, internalFormat, format, type, param) {\r\n    let newFBO = createFBO(w, h, internalFormat, format, type, param);\r\n    copyProgram.bind();\r\n    gl.uniform1i(copyProgram.uniforms.uTexture, target.attach(0));\r\n    blit(newFBO.fbo);\r\n    return newFBO;\r\n}\r\nfunction resizeDoubleFBO(target, w, h, internalFormat, format, type, param) {\r\n    if (target.width == w && target.height == h)\r\n        return target;\r\n    target.read = resizeFBO(target.read, w, h, internalFormat, format, type, param);\r\n    target.write = createFBO(w, h, internalFormat, format, type, param);\r\n    target.width = w;\r\n    target.height = h;\r\n    target.texelSizeX = 1.0 / w;\r\n    target.texelSizeY = 1.0 / h;\r\n    return target;\r\n}\r\nfunction createTextureAsync(url) {\r\n    let texture = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, 1, 1, 0, gl.RGB, gl.UNSIGNED_BYTE, new Uint8Array([255, 255, 255]));\r\n    let obj = {\r\n        texture,\r\n        width: 1,\r\n        height: 1,\r\n        attach(id) {\r\n            gl.activeTexture(gl.TEXTURE0 + id);\r\n            gl.bindTexture(gl.TEXTURE_2D, texture);\r\n            return id;\r\n        },\r\n    };\r\n    let image = new Image();\r\n    //image.crossOrigin = 'anonymous'\r\n    image.onload = () => {\r\n        obj.width = image.width;\r\n        obj.height = image.height;\r\n        gl.bindTexture(gl.TEXTURE_2D, texture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image);\r\n    };\r\n    image.src = url;\r\n    return obj;\r\n}\r\nfunction updateKeywords() {\r\n    let displayKeywords = [];\r\n    if (config.SHADING)\r\n        displayKeywords.push('SHADING');\r\n    if (config.BLOOM)\r\n        displayKeywords.push('BLOOM');\r\n    if (config.SUNRAYS)\r\n        displayKeywords.push('SUNRAYS');\r\n    displayMaterial.setKeywords(displayKeywords);\r\n}\r\n// Main\r\nupdateKeywords();\r\ninitFramebuffers();\r\nmultipleSplats(safeParseInt(Math.random() * 20) + 5);\r\nlet fpsInterval;\r\nlet startTime;\r\nlet _now;\r\nlet then;\r\nlet elapsed;\r\nlet lastUpdateTime = Date.now();\r\nlet colorUpdateTimer = 0.0;\r\nstartAnimating(999);\r\n//Source: https://stackoverflow.com/a/19772220\r\nfunction startAnimating(fps) {\r\n    fpsInterval = 1000 / fps;\r\n    then = Date.now();\r\n    startTime = then;\r\n    update();\r\n}\r\nfunction update() {\r\n    _now = Date.now();\r\n    elapsed = _now - then;\r\n    // if enough time has elapsed, draw the next frame\r\n    if (elapsed > fpsInterval) {\r\n        // Get ready for next frame by setting then=_now, but also adjust for your\r\n        // specified fpsInterval not being a multiple of RAF's interval (16.7ms)\r\n        then = _now - (elapsed % fpsInterval);\r\n        // Put your drawing code here\r\n        const dt = calcDeltaTime();\r\n        if (resizeCanvas())\r\n            initFramebuffers();\r\n        applyVisualizer();\r\n        updateColors(dt);\r\n        applyInputs();\r\n        if (!config.PAUSED)\r\n            step(dt);\r\n        render(null);\r\n    }\r\n    requestAnimationFrame(update);\r\n}\r\nfunction calcDeltaTime() {\r\n    let now = Date.now();\r\n    let dt = (now - lastUpdateTime) / 1000;\r\n    dt = Math.min(dt, 0.016666);\r\n    lastUpdateTime = now;\r\n    return dt;\r\n}\r\nfunction resizeCanvas() {\r\n    let width = scaleByPixelRatio(canvas.clientWidth);\r\n    let height = scaleByPixelRatio(canvas.clientHeight);\r\n    if (canvas.width != width || canvas.height != height) {\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction updateColors(dt) {\r\n    if (!config.COLORFUL)\r\n        return;\r\n    colorUpdateTimer += dt * config.COLOR_UPDATE_SPEED;\r\n    if (colorUpdateTimer >= 1) {\r\n        colorUpdateTimer = wrap(colorUpdateTimer, 0, 1);\r\n        pointers.forEach(p => {\r\n            p.colorUpdates++;\r\n            if (p.colorUpdates > 2) {\r\n                p.color = generateColor();\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction applyInputs() {\r\n    if (splatStack.length > 0)\r\n        multipleSplats(splatStack.pop() || 0);\r\n    pointers.forEach(p => {\r\n        if (p.moved) {\r\n            p.moved = false;\r\n            splatPointer(p);\r\n        }\r\n    });\r\n}\r\n/**\r\n * Visualizer - added\r\n */\r\nfunction applyVisualizer() {\r\n    const data = songPlayer.update();\r\n    if (!data) {\r\n        return;\r\n    }\r\n    const freq = data.freq;\r\n    // Draw?\r\n    for (let i = 0; i < freq.buckets; i++) {\r\n        const x = i / freq.buckets;\r\n        const color = HSVtoRGB(x, 1.0, 1.0);\r\n        splat(x, 0, 0, freq.current[i] * 10, color, 0.01);\r\n    }\r\n}\r\nfunction step(dt) {\r\n    gl.disable(gl.BLEND);\r\n    gl.viewport(0, 0, velocity.width, velocity.height);\r\n    curlProgram.bind();\r\n    gl.uniform2f(curlProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\r\n    gl.uniform1i(curlProgram.uniforms.uVelocity, velocity.read.attach(0));\r\n    blit(curl.fbo);\r\n    vorticityProgram.bind();\r\n    gl.uniform2f(vorticityProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\r\n    gl.uniform1i(vorticityProgram.uniforms.uVelocity, velocity.read.attach(0));\r\n    gl.uniform1i(vorticityProgram.uniforms.uCurl, curl.attach(1));\r\n    gl.uniform1f(vorticityProgram.uniforms.curl, config.CURL);\r\n    gl.uniform1f(vorticityProgram.uniforms.dt, dt);\r\n    blit(velocity.write.fbo);\r\n    velocity.swap();\r\n    divergenceProgram.bind();\r\n    gl.uniform2f(divergenceProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\r\n    gl.uniform1i(divergenceProgram.uniforms.uVelocity, velocity.read.attach(0));\r\n    blit(divergence.fbo);\r\n    clearProgram.bind();\r\n    gl.uniform1i(clearProgram.uniforms.uTexture, pressure.read.attach(0));\r\n    gl.uniform1f(clearProgram.uniforms.value, config.PRESSURE);\r\n    blit(pressure.write.fbo);\r\n    pressure.swap();\r\n    pressureProgram.bind();\r\n    gl.uniform2f(pressureProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\r\n    gl.uniform1i(pressureProgram.uniforms.uDivergence, divergence.attach(0));\r\n    for (let i = 0; i < config.PRESSURE_ITERATIONS; i++) {\r\n        gl.uniform1i(pressureProgram.uniforms.uPressure, pressure.read.attach(1));\r\n        blit(pressure.write.fbo);\r\n        pressure.swap();\r\n    }\r\n    gradienSubtractProgram.bind();\r\n    gl.uniform2f(gradienSubtractProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\r\n    gl.uniform1i(gradienSubtractProgram.uniforms.uPressure, pressure.read.attach(0));\r\n    gl.uniform1i(gradienSubtractProgram.uniforms.uVelocity, velocity.read.attach(1));\r\n    blit(velocity.write.fbo);\r\n    velocity.swap();\r\n    advectionProgram.bind();\r\n    gl.uniform2f(advectionProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\r\n    if (!ext.supportLinearFiltering)\r\n        gl.uniform2f(advectionProgram.uniforms.dyeTexelSize, velocity.texelSizeX, velocity.texelSizeY);\r\n    let velocityId = velocity.read.attach(0);\r\n    gl.uniform1i(advectionProgram.uniforms.uVelocity, velocityId);\r\n    gl.uniform1i(advectionProgram.uniforms.uSource, velocityId);\r\n    gl.uniform1f(advectionProgram.uniforms.dt, dt);\r\n    gl.uniform1f(advectionProgram.uniforms.dissipation, config.VELOCITY_DISSIPATION);\r\n    blit(velocity.write.fbo);\r\n    velocity.swap();\r\n    gl.viewport(0, 0, dye.width, dye.height);\r\n    if (!ext.supportLinearFiltering)\r\n        gl.uniform2f(advectionProgram.uniforms.dyeTexelSize, dye.texelSizeX, dye.texelSizeY);\r\n    gl.uniform1i(advectionProgram.uniforms.uVelocity, velocity.read.attach(0));\r\n    gl.uniform1i(advectionProgram.uniforms.uSource, dye.read.attach(1));\r\n    gl.uniform1f(advectionProgram.uniforms.dissipation, config.DENSITY_DISSIPATION);\r\n    blit(dye.write.fbo);\r\n    dye.swap();\r\n}\r\nfunction render(target) {\r\n    if (config.BLOOM)\r\n        applyBloom(dye.read, bloom);\r\n    if (config.SUNRAYS) {\r\n        applySunrays(dye.read, dye.write, sunrays);\r\n        blurFBO(sunrays, sunraysTemp, 1);\r\n    }\r\n    if (target == null || !config.TRANSPARENT) {\r\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n        gl.enable(gl.BLEND);\r\n    }\r\n    else {\r\n        gl.disable(gl.BLEND);\r\n    }\r\n    let width = target == null ? gl.drawingBufferWidth : target.width;\r\n    let height = target == null ? gl.drawingBufferHeight : target.height;\r\n    gl.viewport(0, 0, width, height);\r\n    let fbo = target == null ? null : target.fbo;\r\n    if (!config.TRANSPARENT)\r\n        drawColor(fbo, normalizeColor(config.BACK_COLOR));\r\n    if (target == null && config.TRANSPARENT)\r\n        drawCheckerboard(fbo);\r\n    drawDisplay(fbo, width, height);\r\n}\r\nfunction drawColor(fbo, color) {\r\n    colorProgram.bind();\r\n    gl.uniform4f(colorProgram.uniforms.color, color.r, color.g, color.b, 1);\r\n    blit(fbo);\r\n}\r\nfunction drawCheckerboard(fbo) {\r\n    checkerboardProgram.bind();\r\n    gl.uniform1f(checkerboardProgram.uniforms.aspectRatio, canvas.width / canvas.height);\r\n    blit(fbo);\r\n}\r\nfunction drawDisplay(fbo, width, height) {\r\n    displayMaterial.bind();\r\n    const uniforms = notNull(displayMaterial.uniforms);\r\n    if (config.SHADING)\r\n        gl.uniform2f(uniforms.texelSize, 1.0 / width, 1.0 / height);\r\n    gl.uniform1i(uniforms.uTexture, dye.read.attach(0));\r\n    if (config.BLOOM) {\r\n        gl.uniform1i(uniforms.uBloom, bloom.attach(1));\r\n        gl.uniform1i(uniforms.uDithering, ditheringTexture.attach(2));\r\n        let scale = getTextureScale(ditheringTexture, width, height);\r\n        gl.uniform2f(uniforms.ditherScale, scale.x, scale.y);\r\n    }\r\n    if (config.SUNRAYS)\r\n        gl.uniform1i(uniforms.uSunrays, sunrays.attach(3));\r\n    blit(fbo);\r\n}\r\nfunction applyBloom(source, destination) {\r\n    if (bloomFramebuffers.length < 2)\r\n        return;\r\n    let last = destination;\r\n    gl.disable(gl.BLEND);\r\n    bloomPrefilterProgram.bind();\r\n    let knee = config.BLOOM_THRESHOLD * config.BLOOM_SOFT_KNEE + 0.0001;\r\n    let curve0 = config.BLOOM_THRESHOLD - knee;\r\n    let curve1 = knee * 2;\r\n    let curve2 = 0.25 / knee;\r\n    gl.uniform3f(bloomPrefilterProgram.uniforms.curve, curve0, curve1, curve2);\r\n    gl.uniform1f(bloomPrefilterProgram.uniforms.threshold, config.BLOOM_THRESHOLD);\r\n    gl.uniform1i(bloomPrefilterProgram.uniforms.uTexture, source.attach(0));\r\n    gl.viewport(0, 0, last.width, last.height);\r\n    blit(last.fbo);\r\n    bloomBlurProgram.bind();\r\n    for (let i = 0; i < bloomFramebuffers.length; i++) {\r\n        let dest = bloomFramebuffers[i];\r\n        gl.uniform2f(bloomBlurProgram.uniforms.texelSize, last.texelSizeX, last.texelSizeY);\r\n        gl.uniform1i(bloomBlurProgram.uniforms.uTexture, last.attach(0));\r\n        gl.viewport(0, 0, dest.width, dest.height);\r\n        blit(dest.fbo);\r\n        last = dest;\r\n    }\r\n    gl.blendFunc(gl.ONE, gl.ONE);\r\n    gl.enable(gl.BLEND);\r\n    for (let i = bloomFramebuffers.length - 2; i >= 0; i--) {\r\n        let baseTex = bloomFramebuffers[i];\r\n        gl.uniform2f(bloomBlurProgram.uniforms.texelSize, last.texelSizeX, last.texelSizeY);\r\n        gl.uniform1i(bloomBlurProgram.uniforms.uTexture, last.attach(0));\r\n        gl.viewport(0, 0, baseTex.width, baseTex.height);\r\n        blit(baseTex.fbo);\r\n        last = baseTex;\r\n    }\r\n    gl.disable(gl.BLEND);\r\n    bloomFinalProgram.bind();\r\n    gl.uniform2f(bloomFinalProgram.uniforms.texelSize, last.texelSizeX, last.texelSizeY);\r\n    gl.uniform1i(bloomFinalProgram.uniforms.uTexture, last.attach(0));\r\n    gl.uniform1f(bloomFinalProgram.uniforms.intensity, config.BLOOM_INTENSITY);\r\n    gl.viewport(0, 0, destination.width, destination.height);\r\n    blit(destination.fbo);\r\n}\r\nfunction applySunrays(source, mask, destination) {\r\n    gl.disable(gl.BLEND);\r\n    sunraysMaskProgram.bind();\r\n    gl.uniform1i(sunraysMaskProgram.uniforms.uTexture, source.attach(0));\r\n    gl.viewport(0, 0, mask.width, mask.height);\r\n    blit(mask.fbo);\r\n    sunraysProgram.bind();\r\n    gl.uniform1f(sunraysProgram.uniforms.weight, config.SUNRAYS_WEIGHT);\r\n    gl.uniform1i(sunraysProgram.uniforms.uTexture, mask.attach(0));\r\n    gl.viewport(0, 0, destination.width, destination.height);\r\n    blit(destination.fbo);\r\n}\r\nfunction blurFBO(target, temp, iterations) {\r\n    blurProgram.bind();\r\n    for (let i = 0; i < iterations; i++) {\r\n        gl.uniform2f(blurProgram.uniforms.texelSize, target.texelSizeX, 0.0);\r\n        gl.uniform1i(blurProgram.uniforms.uTexture, target.attach(0));\r\n        blit(temp.fbo);\r\n        gl.uniform2f(blurProgram.uniforms.texelSize, 0.0, target.texelSizeY);\r\n        gl.uniform1i(blurProgram.uniforms.uTexture, temp.attach(0));\r\n        blit(target.fbo);\r\n    }\r\n}\r\nfunction splatPointer(pointer) {\r\n    let dx = pointer.deltaX * config.SPLAT_FORCE;\r\n    let dy = pointer.deltaY * config.SPLAT_FORCE;\r\n    splat(pointer.texcoordX, pointer.texcoordY, dx, dy, pointer.color);\r\n}\r\nfunction multipleSplats(amount) {\r\n    for (let i = 0; i < amount; i++) {\r\n        const color = generateColor();\r\n        color.r *= 10.0;\r\n        color.g *= 10.0;\r\n        color.b *= 10.0;\r\n        const x = Math.random();\r\n        const y = Math.random();\r\n        const dx = 1000 * (Math.random() - 0.5);\r\n        const dy = 1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color);\r\n    }\r\n}\r\n/**\r\n * Splat some dye into the simulation.\r\n * @param x Center X coordinate. Float from 0 (left) to 1 (right)\r\n * @param y Center Y coordinate. Float form 0 (bottom) to 1 (top)\r\n * @param dx Horizontal force vector element, in pixels. Positive -> left, negative -> right.\r\n * @param dy Vertical force vector element, in pixels. Positive -> top, negative -> bottom.\r\n * @param color Color. Using { r, g, b } values >1 creates a larger splat.\r\n */\r\nfunction splat(x, y, dx, dy, color, radius) {\r\n    gl.viewport(0, 0, velocity.width, velocity.height);\r\n    splatProgram.bind();\r\n    gl.uniform1i(splatProgram.uniforms.uTarget, velocity.read.attach(0));\r\n    gl.uniform1f(splatProgram.uniforms.aspectRatio, canvas.width / canvas.height);\r\n    gl.uniform2f(splatProgram.uniforms.point, x, y);\r\n    gl.uniform3f(splatProgram.uniforms.color, dx, dy, 0.0);\r\n    gl.uniform1f(splatProgram.uniforms.radius, correctRadius((radius || config.SPLAT_RADIUS) / 100.0));\r\n    blit(velocity.write.fbo);\r\n    velocity.swap();\r\n    if (color) {\r\n        gl.viewport(0, 0, dye.width, dye.height);\r\n        gl.uniform1i(splatProgram.uniforms.uTarget, dye.read.attach(0));\r\n        gl.uniform3f(splatProgram.uniforms.color, color.r, color.g, color.b);\r\n        blit(dye.write.fbo);\r\n        dye.swap();\r\n    }\r\n}\r\n// Expose\r\n;\r\nwindow.splat = splat;\r\nfunction correctRadius(radius) {\r\n    let aspectRatio = canvas.width / canvas.height;\r\n    if (aspectRatio > 1)\r\n        radius *= aspectRatio;\r\n    return radius;\r\n}\r\ncanvas.addEventListener('mousedown', e => {\r\n    let posX = scaleByPixelRatio(e.offsetX);\r\n    let posY = scaleByPixelRatio(e.offsetY);\r\n    let pointer = pointers.find(p => p.id == -1);\r\n    if (pointer == null)\r\n        pointer = new Pointer();\r\n    updatePointerDownData(pointer, -1, posX, posY);\r\n});\r\ncanvas.addEventListener('mousemove', e => {\r\n    let pointer = pointers[0];\r\n    if (!pointer.down)\r\n        return;\r\n    let posX = scaleByPixelRatio(e.offsetX);\r\n    let posY = scaleByPixelRatio(e.offsetY);\r\n    updatePointerMoveData(pointer, posX, posY);\r\n});\r\nwindow.addEventListener('mouseup', () => {\r\n    updatePointerUpData(pointers[0]);\r\n});\r\ncanvas.addEventListener('touchstart', e => {\r\n    e.preventDefault();\r\n    const touches = e.targetTouches;\r\n    while (touches.length >= pointers.length)\r\n        pointers.push(new Pointer());\r\n    for (let i = 0; i < touches.length; i++) {\r\n        let posX = scaleByPixelRatio(touches[i].pageX);\r\n        let posY = scaleByPixelRatio(touches[i].pageY);\r\n        updatePointerDownData(pointers[i + 1], touches[i].identifier, posX, posY);\r\n    }\r\n});\r\ncanvas.addEventListener('touchmove', e => {\r\n    e.preventDefault();\r\n    const touches = e.targetTouches;\r\n    for (let i = 0; i < touches.length; i++) {\r\n        let pointer = pointers[i + 1];\r\n        if (!pointer.down)\r\n            continue;\r\n        let posX = scaleByPixelRatio(touches[i].pageX);\r\n        let posY = scaleByPixelRatio(touches[i].pageY);\r\n        updatePointerMoveData(pointer, posX, posY);\r\n    }\r\n}, false);\r\nwindow.addEventListener('touchend', e => {\r\n    const touches = e.changedTouches;\r\n    for (let i = 0; i < touches.length; i++) {\r\n        let pointer = pointers.find(p => p.id == touches[i].identifier);\r\n        if (pointer == null)\r\n            continue;\r\n        updatePointerUpData(pointer);\r\n    }\r\n});\r\nwindow.addEventListener('keydown', e => {\r\n    if (e.code === 'KeyP')\r\n        config.PAUSED = !config.PAUSED;\r\n    if (e.key === ' ')\r\n        splatStack.push(safeParseInt(Math.random() * 20) + 5);\r\n    if (e.key === 'a')\r\n        multipleSplatsA();\r\n    if (e.key === 's')\r\n        multipleSplatsS();\r\n    if (e.key === 'd')\r\n        multipleSplatsD();\r\n    if (e.key === 'f')\r\n        multipleSplatsF();\r\n    if (e.key === 'g')\r\n        multipleSplatsG();\r\n    if (e.key === 'j')\r\n        multipleSplatsJ();\r\n});\r\nfunction multipleSplatsA() {\r\n    for (let i = 0; i < 3 /*amount*/; i++) {\r\n        const color = generateColor();\r\n        color.r = 0.5; //*= 10.0;\r\n        color.g = 0.5; //*= 10.0;\r\n        color.b = 0.5; //*= 10.0;\r\n        const x = 0.3 * i + 0.2;\r\n        const y = 0.2;\r\n        const dx = 0; //1000 * (Math.random() - 0.5);\r\n        const dy = 5000; //1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color, 2.1);\r\n    }\r\n}\r\nfunction multipleSplatsS() {\r\n    for (let i = 0; i < 3 /*amount*/; i++) {\r\n        const color = generateColor();\r\n        color.r *= 5.0;\r\n        color.g *= 5.0;\r\n        color.b *= 5.0;\r\n        const x = 0.3 * i + 0.2;\r\n        const y = 0.8;\r\n        const dx = 0; //1000 * (Math.random() - 0.5);\r\n        const dy = -5000; //1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color);\r\n    }\r\n    for (let i = 0; i < 3 /*amount*/; i++) {\r\n        const color = generateColor();\r\n        color.r *= 5.0;\r\n        color.g *= 5.0;\r\n        color.b *= 5.0;\r\n        const x = 0.3 * i + 0.2;\r\n        const y = 0.95;\r\n        const dx = 0; //1000 * (Math.random() - 0.5);\r\n        const dy = -5000; //1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color);\r\n    }\r\n}\r\nfunction multipleSplatsD() {\r\n    for (let i = 0; i < 3 /*amount*/; i++) {\r\n        const color = generateColor();\r\n        color.r *= 10.0;\r\n        color.g *= 10.0;\r\n        color.b *= 10.0;\r\n        const x = 0.2;\r\n        const y = -0.3 * i + 0.8;\r\n        const dx = 5000; //1000 * (Math.random() - 0.5);\r\n        const dy = 0; //1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color);\r\n    }\r\n}\r\nfunction multipleSplatsF() {\r\n    for (let i = 0; i < 3 /*amount*/; i++) {\r\n        const color = generateColor();\r\n        color.r *= 10.0;\r\n        color.g *= 10.0;\r\n        color.b *= 10.0;\r\n        const x = 0.8;\r\n        const y = 0.3 * i + 0.2;\r\n        const dx = -5000; //1000 * (Math.random() - 0.5);\r\n        const dy = 0; //1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color);\r\n    }\r\n}\r\nfunction multipleSplatsG() {\r\n    for (let i = 0; i < 3 /*amount*/; i++) {\r\n        const color = generateColor();\r\n        color.r *= 15.0;\r\n        color.g *= 15.0;\r\n        color.b *= 15.0;\r\n        const x = 0.3 * i + 0.2;\r\n        const y = 0.8;\r\n        const dx = 0; //1000 * (Math.random() - 0.5);\r\n        const dy = -5000; //1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color);\r\n    }\r\n    for (let i = 0; i < 3 /*amount*/; i++) {\r\n        const color = generateColor();\r\n        color.r *= 15.0;\r\n        color.g *= 15.0;\r\n        color.b *= 15.0;\r\n        const x = 0.3 * i + 0.22;\r\n        const y = 0.85;\r\n        const dx = 0; //1000 * (Math.random() - 0.5);\r\n        const dy = -5000; //1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color);\r\n    }\r\n    for (let i = 0; i < 2 /*amount*/; i++) {\r\n        const color = generateColor();\r\n        color.r *= 0.0;\r\n        color.g *= 0.0;\r\n        color.b *= 0.0;\r\n        const x = 0.3 * i + 0.35;\r\n        const y = 0.15;\r\n        const dx = 0; //1000 * (Math.random() - 0.5);\r\n        const dy = 5000; //1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color);\r\n    }\r\n}\r\nfunction multipleSplatsJ() {\r\n    let amount = 10;\r\n    let step = Math.PI * 2 / amount;\r\n    for (let i = 0; i < amount; i++) {\r\n        const color = generateColor();\r\n        color.r *= 10.0;\r\n        color.g *= 10.0;\r\n        color.b *= 10.0;\r\n        const x = 0.5 + (0.1 * Math.sin(step * i)) * (canvas.height / canvas.width);\r\n        const y = 0.5 + 0.1 * Math.cos(step * i);\r\n        const dx = 3000 * Math.sin(step * i); //1000 * (Math.random() - 0.5);\r\n        const dy = 3000 * Math.cos(step * i); //1000 * (Math.random() - 0.5);\r\n        splat(x, y, dx, dy, color, 0.01);\r\n    }\r\n}\r\nfunction updatePointerDownData(pointer, id, posX, posY) {\r\n    pointer.id = id;\r\n    pointer.down = true;\r\n    pointer.moved = false;\r\n    pointer.texcoordX = posX / canvas.width;\r\n    pointer.texcoordY = 1.0 - posY / canvas.height;\r\n    pointer.prevTexcoordX = pointer.texcoordX;\r\n    pointer.prevTexcoordY = pointer.texcoordY;\r\n    pointer.deltaX = 0;\r\n    pointer.deltaY = 0;\r\n    pointer.colorUpdates = 0;\r\n    if (!config.RANDOM_COLOR) {\r\n        pointer.color = muteUIColor(config.SPLAT_COLOR);\r\n    }\r\n    else {\r\n        pointer.color = generateColor();\r\n    }\r\n}\r\nfunction updatePointerMoveData(pointer, posX, posY) {\r\n    pointer.prevTexcoordX = pointer.texcoordX;\r\n    pointer.prevTexcoordY = pointer.texcoordY;\r\n    pointer.texcoordX = posX / canvas.width;\r\n    pointer.texcoordY = 1.0 - posY / canvas.height;\r\n    pointer.deltaX = correctDeltaX(pointer.texcoordX - pointer.prevTexcoordX);\r\n    pointer.deltaY = correctDeltaY(pointer.texcoordY - pointer.prevTexcoordY);\r\n    pointer.moved = Math.abs(pointer.deltaX) > 0 || Math.abs(pointer.deltaY) > 0;\r\n}\r\nfunction updatePointerUpData(pointer) {\r\n    pointer.down = false;\r\n}\r\nfunction correctDeltaX(delta) {\r\n    let aspectRatio = canvas.width / canvas.height;\r\n    if (aspectRatio < 1)\r\n        delta *= aspectRatio;\r\n    return delta;\r\n}\r\nfunction correctDeltaY(delta) {\r\n    let aspectRatio = canvas.width / canvas.height;\r\n    if (aspectRatio > 1)\r\n        delta /= aspectRatio;\r\n    return delta;\r\n}\r\nfunction generateColor() {\r\n    let c = HSVtoRGB(Math.random(), 1.0, 1.0);\r\n    c.r *= 0.15;\r\n    c.g *= 0.15;\r\n    c.b *= 0.15;\r\n    return c;\r\n}\r\nfunction HSVtoRGB(h, s, v) {\r\n    let r = 0, g = 0, b = 0, i = 0, f = 0, p = 0, q = 0, t = 0;\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n        case 0:\r\n            ;\r\n            (r = v), (g = t), (b = p);\r\n            break;\r\n        case 1:\r\n            ;\r\n            (r = q), (g = v), (b = p);\r\n            break;\r\n        case 2:\r\n            ;\r\n            (r = p), (g = v), (b = t);\r\n            break;\r\n        case 3:\r\n            ;\r\n            (r = p), (g = q), (b = v);\r\n            break;\r\n        case 4:\r\n            ;\r\n            (r = t), (g = p), (b = v);\r\n            break;\r\n        case 5:\r\n            ;\r\n            (r = v), (g = p), (b = q);\r\n            break;\r\n    }\r\n    return {\r\n        r,\r\n        g,\r\n        b,\r\n    };\r\n}\r\nfunction normalizeColor(input) {\r\n    let output = {\r\n        r: input.r / 255,\r\n        g: input.g / 255,\r\n        b: input.b / 255,\r\n    };\r\n    return output;\r\n}\r\nfunction tfColor(input, tf) {\r\n    let output = {\r\n        r: tf(input.r),\r\n        g: tf(input.g),\r\n        b: tf(input.b),\r\n    };\r\n    return output;\r\n}\r\nconst muteUIColor = (color) => tfColor(color, x => x / 270 + 0.05);\r\nfunction wrap(value, min, max) {\r\n    let range = max - min;\r\n    if (range == 0)\r\n        return min;\r\n    return ((value - min) % range) + min;\r\n}\r\nfunction getResolution(resolution) {\r\n    let aspectRatio = gl.drawingBufferWidth / gl.drawingBufferHeight;\r\n    if (aspectRatio < 1)\r\n        aspectRatio = 1.0 / aspectRatio;\r\n    let min = Math.round(resolution);\r\n    let max = Math.round(resolution * aspectRatio);\r\n    if (gl.drawingBufferWidth > gl.drawingBufferHeight)\r\n        return { width: max, height: min };\r\n    else\r\n        return { width: min, height: max };\r\n}\r\nfunction getTextureScale(texture, width, height) {\r\n    return {\r\n        x: width / texture.width,\r\n        y: height / texture.height,\r\n    };\r\n}\r\nfunction scaleByPixelRatio(input) {\r\n    let pixelRatio = window.devicePixelRatio || 1;\r\n    return Math.floor(input * pixelRatio);\r\n}\r\nfunction hashCode(s) {\r\n    if (s.length == 0)\r\n        return 0;\r\n    let hash = 0;\r\n    for (let i = 0; i < s.length; i++) {\r\n        hash = (hash << 5) - hash + s.charCodeAt(i);\r\n        hash |= 0; // Convert to 32bit integer\r\n    }\r\n    return hash;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zY3JpcHQudHM/NThhNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5NSVQgTGljZW5zZVxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE3IFBhdmVsIERvYnJ5YWtvdlxyXG5UeXBlc2NyaXB0IGZvcmsgKGMpIDIwMjAgSmFrZSBUZXRvbi1MYW5kaXNcclxuXHJcblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxyXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXHJcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXHJcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcclxuY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXHJcblNPRlRXQVJFLlxyXG4qL1xyXG5cclxuZGVjbGFyZSBjb25zdCBkYXQ6IHR5cGVvZiBpbXBvcnQoJ2RhdC5ndWknKVxyXG5pbXBvcnQgeyBTb25nUGxheWVyIH0gZnJvbSAnLi9hdWRpbydcclxuXHJcbmZ1bmN0aW9uIHNhZmVQYXJzZUludCh4OiBudW1iZXIpIHtcclxuICByZXR1cm4gcGFyc2VJbnQoeC50b1N0cmluZygpKVxyXG59XHJcblxyXG5mdW5jdGlvbiBub3ROdWxsPFQ+KHZhbHVlOiBULCBtc2c/OiBzdHJpbmcpOiBOb25OdWxsYWJsZTxUPiB7XHJcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ3ZhbHVlIHVuZXhwZWN0ZWRseSBudWxsJylcclxuICB9XHJcbiAgcmV0dXJuIHZhbHVlIGFzIGFueSAvLyBUT0RPXHJcbn1cclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjYW52YXMnKVswXVxyXG5yZXNpemVDYW52YXMoKVxyXG5cclxudmFyIHNvbmdQbGF5ZXIgPSBuZXcgU29uZ1BsYXllcigpXHJcbiAgLy8gRXhwb3NlIGZvciBkZWJ1Z2dpbmcgc2luY2Ugb3VyIGdsb2JhbHMgYXJlIG5vdyBoaWRkZW4gYnkgV2VicGFjaydzIG1vZHVsZSB3cmFwcGVyXHJcbiAgLy8gZnJvbSBhcHBlYXJpbmcgb24gdGhlIHdpbmRvdy5cclxuOyh3aW5kb3cgYXMgYW55KS5zb25nUGxheWVyID0gc29uZ1BsYXllclxyXG5cclxuY29uc3QgU2hvcnRjdXRzID0ge1xyXG4gIEJsYWNrOiB7IHI6IDAsIGc6IDAsIGI6IDAgfSxcclxuICBSZWQ6IHsgcjogMjQ1LCBnOiAwLCBiOiAwIH0sXHJcbiAgTm90aW9uTWFya2V0aW5nQmFja2dyb3VuZDogeyByOiAyNTUsIGc6IDI1NCwgYjogMjUyIH0sXHJcbiAgRmxvYXRTb25nOiAnaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9jb2x0b25nb3JnL2Zsb2F0aW5nJyxcclxuICBTaW1vblNvbmc6ICdodHRwczovL3NvdW5kY2xvdWQuY29tL3NpbW9ubGFzdC9zZXNzaW9uXzc0JyxcclxufVxyXG5cclxuZnVuY3Rpb24gZHVwPFQ+KHZhbDogVCk6IFQge1xyXG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbCkpXHJcbn1cclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICBTSU1fUkVTT0xVVElPTjogMjU2LFxyXG4gIERZRV9SRVNPTFVUSU9OOiAxMDI0LFxyXG4gIENBUFRVUkVfUkVTT0xVVElPTjogNTEyLFxyXG4gIERFTlNJVFlfRElTU0lQQVRJT046IDEsXHJcbiAgVkVMT0NJVFlfRElTU0lQQVRJT046IDAuMixcclxuICBQUkVTU1VSRTogMC44LFxyXG4gIFBSRVNTVVJFX0lURVJBVElPTlM6IDIwLFxyXG4gIENVUkw6IDgsXHJcbiAgU1BMQVRfUkFESVVTOiAwLjI1LFxyXG4gIFNQTEFUX0ZPUkNFOiA2MDAwLFxyXG4gIFNIQURJTkc6IHRydWUsXHJcbiAgU1BMQVRfQ09MT1I6IGR1cChTaG9ydGN1dHMuUmVkKSxcclxuICBSQU5ET01fQ09MT1I6IHRydWUsXHJcbiAgQ09MT1JGVUw6IHRydWUsXHJcbiAgQ09MT1JfVVBEQVRFX1NQRUVEOiAxMCxcclxuICBQQVVTRUQ6IGZhbHNlLFxyXG4gIEJBQ0tfQ09MT1I6IGR1cChTaG9ydGN1dHMuQmxhY2spLFxyXG4gIFRSQU5TUEFSRU5UOiBmYWxzZSxcclxuICBCTE9PTTogZmFsc2UsIC8vIFRSVUVcclxuICBCTE9PTV9JVEVSQVRJT05TOiA4LFxyXG4gIEJMT09NX1JFU09MVVRJT046IDI1NixcclxuICBCTE9PTV9JTlRFTlNJVFk6IDAuOCxcclxuICBCTE9PTV9USFJFU0hPTEQ6IDAuNixcclxuICBCTE9PTV9TT0ZUX0tORUU6IDAuNyxcclxuICBTVU5SQVlTOiB0cnVlLFxyXG4gIFNVTlJBWVNfUkVTT0xVVElPTjogMTk2LFxyXG4gIFNVTlJBWVNfV0VJR0hUOiAxLjAsXHJcbn1cclxuXHJcbmNsYXNzIFBvaW50ZXIge1xyXG4gIGlkID0gLTFcclxuICB0ZXhjb29yZFggPSAwXHJcbiAgdGV4Y29vcmRZID0gMFxyXG4gIHByZXZUZXhjb29yZFggPSAwXHJcbiAgcHJldlRleGNvb3JkWSA9IDBcclxuICBkZWx0YVggPSAwXHJcbiAgZGVsdGFZID0gMFxyXG4gIGRvd24gPSBmYWxzZVxyXG4gIG1vdmVkID0gZmFsc2VcclxuICBjb2xvcjogQ29sb3IgPSB7IHI6IDAsIGc6IDAsIGI6IDAgfVxyXG4gIGNvbG9yVXBkYXRlcyA9IDBcclxufVxyXG5cclxubGV0IHBvaW50ZXJzOiBQb2ludGVyW10gPSBbXVxyXG5sZXQgc3BsYXRTdGFjazogbnVtYmVyW10gPSBbXVxyXG5wb2ludGVycy5wdXNoKG5ldyBQb2ludGVyKCkpXHJcblxyXG5jb25zdCB7IGdsLCBleHQgfSA9IGdldFdlYkdMQ29udGV4dChjYW52YXMpXHJcblxyXG5pZiAoaXNNb2JpbGUoKSkge1xyXG4gIGNvbmZpZy5EWUVfUkVTT0xVVElPTiA9IDUxMlxyXG59XHJcbmlmICghZXh0LnN1cHBvcnRMaW5lYXJGaWx0ZXJpbmcpIHtcclxuICBjb25maWcuRFlFX1JFU09MVVRJT04gPSA1MTJcclxuICBjb25maWcuU0hBRElORyA9IGZhbHNlXHJcbiAgY29uZmlnLkJMT09NID0gZmFsc2VcclxuICBjb25maWcuU1VOUkFZUyA9IGZhbHNlXHJcbn1cclxuXHJcbnN0YXJ0R1VJKClcclxuXHJcbnR5cGUgR0xUeXBlID0gV2ViR0wyUmVuZGVyaW5nQ29udGV4dCAmIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxyXG5cclxuZnVuY3Rpb24gZ2V0V2ViR0xDb250ZXh0KGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICBjb25zdCBwYXJhbXM6IFdlYkdMQ29udGV4dEF0dHJpYnV0ZXMgPSB7XHJcbiAgICBhbHBoYTogdHJ1ZSxcclxuICAgIGRlcHRoOiBmYWxzZSxcclxuICAgIHN0ZW5jaWw6IGZhbHNlLFxyXG4gICAgYW50aWFsaWFzOiBmYWxzZSxcclxuICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogZmFsc2UsXHJcbiAgfVxyXG5cclxuICBjb25zdCBnbDIgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wyJywgcGFyYW1zKVxyXG4gIGNvbnN0IGdsOiBHTFR5cGUgPVxyXG4gICAgZ2wyIHx8XHJcbiAgICBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCBwYXJhbXMpIHx8XHJcbiAgICAoY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcsIHBhcmFtcykgYXMgYW55KVxyXG4gIGNvbnN0IGlzV2ViR0wyID0gISFnbDJcclxuXHJcbiAgbGV0IGhhbGZGbG9hdDogT0VTX3RleHR1cmVfaGFsZl9mbG9hdCA9IHVuZGVmaW5lZCBhcyBhbnlcclxuICBsZXQgc3VwcG9ydExpbmVhckZpbHRlcmluZzogT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyIHwgT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcclxuICBpZiAoaXNXZWJHTDIpIHtcclxuICAgIGdsLmdldEV4dGVuc2lvbignRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdCcpXHJcbiAgICBzdXBwb3J0TGluZWFyRmlsdGVyaW5nID0gZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInKSFcclxuICB9IGVsc2Uge1xyXG4gICAgaGFsZkZsb2F0ID0gZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0JykhXHJcbiAgICBzdXBwb3J0TGluZWFyRmlsdGVyaW5nID0gZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicpIVxyXG4gIH1cclxuXHJcbiAgZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAxLjApXHJcblxyXG4gIGNvbnN0IGhhbGZGbG9hdFRleFR5cGUgPSBpc1dlYkdMMiA/IGdsLkhBTEZfRkxPQVQgOiBoYWxmRmxvYXQuSEFMRl9GTE9BVF9PRVNcclxuICBsZXQgZm9ybWF0UkdCQTogUmV0dXJuVHlwZTx0eXBlb2YgZ2V0U3VwcG9ydGVkRm9ybWF0PlxyXG4gIGxldCBmb3JtYXRSRzogUmV0dXJuVHlwZTx0eXBlb2YgZ2V0U3VwcG9ydGVkRm9ybWF0PlxyXG4gIGxldCBmb3JtYXRSOiBSZXR1cm5UeXBlPHR5cGVvZiBnZXRTdXBwb3J0ZWRGb3JtYXQ+XHJcblxyXG4gIGlmIChpc1dlYkdMMikge1xyXG4gICAgZm9ybWF0UkdCQSA9IGdldFN1cHBvcnRlZEZvcm1hdChnbCwgZ2wuUkdCQTE2RiwgZ2wuUkdCQSwgaGFsZkZsb2F0VGV4VHlwZSlcclxuICAgIGZvcm1hdFJHID0gZ2V0U3VwcG9ydGVkRm9ybWF0KGdsLCBnbC5SRzE2RiwgZ2wuUkcsIGhhbGZGbG9hdFRleFR5cGUpXHJcbiAgICBmb3JtYXRSID0gZ2V0U3VwcG9ydGVkRm9ybWF0KGdsLCBnbC5SMTZGLCBnbC5SRUQsIGhhbGZGbG9hdFRleFR5cGUpXHJcbiAgfSBlbHNlIHtcclxuICAgIGZvcm1hdFJHQkEgPSBnZXRTdXBwb3J0ZWRGb3JtYXQoZ2wsIGdsLlJHQkEsIGdsLlJHQkEsIGhhbGZGbG9hdFRleFR5cGUpXHJcbiAgICBmb3JtYXRSRyA9IGdldFN1cHBvcnRlZEZvcm1hdChnbCwgZ2wuUkdCQSwgZ2wuUkdCQSwgaGFsZkZsb2F0VGV4VHlwZSlcclxuICAgIGZvcm1hdFIgPSBnZXRTdXBwb3J0ZWRGb3JtYXQoZ2wsIGdsLlJHQkEsIGdsLlJHQkEsIGhhbGZGbG9hdFRleFR5cGUpXHJcbiAgfVxyXG5cclxuICAvLyBBc3N1bWVzIGdsb2JhbCBHb29nbGUgQW5hbHl0aWNzLCBkaXNhYmxlZC5cclxuICAvL2dhKCdzZW5kJywgJ2V2ZW50JywgaXNXZWJHTDIgPyAnd2ViZ2wyJyA6ICd3ZWJnbCcsIGZvcm1hdFJHQkEgPT0gbnVsbCA/ICdub3Qgc3VwcG9ydGVkJyA6ICdzdXBwb3J0ZWQnKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdsLFxyXG4gICAgZXh0OiB7XHJcbiAgICAgIGZvcm1hdFJHQkEsXHJcbiAgICAgIGZvcm1hdFJHLFxyXG4gICAgICBmb3JtYXRSLFxyXG4gICAgICBoYWxmRmxvYXRUZXhUeXBlLFxyXG4gICAgICBzdXBwb3J0TGluZWFyRmlsdGVyaW5nLFxyXG4gICAgfSxcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFN1cHBvcnRlZEZvcm1hdChcclxuICBnbDogR0xUeXBlLFxyXG4gIGludGVybmFsRm9ybWF0OiBudW1iZXIsXHJcbiAgZm9ybWF0OiBudW1iZXIsXHJcbiAgdHlwZTogbnVtYmVyXHJcbik6IHsgaW50ZXJuYWxGb3JtYXQ6IG51bWJlcjsgZm9ybWF0OiBudW1iZXIgfSB7XHJcbiAgLyoqIFRPRE86IHwgbnVsbCAqL1xyXG4gIGlmICghc3VwcG9ydFJlbmRlclRleHR1cmVGb3JtYXQoZ2wsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUpKSB7XHJcbiAgICBzd2l0Y2ggKGludGVybmFsRm9ybWF0KSB7XHJcbiAgICAgIGNhc2UgZ2wuUjE2RjpcclxuICAgICAgICByZXR1cm4gZ2V0U3VwcG9ydGVkRm9ybWF0KGdsLCBnbC5SRzE2RiwgZ2wuUkcsIHR5cGUpXHJcbiAgICAgIGNhc2UgZ2wuUkcxNkY6XHJcbiAgICAgICAgcmV0dXJuIGdldFN1cHBvcnRlZEZvcm1hdChnbCwgZ2wuUkdCQTE2RiwgZ2wuUkdCQSwgdHlwZSlcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gbnVsbCBhcyBhbnkgLy8gVE9ET1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGludGVybmFsRm9ybWF0LFxyXG4gICAgZm9ybWF0LFxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc3VwcG9ydFJlbmRlclRleHR1cmVGb3JtYXQoXHJcbiAgZ2w6IEdMVHlwZSxcclxuICBpbnRlcm5hbEZvcm1hdDogbnVtYmVyLFxyXG4gIGZvcm1hdDogbnVtYmVyLFxyXG4gIHR5cGU6IG51bWJlclxyXG4pIHtcclxuICBsZXQgdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKVxyXG4gIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUpXHJcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpXHJcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpXHJcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSlcclxuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKVxyXG4gIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgaW50ZXJuYWxGb3JtYXQsIDQsIDQsIDAsIGZvcm1hdCwgdHlwZSwgbnVsbClcclxuXHJcbiAgbGV0IGZibyA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKClcclxuICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZibylcclxuICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHRleHR1cmUsIDApXHJcblxyXG4gIGNvbnN0IHN0YXR1cyA9IGdsLmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoZ2wuRlJBTUVCVUZGRVIpXHJcbiAgcmV0dXJuIHN0YXR1cyA9PSBnbC5GUkFNRUJVRkZFUl9DT01QTEVURVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydEdVSSgpIHtcclxuICB2YXIgZ3VpID0gbmV3IGRhdC5HVUkoeyB3aWR0aDogMzAwIH0pXHJcbiAgZ3VpXHJcbiAgICAuYWRkKGNvbmZpZywgJ0RZRV9SRVNPTFVUSU9OJywge1xyXG4gICAgICB1bHRyYTogMjA0OCxcclxuICAgICAgaGlnaDogMTAyNCxcclxuICAgICAgbWVkaXVtOiA1MTIsXHJcbiAgICAgIGxvdzogMjU2LFxyXG4gICAgICAndmVyeSBsb3cnOiAxMjgsXHJcbiAgICB9KVxyXG4gICAgLm5hbWUoJ3F1YWxpdHknKVxyXG4gICAgLm9uRmluaXNoQ2hhbmdlKGluaXRGcmFtZWJ1ZmZlcnMpXHJcbiAgZ3VpXHJcbiAgICAuYWRkKGNvbmZpZywgJ1NJTV9SRVNPTFVUSU9OJywgeyAnMzInOiAzMiwgJzY0JzogNjQsICcxMjgnOiAxMjgsICcyNTYnOiAyNTYsICc1MTInOiA1MTIgfSlcclxuICAgIC5uYW1lKCdzaW0gcmVzb2x1dGlvbicpXHJcbiAgICAub25GaW5pc2hDaGFuZ2UoaW5pdEZyYW1lYnVmZmVycylcclxuICBndWkuYWRkKGNvbmZpZywgJ0RFTlNJVFlfRElTU0lQQVRJT04nLCAwLCA0LjApLm5hbWUoJ2RlbnNpdHkgZGlmZnVzaW9uJylcclxuICBndWkuYWRkKGNvbmZpZywgJ1ZFTE9DSVRZX0RJU1NJUEFUSU9OJywgMCwgNC4wKS5uYW1lKCd2ZWxvY2l0eSBkaWZmdXNpb24nKVxyXG4gIGd1aS5hZGQoY29uZmlnLCAnUFJFU1NVUkUnLCAwLjAsIDEuMCkubmFtZSgncHJlc3N1cmUnKVxyXG4gIGd1aVxyXG4gICAgLmFkZChjb25maWcsICdDVVJMJywgMCwgNTApXHJcbiAgICAubmFtZSgndm9ydGljaXR5JylcclxuICAgIC5zdGVwKDEpXHJcbiAgZ3VpLmFkZChjb25maWcsICdTUExBVF9SQURJVVMnLCAwLjAxLCAxLjApLm5hbWUoJ3NwbGF0IHJhZGl1cycpXHJcbiAgZ3VpXHJcbiAgICAuYWRkKGNvbmZpZywgJ1NIQURJTkcnKVxyXG4gICAgLm5hbWUoJ3NoYWRpbmcnKVxyXG4gICAgLm9uRmluaXNoQ2hhbmdlKHVwZGF0ZUtleXdvcmRzKVxyXG4gIGd1aS5hZGRDb2xvcihjb25maWcsICdTUExBVF9DT0xPUicpLm5hbWUoJ1NwbGF0IGNvbG9yJylcclxuICBndWkuYWRkKGNvbmZpZywgJ1JBTkRPTV9DT0xPUicpLm5hbWUoJ1VzZSByYW5kb20gY29sb3InKVxyXG4gIGd1aS5hZGQoY29uZmlnLCAnQ09MT1JGVUwnKS5uYW1lKCdQYWludCB0aGUgcmFpbmJvdycpXHJcbiAgZ3VpXHJcbiAgICAuYWRkKGNvbmZpZywgJ1BBVVNFRCcpXHJcbiAgICAubmFtZSgncGF1c2VkJylcclxuICAgIC5saXN0ZW4oKVxyXG5cclxuICBndWlcclxuICAgIC5hZGQoXHJcbiAgICAgIHtcclxuICAgICAgICBmdW46ICgpID0+IHtcclxuICAgICAgICAgIHNwbGF0U3RhY2sucHVzaChzYWZlUGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIDIwKSArIDUpXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgJ2Z1bidcclxuICAgIClcclxuICAgIC5uYW1lKCdSYW5kb20gc3BsYXRzJylcclxuXHJcbiAgZ3VpXHJcbiAgICAuYWRkKFxyXG4gICAgICB7XHJcbiAgICAgICAgZnVuOiAoKSA9PiB7XHJcbiAgICAgICAgICBzb25nUGxheWVyLnNldFNvdW5kY2xvdWRVcmwoU2hvcnRjdXRzLlNpbW9uU29uZylcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICAnZnVuJ1xyXG4gICAgKVxyXG4gICAgLm5hbWUoJ1BsYXkgU291bmRjbG91ZCBWaXN1YWxpemVyIChXSVApJylcclxuXHJcbiAgbGV0IGJsb29tRm9sZGVyID0gZ3VpLmFkZEZvbGRlcignQmxvb20nKVxyXG4gIGJsb29tRm9sZGVyXHJcbiAgICAuYWRkKGNvbmZpZywgJ0JMT09NJylcclxuICAgIC5uYW1lKCdlbmFibGVkJylcclxuICAgIC5vbkZpbmlzaENoYW5nZSh1cGRhdGVLZXl3b3JkcylcclxuICBibG9vbUZvbGRlci5hZGQoY29uZmlnLCAnQkxPT01fSU5URU5TSVRZJywgMC4xLCAyLjApLm5hbWUoJ2ludGVuc2l0eScpXHJcbiAgYmxvb21Gb2xkZXIuYWRkKGNvbmZpZywgJ0JMT09NX1RIUkVTSE9MRCcsIDAuMCwgMS4wKS5uYW1lKCd0aHJlc2hvbGQnKVxyXG5cclxuICBsZXQgc3VucmF5c0ZvbGRlciA9IGd1aS5hZGRGb2xkZXIoJ1N1bnJheXMnKVxyXG4gIHN1bnJheXNGb2xkZXJcclxuICAgIC5hZGQoY29uZmlnLCAnU1VOUkFZUycpXHJcbiAgICAubmFtZSgnZW5hYmxlZCcpXHJcbiAgICAub25GaW5pc2hDaGFuZ2UodXBkYXRlS2V5d29yZHMpXHJcbiAgc3VucmF5c0ZvbGRlci5hZGQoY29uZmlnLCAnU1VOUkFZU19XRUlHSFQnLCAwLjMsIDEuMCkubmFtZSgnd2VpZ2h0JylcclxuXHJcbiAgbGV0IGNhcHR1cmVGb2xkZXIgPSBndWkuYWRkRm9sZGVyKCdDYXB0dXJlJylcclxuICBjYXB0dXJlRm9sZGVyLmFkZENvbG9yKGNvbmZpZywgJ0JBQ0tfQ09MT1InKS5uYW1lKCdiYWNrZ3JvdW5kIGNvbG9yJylcclxuICBjYXB0dXJlRm9sZGVyLmFkZChjb25maWcsICdUUkFOU1BBUkVOVCcpLm5hbWUoJ3RyYW5zcGFyZW50JylcclxuICBjYXB0dXJlRm9sZGVyLmFkZCh7IGZ1bjogY2FwdHVyZVNjcmVlbnNob3QgfSwgJ2Z1bicpLm5hbWUoJ3Rha2Ugc2NyZWVuc2hvdCcpXHJcblxyXG4gIHR5cGUgR1VJQ29udHJvbGxlckxpc3RJdGVtID0gZGF0LkdVSUNvbnRyb2xsZXIgJiB7IF9fbGk6IEhUTUxPTGlzdEVsZW1lbnQgfVxyXG5cclxuICBsZXQgZ2l0aHViID0gZ3VpXHJcbiAgICAuYWRkKFxyXG4gICAgICB7XHJcbiAgICAgICAgZnVuOiAoKSA9PiB7XHJcbiAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly9naXRodWIuY29tL2p1c3RqYWtlL1dlYkdMLUZsdWlkLVNpbXVsYXRpb24nKVxyXG4gICAgICAgICAgLy9nYSgnc2VuZCcsICdldmVudCcsICdsaW5rIGJ1dHRvbicsICdnaXRodWInKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICAnZnVuJ1xyXG4gICAgKVxyXG4gICAgLm5hbWUoJ1R5cGVzY3JpcHQnKSBhcyBHVUlDb250cm9sbGVyTGlzdEl0ZW1cclxuICBnaXRodWIuX19saS5jbGFzc05hbWUgPSAnY3IgZnVuY3Rpb24gYmlnRm9udCdcclxuICBnaXRodWIuX19saS5zdHlsZS5ib3JkZXJMZWZ0ID0gJzNweCBzb2xpZCAjOEM4QzhDJ1xyXG4gIGxldCBnaXRodWJJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXHJcbiAgZ2l0aHViLmRvbUVsZW1lbnQucGFyZW50RWxlbWVudCEuYXBwZW5kQ2hpbGQoZ2l0aHViSWNvbilcclxuICBnaXRodWJJY29uLmNsYXNzTmFtZSA9ICdpY29uIGdpdGh1YidcclxuXHJcbiAgbGV0IG9yaWdpbmFsID0gZ3VpXHJcbiAgICAuYWRkKFxyXG4gICAgICB7XHJcbiAgICAgICAgZnVuOiAoKSA9PiB7XHJcbiAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly9naXRodWIuY29tL1BhdmVsRG9HcmVhdC9XZWJHTC1GbHVpZC1TaW11bGF0aW9uJylcclxuICAgICAgICAgIC8vZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnbGluayBidXR0b24nLCAnZ2l0aHViJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgJ2Z1bidcclxuICAgIClcclxuICAgIC5uYW1lKCdPcmlnaW5hbCcpIGFzIEdVSUNvbnRyb2xsZXJMaXN0SXRlbVxyXG4gIG9yaWdpbmFsLl9fbGkuY2xhc3NOYW1lID0gJ2NyIGZ1bmN0aW9uIGJpZ0ZvbnQnXHJcbiAgb3JpZ2luYWwuX19saS5zdHlsZS5ib3JkZXJMZWZ0ID0gJzNweCBzb2xpZCAjOEM4QzhDJ1xyXG4gIGxldCBvcmlnaW5hbEdpdGh1Ykljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcclxuICBvcmlnaW5hbC5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQhLmFwcGVuZENoaWxkKG9yaWdpbmFsR2l0aHViSWNvbilcclxuICBvcmlnaW5hbEdpdGh1Ykljb24uY2xhc3NOYW1lID0gJ2ljb24gZ2l0aHViJ1xyXG5cclxuICBpZiAoaXNNb2JpbGUoKSkgZ3VpLmNsb3NlKClcclxufVxyXG5cclxuZnVuY3Rpb24gaXNNb2JpbGUoKSB7XHJcbiAgcmV0dXJuIC9Nb2JpfEFuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhcHR1cmVTY3JlZW5zaG90KCkge1xyXG4gIGxldCByZXMgPSBnZXRSZXNvbHV0aW9uKGNvbmZpZy5DQVBUVVJFX1JFU09MVVRJT04pXHJcbiAgbGV0IHRhcmdldCA9IGNyZWF0ZUZCTyhcclxuICAgIHJlcy53aWR0aCxcclxuICAgIHJlcy5oZWlnaHQsXHJcbiAgICBleHQuZm9ybWF0UkdCQS5pbnRlcm5hbEZvcm1hdCxcclxuICAgIGV4dC5mb3JtYXRSR0JBLmZvcm1hdCxcclxuICAgIGV4dC5oYWxmRmxvYXRUZXhUeXBlLFxyXG4gICAgZ2wuTkVBUkVTVFxyXG4gIClcclxuICByZW5kZXIodGFyZ2V0KVxyXG5cclxuICBsZXQgdGV4dHVyZTogVWludDhBcnJheSB8IEZsb2F0MzJBcnJheSA9IGZyYW1lYnVmZmVyVG9UZXh0dXJlKHRhcmdldClcclxuICB0ZXh0dXJlID0gbm9ybWFsaXplVGV4dHVyZSh0ZXh0dXJlLCB0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHQpXHJcblxyXG4gIGxldCBjYXB0dXJlQ2FudmFzID0gdGV4dHVyZVRvQ2FudmFzKHRleHR1cmUsIHRhcmdldC53aWR0aCwgdGFyZ2V0LmhlaWdodClcclxuICBsZXQgZGF0YXVyaSA9IGNhcHR1cmVDYW52YXMudG9EYXRhVVJMKClcclxuICBkb3dubG9hZFVSSSgnZmx1aWQucG5nJywgZGF0YXVyaSlcclxuICBVUkwucmV2b2tlT2JqZWN0VVJMKGRhdGF1cmkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZyYW1lYnVmZmVyVG9UZXh0dXJlKHRhcmdldDogRkJPKSB7XHJcbiAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0YXJnZXQuZmJvKVxyXG4gIGxldCBsZW5ndGggPSB0YXJnZXQud2lkdGggKiB0YXJnZXQuaGVpZ2h0ICogNFxyXG4gIGxldCB0ZXh0dXJlID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpXHJcbiAgZ2wucmVhZFBpeGVscygwLCAwLCB0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHQsIGdsLlJHQkEsIGdsLkZMT0FULCB0ZXh0dXJlKVxyXG4gIHJldHVybiB0ZXh0dXJlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVRleHR1cmUodGV4dHVyZTogRmxvYXQzMkFycmF5LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gIGxldCByZXN1bHQgPSBuZXcgVWludDhBcnJheSh0ZXh0dXJlLmxlbmd0aClcclxuICBsZXQgaWQgPSAwXHJcbiAgZm9yIChsZXQgaSA9IGhlaWdodCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHdpZHRoOyBqKyspIHtcclxuICAgICAgbGV0IG5pZCA9IGkgKiB3aWR0aCAqIDQgKyBqICogNFxyXG4gICAgICByZXN1bHRbbmlkICsgMF0gPSBjbGFtcDAxKHRleHR1cmVbaWQgKyAwXSkgKiAyNTVcclxuICAgICAgcmVzdWx0W25pZCArIDFdID0gY2xhbXAwMSh0ZXh0dXJlW2lkICsgMV0pICogMjU1XHJcbiAgICAgIHJlc3VsdFtuaWQgKyAyXSA9IGNsYW1wMDEodGV4dHVyZVtpZCArIDJdKSAqIDI1NVxyXG4gICAgICByZXN1bHRbbmlkICsgM10gPSBjbGFtcDAxKHRleHR1cmVbaWQgKyAzXSkgKiAyNTVcclxuICAgICAgaWQgKz0gNFxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsYW1wMDEoaW5wdXQ6IG51bWJlcikge1xyXG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChpbnB1dCwgMCksIDEpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRleHR1cmVUb0NhbnZhcyh0ZXh0dXJlOiBVaW50OEFycmF5LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gIGxldCBjYXB0dXJlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcclxuICBsZXQgY3R4ID0gbm90TnVsbChjYXB0dXJlQ2FudmFzLmdldENvbnRleHQoJzJkJyksICdjYW52YXMuZ2V0Q29udGV4dCgyZCknKVxyXG4gIGNhcHR1cmVDYW52YXMud2lkdGggPSB3aWR0aFxyXG4gIGNhcHR1cmVDYW52YXMuaGVpZ2h0ID0gaGVpZ2h0XHJcblxyXG4gIGxldCBpbWFnZURhdGEgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBoZWlnaHQpXHJcbiAgaW1hZ2VEYXRhLmRhdGEuc2V0KHRleHR1cmUpXHJcbiAgY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApXHJcblxyXG4gIHJldHVybiBjYXB0dXJlQ2FudmFzXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRvd25sb2FkVVJJKGZpbGVuYW1lOiBzdHJpbmcsIHVyaTogc3RyaW5nKSB7XHJcbiAgbGV0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICBsaW5rLmRvd25sb2FkID0gZmlsZW5hbWVcclxuICBsaW5rLmhyZWYgPSB1cmlcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspXHJcbiAgbGluay5jbGljaygpXHJcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKVxyXG59XHJcblxyXG5jbGFzcyBNYXRlcmlhbCB7XHJcbiAgcHJvZ3JhbXM6IFdlYkdMUHJvZ3JhbVtdID0gW11cclxuICBhY3RpdmVQcm9ncmFtOiBXZWJHTFByb2dyYW0gfCBudWxsID0gbnVsbFxyXG4gIHVuaWZvcm1zOiBVbmlmb3JtcyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB2ZXJ0ZXhTaGFkZXI6IFdlYkdMU2hhZGVyLCBwdWJsaWMgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IHN0cmluZykge31cclxuXHJcbiAgc2V0S2V5d29yZHMoa2V5d29yZHM6IHN0cmluZ1tdKSB7XHJcbiAgICBsZXQgaGFzaCA9IDBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5d29yZHMubGVuZ3RoOyBpKyspIGhhc2ggKz0gaGFzaENvZGUoa2V5d29yZHNbaV0pXHJcblxyXG4gICAgbGV0IHByb2dyYW06IFdlYkdMUHJvZ3JhbSB8IG51bGwgPSB0aGlzLnByb2dyYW1zW2hhc2hdXHJcbiAgICBpZiAocHJvZ3JhbSA9PSBudWxsKSB7XHJcbiAgICAgIGxldCBmcmFnbWVudFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSLCB0aGlzLmZyYWdtZW50U2hhZGVyU291cmNlLCBrZXl3b3JkcylcclxuICAgICAgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW0odGhpcy52ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKVxyXG4gICAgICB0aGlzLnByb2dyYW1zW2hhc2hdID0gcHJvZ3JhbVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcm9ncmFtID09IHRoaXMuYWN0aXZlUHJvZ3JhbSkgcmV0dXJuXHJcblxyXG4gICAgdGhpcy51bmlmb3JtcyA9IGdldFVuaWZvcm1zKHByb2dyYW0pXHJcbiAgICB0aGlzLmFjdGl2ZVByb2dyYW0gPSBwcm9ncmFtXHJcbiAgfVxyXG5cclxuICBiaW5kKCkge1xyXG4gICAgZ2wudXNlUHJvZ3JhbSh0aGlzLmFjdGl2ZVByb2dyYW0pXHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBQcm9ncmFtIHtcclxuICBwcm9ncmFtOiBXZWJHTFByb2dyYW1cclxuICB1bmlmb3JtczogVW5pZm9ybXNcclxuICBjb25zdHJ1Y3Rvcih2ZXJ0ZXhTaGFkZXI6IFdlYkdMU2hhZGVyLCBmcmFnbWVudFNoYWRlcjogV2ViR0xTaGFkZXIpIHtcclxuICAgIHRoaXMucHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW0odmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlcilcclxuICAgIHRoaXMudW5pZm9ybXMgPSBnZXRVbmlmb3Jtcyh0aGlzLnByb2dyYW0pXHJcbiAgfVxyXG5cclxuICBiaW5kKCkge1xyXG4gICAgZ2wudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQcm9ncmFtKHZlcnRleFNoYWRlcjogV2ViR0xTaGFkZXIsIGZyYWdtZW50U2hhZGVyOiBXZWJHTFNoYWRlcikge1xyXG4gIGxldCBwcm9ncmFtID0gbm90TnVsbChnbC5jcmVhdGVQcm9ncmFtKCkpXHJcbiAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcilcclxuICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpXHJcbiAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSlcclxuXHJcbiAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkgdGhyb3cgZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSlcclxuXHJcbiAgcmV0dXJuIHByb2dyYW1cclxufVxyXG5cclxudHlwZSBVbmlmb3JtcyA9IHsgW2tleTogc3RyaW5nXTogV2ViR0xVbmlmb3JtTG9jYXRpb24gfVxyXG5cclxuZnVuY3Rpb24gZ2V0VW5pZm9ybXMocHJvZ3JhbTogV2ViR0xQcm9ncmFtKSB7XHJcbiAgbGV0IHVuaWZvcm1zOiBVbmlmb3JtcyA9IFtdIGFzIGFueSAvLyBUT0RPIHN3aXRjaCB0byB7fSBpZiBwb3NzaWJsZVxyXG4gIGxldCB1bmlmb3JtQ291bnQgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkFDVElWRV9VTklGT1JNUylcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHVuaWZvcm1Db3VudDsgaSsrKSB7XHJcbiAgICBsZXQgdW5pZm9ybU5hbWUgPSBub3ROdWxsKGdsLmdldEFjdGl2ZVVuaWZvcm0ocHJvZ3JhbSwgaSkpLm5hbWVcclxuICAgIHVuaWZvcm1zW3VuaWZvcm1OYW1lXSA9IG5vdE51bGwoZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHVuaWZvcm1OYW1lKSlcclxuICB9XHJcbiAgcmV0dXJuIHVuaWZvcm1zXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIodHlwZTogbnVtYmVyLCBzb3VyY2U6IHN0cmluZywga2V5d29yZHM/OiBzdHJpbmdbXSkge1xyXG4gIHNvdXJjZSA9IGFkZEtleXdvcmRzKHNvdXJjZSwga2V5d29yZHMpXHJcblxyXG4gIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKVxyXG4gIGlmICghc2hhZGVyKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYGZhaWxlZCB0byBjcmVhdGUgc2hhZGVyIHR5cGUgJHt0eXBlfWApXHJcbiAgfVxyXG4gIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSlcclxuICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcilcclxuXHJcbiAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHRocm93IGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKVxyXG5cclxuICByZXR1cm4gc2hhZGVyXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEtleXdvcmRzKHNvdXJjZTogc3RyaW5nLCBrZXl3b3Jkcz86IHN0cmluZ1tdKSB7XHJcbiAgaWYgKGtleXdvcmRzID09IG51bGwpIHJldHVybiBzb3VyY2VcclxuICBsZXQga2V5d29yZHNTdHJpbmcgPSAnJ1xyXG4gIGtleXdvcmRzLmZvckVhY2goa2V5d29yZCA9PiB7XHJcbiAgICBrZXl3b3Jkc1N0cmluZyArPSAnI2RlZmluZSAnICsga2V5d29yZCArICdcXG4nXHJcbiAgfSlcclxuICByZXR1cm4ga2V5d29yZHNTdHJpbmcgKyBzb3VyY2VcclxufVxyXG5cclxuY29uc3QgYmFzZVZlcnRleFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXHJcbiAgZ2wuVkVSVEVYX1NIQURFUixcclxuICBgXHJcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XHJcblxyXG4gICAgYXR0cmlidXRlIHZlYzIgYVBvc2l0aW9uO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgIHZhcnlpbmcgdmVjMiB2TDtcclxuICAgIHZhcnlpbmcgdmVjMiB2UjtcclxuICAgIHZhcnlpbmcgdmVjMiB2VDtcclxuICAgIHZhcnlpbmcgdmVjMiB2QjtcclxuICAgIHVuaWZvcm0gdmVjMiB0ZXhlbFNpemU7XHJcblxyXG4gICAgdm9pZCBtYWluICgpIHtcclxuICAgICAgICB2VXYgPSBhUG9zaXRpb24gKiAwLjUgKyAwLjU7XHJcbiAgICAgICAgdkwgPSB2VXYgLSB2ZWMyKHRleGVsU2l6ZS54LCAwLjApO1xyXG4gICAgICAgIHZSID0gdlV2ICsgdmVjMih0ZXhlbFNpemUueCwgMC4wKTtcclxuICAgICAgICB2VCA9IHZVdiArIHZlYzIoMC4wLCB0ZXhlbFNpemUueSk7XHJcbiAgICAgICAgdkIgPSB2VXYgLSB2ZWMyKDAuMCwgdGV4ZWxTaXplLnkpO1xyXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNChhUG9zaXRpb24sIDAuMCwgMS4wKTtcclxuICAgIH1cclxuYFxyXG4pXHJcblxyXG5jb25zdCBibHVyVmVydGV4U2hhZGVyID0gY29tcGlsZVNoYWRlcihcclxuICBnbC5WRVJURVhfU0hBREVSLFxyXG4gIGBcclxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuXHJcbiAgICBhdHRyaWJ1dGUgdmVjMiBhUG9zaXRpb247XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2O1xyXG4gICAgdmFyeWluZyB2ZWMyIHZMO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZSO1xyXG4gICAgdW5pZm9ybSB2ZWMyIHRleGVsU2l6ZTtcclxuXHJcbiAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgIHZVdiA9IGFQb3NpdGlvbiAqIDAuNSArIDAuNTtcclxuICAgICAgICBmbG9hdCBvZmZzZXQgPSAxLjMzMzMzMzMzO1xyXG4gICAgICAgIHZMID0gdlV2IC0gdGV4ZWxTaXplICogb2Zmc2V0O1xyXG4gICAgICAgIHZSID0gdlV2ICsgdGV4ZWxTaXplICogb2Zmc2V0O1xyXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNChhUG9zaXRpb24sIDAuMCwgMS4wKTtcclxuICAgIH1cclxuYFxyXG4pXHJcblxyXG5jb25zdCBibHVyU2hhZGVyID0gY29tcGlsZVNoYWRlcihcclxuICBnbC5GUkFHTUVOVF9TSEFERVIsXHJcbiAgYFxyXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBzYW1wbGVyMkQ7XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgIHZhcnlpbmcgdmVjMiB2TDtcclxuICAgIHZhcnlpbmcgdmVjMiB2UjtcclxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xyXG5cclxuICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAgICAgdmVjNCBzdW0gPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZVdikgKiAwLjI5NDExNzY0O1xyXG4gICAgICAgIHN1bSArPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZMKSAqIDAuMzUyOTQxMTc7XHJcbiAgICAgICAgc3VtICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlIpICogMC4zNTI5NDExNztcclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSBzdW07XHJcbiAgICB9XHJcbmBcclxuKVxyXG5cclxuY29uc3QgY29weVNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXHJcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxyXG4gIGBcclxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEO1xyXG5cclxuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2VXY7XHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcclxuXHJcbiAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlV2KTtcclxuICAgIH1cclxuYFxyXG4pXHJcblxyXG5jb25zdCBjbGVhclNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXHJcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxyXG4gIGBcclxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEO1xyXG5cclxuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2VXY7XHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcclxuICAgIHVuaWZvcm0gZmxvYXQgdmFsdWU7XHJcblxyXG4gICAgdm9pZCBtYWluICgpIHtcclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2YWx1ZSAqIHRleHR1cmUyRCh1VGV4dHVyZSwgdlV2KTtcclxuICAgIH1cclxuYFxyXG4pXHJcblxyXG5jb25zdCBjb2xvclNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXHJcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxyXG4gIGBcclxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG5cclxuICAgIHVuaWZvcm0gdmVjNCBjb2xvcjtcclxuXHJcbiAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xyXG4gICAgfVxyXG5gXHJcbilcclxuXHJcbmNvbnN0IGNoZWNrZXJib2FyZFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXHJcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxyXG4gIGBcclxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuICAgIHByZWNpc2lvbiBoaWdocCBzYW1wbGVyMkQ7XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xyXG4gICAgdW5pZm9ybSBmbG9hdCBhc3BlY3RSYXRpbztcclxuXHJcbiAgICAjZGVmaW5lIFNDQUxFIDI1LjBcclxuXHJcbiAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgIHZlYzIgdXYgPSBmbG9vcih2VXYgKiBTQ0FMRSAqIHZlYzIoYXNwZWN0UmF0aW8sIDEuMCkpO1xyXG4gICAgICAgIGZsb2F0IHYgPSBtb2QodXYueCArIHV2LnksIDIuMCk7XHJcbiAgICAgICAgdiA9IHYgKiAwLjEgKyAwLjg7XHJcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKHYpLCAxLjApO1xyXG4gICAgfVxyXG5gXHJcbilcclxuXHJcbmNvbnN0IGRpc3BsYXlTaGFkZXJTb3VyY2UgPSBgXHJcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XHJcbiAgICBwcmVjaXNpb24gaGlnaHAgc2FtcGxlcjJEO1xyXG5cclxuICAgIHZhcnlpbmcgdmVjMiB2VXY7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdkw7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlI7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdkI7XHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcclxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVCbG9vbTtcclxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVTdW5yYXlzO1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdURpdGhlcmluZztcclxuICAgIHVuaWZvcm0gdmVjMiBkaXRoZXJTY2FsZTtcclxuICAgIHVuaWZvcm0gdmVjMiB0ZXhlbFNpemU7XHJcblxyXG4gICAgdmVjMyBsaW5lYXJUb0dhbW1hICh2ZWMzIGNvbG9yKSB7XHJcbiAgICAgICAgY29sb3IgPSBtYXgoY29sb3IsIHZlYzMoMCkpO1xyXG4gICAgICAgIHJldHVybiBtYXgoMS4wNTUgKiBwb3coY29sb3IsIHZlYzMoMC40MTY2NjY2NjcpKSAtIDAuMDU1LCB2ZWMzKDApKTtcclxuICAgIH1cclxuXHJcbiAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgIHZlYzMgYyA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlV2KS5yZ2I7XHJcblxyXG4gICAgI2lmZGVmIFNIQURJTkdcclxuICAgICAgICB2ZWMzIGxjID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2TCkucmdiO1xyXG4gICAgICAgIHZlYzMgcmMgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZSKS5yZ2I7XHJcbiAgICAgICAgdmVjMyB0YyA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlQpLnJnYjtcclxuICAgICAgICB2ZWMzIGJjID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2QikucmdiO1xyXG5cclxuICAgICAgICBmbG9hdCBkeCA9IGxlbmd0aChyYykgLSBsZW5ndGgobGMpO1xyXG4gICAgICAgIGZsb2F0IGR5ID0gbGVuZ3RoKHRjKSAtIGxlbmd0aChiYyk7XHJcblxyXG4gICAgICAgIHZlYzMgbiA9IG5vcm1hbGl6ZSh2ZWMzKGR4LCBkeSwgbGVuZ3RoKHRleGVsU2l6ZSkpKTtcclxuICAgICAgICB2ZWMzIGwgPSB2ZWMzKDAuMCwgMC4wLCAxLjApO1xyXG5cclxuICAgICAgICBmbG9hdCBkaWZmdXNlID0gY2xhbXAoZG90KG4sIGwpICsgMC43LCAwLjcsIDEuMCk7XHJcbiAgICAgICAgYyAqPSBkaWZmdXNlO1xyXG4gICAgI2VuZGlmXHJcblxyXG4gICAgI2lmZGVmIEJMT09NXHJcbiAgICAgICAgdmVjMyBibG9vbSA9IHRleHR1cmUyRCh1Qmxvb20sIHZVdikucmdiO1xyXG4gICAgI2VuZGlmXHJcblxyXG4gICAgI2lmZGVmIFNVTlJBWVNcclxuICAgICAgICBmbG9hdCBzdW5yYXlzID0gdGV4dHVyZTJEKHVTdW5yYXlzLCB2VXYpLnI7XHJcbiAgICAgICAgYyAqPSBzdW5yYXlzO1xyXG4gICAgI2lmZGVmIEJMT09NXHJcbiAgICAgICAgYmxvb20gKj0gc3VucmF5cztcclxuICAgICNlbmRpZlxyXG4gICAgI2VuZGlmXHJcblxyXG4gICAgI2lmZGVmIEJMT09NXHJcbiAgICAgICAgZmxvYXQgbm9pc2UgPSB0ZXh0dXJlMkQodURpdGhlcmluZywgdlV2ICogZGl0aGVyU2NhbGUpLnI7XHJcbiAgICAgICAgbm9pc2UgPSBub2lzZSAqIDIuMCAtIDEuMDtcclxuICAgICAgICBibG9vbSArPSBub2lzZSAvIDI1NS4wO1xyXG4gICAgICAgIGJsb29tID0gbGluZWFyVG9HYW1tYShibG9vbSk7XHJcbiAgICAgICAgYyArPSBibG9vbTtcclxuICAgICNlbmRpZlxyXG5cclxuICAgICAgICBmbG9hdCBhID0gbWF4KGMuciwgbWF4KGMuZywgYy5iKSk7XHJcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjLCBhKTtcclxuICAgIH1cclxuYFxyXG5cclxuY29uc3QgYmxvb21QcmVmaWx0ZXJTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxyXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcclxuICBgXHJcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuICAgIHByZWNpc2lvbiBtZWRpdW1wIHNhbXBsZXIyRDtcclxuXHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2O1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XHJcbiAgICB1bmlmb3JtIHZlYzMgY3VydmU7XHJcbiAgICB1bmlmb3JtIGZsb2F0IHRocmVzaG9sZDtcclxuXHJcbiAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgIHZlYzMgYyA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlV2KS5yZ2I7XHJcbiAgICAgICAgZmxvYXQgYnIgPSBtYXgoYy5yLCBtYXgoYy5nLCBjLmIpKTtcclxuICAgICAgICBmbG9hdCBycSA9IGNsYW1wKGJyIC0gY3VydmUueCwgMC4wLCBjdXJ2ZS55KTtcclxuICAgICAgICBycSA9IGN1cnZlLnogKiBycSAqIHJxO1xyXG4gICAgICAgIGMgKj0gbWF4KHJxLCBiciAtIHRocmVzaG9sZCkgLyBtYXgoYnIsIDAuMDAwMSk7XHJcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjLCAwLjApO1xyXG4gICAgfVxyXG5gXHJcbilcclxuXHJcbmNvbnN0IGJsb29tQmx1clNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXHJcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxyXG4gIGBcclxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEO1xyXG5cclxuICAgIHZhcnlpbmcgdmVjMiB2TDtcclxuICAgIHZhcnlpbmcgdmVjMiB2UjtcclxuICAgIHZhcnlpbmcgdmVjMiB2VDtcclxuICAgIHZhcnlpbmcgdmVjMiB2QjtcclxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xyXG5cclxuICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAgICAgdmVjNCBzdW0gPSB2ZWM0KDAuMCk7XHJcbiAgICAgICAgc3VtICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdkwpO1xyXG4gICAgICAgIHN1bSArPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZSKTtcclxuICAgICAgICBzdW0gKz0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VCk7XHJcbiAgICAgICAgc3VtICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdkIpO1xyXG4gICAgICAgIHN1bSAqPSAwLjI1O1xyXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHN1bTtcclxuICAgIH1cclxuYFxyXG4pXHJcblxyXG5jb25zdCBibG9vbUZpbmFsU2hhZGVyID0gY29tcGlsZVNoYWRlcihcclxuICBnbC5GUkFHTUVOVF9TSEFERVIsXHJcbiAgYFxyXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBzYW1wbGVyMkQ7XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZMO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZSO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZUO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZCO1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XHJcbiAgICB1bmlmb3JtIGZsb2F0IGludGVuc2l0eTtcclxuXHJcbiAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgIHZlYzQgc3VtID0gdmVjNCgwLjApO1xyXG4gICAgICAgIHN1bSArPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZMKTtcclxuICAgICAgICBzdW0gKz0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2Uik7XHJcbiAgICAgICAgc3VtICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlQpO1xyXG4gICAgICAgIHN1bSArPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZCKTtcclxuICAgICAgICBzdW0gKj0gMC4yNTtcclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSBzdW0gKiBpbnRlbnNpdHk7XHJcbiAgICB9XHJcbmBcclxuKVxyXG5cclxuY29uc3Qgc3VucmF5c01hc2tTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxyXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcclxuICBgXHJcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XHJcbiAgICBwcmVjaXNpb24gaGlnaHAgc2FtcGxlcjJEO1xyXG5cclxuICAgIHZhcnlpbmcgdmVjMiB2VXY7XHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcclxuXHJcbiAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgIHZlYzQgYyA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlV2KTtcclxuICAgICAgICBmbG9hdCBiciA9IG1heChjLnIsIG1heChjLmcsIGMuYikpO1xyXG4gICAgICAgIGMuYSA9IDEuMCAtIG1pbihtYXgoYnIgKiAyMC4wLCAwLjApLCAwLjgpO1xyXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IGM7XHJcbiAgICB9XHJcbmBcclxuKVxyXG5cclxuY29uc3Qgc3VucmF5c1NoYWRlciA9IGNvbXBpbGVTaGFkZXIoXHJcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxyXG4gIGBcclxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuICAgIHByZWNpc2lvbiBoaWdocCBzYW1wbGVyMkQ7XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xyXG4gICAgdW5pZm9ybSBmbG9hdCB3ZWlnaHQ7XHJcblxyXG4gICAgI2RlZmluZSBJVEVSQVRJT05TIDE2XHJcblxyXG4gICAgdm9pZCBtYWluICgpIHtcclxuICAgICAgICBmbG9hdCBEZW5zaXR5ID0gMC4zO1xyXG4gICAgICAgIGZsb2F0IERlY2F5ID0gMC45NTtcclxuICAgICAgICBmbG9hdCBFeHBvc3VyZSA9IDAuNztcclxuXHJcbiAgICAgICAgdmVjMiBjb29yZCA9IHZVdjtcclxuICAgICAgICB2ZWMyIGRpciA9IHZVdiAtIDAuNTtcclxuXHJcbiAgICAgICAgZGlyICo9IDEuMCAvIGZsb2F0KElURVJBVElPTlMpICogRGVuc2l0eTtcclxuICAgICAgICBmbG9hdCBpbGx1bWluYXRpb25EZWNheSA9IDEuMDtcclxuXHJcbiAgICAgICAgZmxvYXQgY29sb3IgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZVdikuYTtcclxuXHJcbiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBJVEVSQVRJT05TOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb29yZCAtPSBkaXI7XHJcbiAgICAgICAgICAgIGZsb2F0IGNvbCA9IHRleHR1cmUyRCh1VGV4dHVyZSwgY29vcmQpLmE7XHJcbiAgICAgICAgICAgIGNvbG9yICs9IGNvbCAqIGlsbHVtaW5hdGlvbkRlY2F5ICogd2VpZ2h0O1xyXG4gICAgICAgICAgICBpbGx1bWluYXRpb25EZWNheSAqPSBEZWNheTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IgKiBFeHBvc3VyZSwgMC4wLCAwLjAsIDEuMCk7XHJcbiAgICB9XHJcbmBcclxuKVxyXG5cclxuY29uc3Qgc3BsYXRTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxyXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcclxuICBgXHJcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XHJcbiAgICBwcmVjaXNpb24gaGlnaHAgc2FtcGxlcjJEO1xyXG5cclxuICAgIHZhcnlpbmcgdmVjMiB2VXY7XHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VGFyZ2V0O1xyXG4gICAgdW5pZm9ybSBmbG9hdCBhc3BlY3RSYXRpbztcclxuICAgIHVuaWZvcm0gdmVjMyBjb2xvcjtcclxuICAgIHVuaWZvcm0gdmVjMiBwb2ludDtcclxuICAgIHVuaWZvcm0gZmxvYXQgcmFkaXVzO1xyXG5cclxuICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAgICAgdmVjMiBwID0gdlV2IC0gcG9pbnQueHk7XHJcbiAgICAgICAgcC54ICo9IGFzcGVjdFJhdGlvO1xyXG4gICAgICAgIHZlYzMgc3BsYXQgPSBleHAoLWRvdChwLCBwKSAvIHJhZGl1cykgKiBjb2xvcjtcclxuICAgICAgICB2ZWMzIGJhc2UgPSB0ZXh0dXJlMkQodVRhcmdldCwgdlV2KS54eXo7XHJcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChiYXNlICsgc3BsYXQsIDEuMCk7XHJcbiAgICB9XHJcbmBcclxuKVxyXG5cclxuY29uc3QgYWR2ZWN0aW9uU2hhZGVyID0gY29tcGlsZVNoYWRlcihcclxuICBnbC5GUkFHTUVOVF9TSEFERVIsXHJcbiAgYFxyXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xyXG4gICAgcHJlY2lzaW9uIGhpZ2hwIHNhbXBsZXIyRDtcclxuXHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2O1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVZlbG9jaXR5O1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVNvdXJjZTtcclxuICAgIHVuaWZvcm0gdmVjMiB0ZXhlbFNpemU7XHJcbiAgICB1bmlmb3JtIHZlYzIgZHllVGV4ZWxTaXplO1xyXG4gICAgdW5pZm9ybSBmbG9hdCBkdDtcclxuICAgIHVuaWZvcm0gZmxvYXQgZGlzc2lwYXRpb247XHJcblxyXG4gICAgdmVjNCBiaWxlcnAgKHNhbXBsZXIyRCBzYW0sIHZlYzIgdXYsIHZlYzIgdHNpemUpIHtcclxuICAgICAgICB2ZWMyIHN0ID0gdXYgLyB0c2l6ZSAtIDAuNTtcclxuXHJcbiAgICAgICAgdmVjMiBpdXYgPSBmbG9vcihzdCk7XHJcbiAgICAgICAgdmVjMiBmdXYgPSBmcmFjdChzdCk7XHJcblxyXG4gICAgICAgIHZlYzQgYSA9IHRleHR1cmUyRChzYW0sIChpdXYgKyB2ZWMyKDAuNSwgMC41KSkgKiB0c2l6ZSk7XHJcbiAgICAgICAgdmVjNCBiID0gdGV4dHVyZTJEKHNhbSwgKGl1diArIHZlYzIoMS41LCAwLjUpKSAqIHRzaXplKTtcclxuICAgICAgICB2ZWM0IGMgPSB0ZXh0dXJlMkQoc2FtLCAoaXV2ICsgdmVjMigwLjUsIDEuNSkpICogdHNpemUpO1xyXG4gICAgICAgIHZlYzQgZCA9IHRleHR1cmUyRChzYW0sIChpdXYgKyB2ZWMyKDEuNSwgMS41KSkgKiB0c2l6ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBtaXgobWl4KGEsIGIsIGZ1di54KSwgbWl4KGMsIGQsIGZ1di54KSwgZnV2LnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAjaWZkZWYgTUFOVUFMX0ZJTFRFUklOR1xyXG4gICAgICAgIHZlYzIgY29vcmQgPSB2VXYgLSBkdCAqIGJpbGVycCh1VmVsb2NpdHksIHZVdiwgdGV4ZWxTaXplKS54eSAqIHRleGVsU2l6ZTtcclxuICAgICAgICB2ZWM0IHJlc3VsdCA9IGJpbGVycCh1U291cmNlLCBjb29yZCwgZHllVGV4ZWxTaXplKTtcclxuICAgICNlbHNlXHJcbiAgICAgICAgdmVjMiBjb29yZCA9IHZVdiAtIGR0ICogdGV4dHVyZTJEKHVWZWxvY2l0eSwgdlV2KS54eSAqIHRleGVsU2l6ZTtcclxuICAgICAgICB2ZWM0IHJlc3VsdCA9IHRleHR1cmUyRCh1U291cmNlLCBjb29yZCk7XHJcbiAgICAjZW5kaWZcclxuICAgICAgICBmbG9hdCBkZWNheSA9IDEuMCArIGRpc3NpcGF0aW9uICogZHQ7XHJcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gcmVzdWx0IC8gZGVjYXk7XHJcbiAgICB9YCxcclxuICBleHQuc3VwcG9ydExpbmVhckZpbHRlcmluZyA/IHVuZGVmaW5lZCA6IFsnTUFOVUFMX0ZJTFRFUklORyddXHJcbilcclxuXHJcbmNvbnN0IGRpdmVyZ2VuY2VTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxyXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcclxuICBgXHJcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuICAgIHByZWNpc2lvbiBtZWRpdW1wIHNhbXBsZXIyRDtcclxuXHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdlV2O1xyXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZMO1xyXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZSO1xyXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZUO1xyXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZCO1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVZlbG9jaXR5O1xyXG5cclxuICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAgICAgZmxvYXQgTCA9IHRleHR1cmUyRCh1VmVsb2NpdHksIHZMKS54O1xyXG4gICAgICAgIGZsb2F0IFIgPSB0ZXh0dXJlMkQodVZlbG9jaXR5LCB2UikueDtcclxuICAgICAgICBmbG9hdCBUID0gdGV4dHVyZTJEKHVWZWxvY2l0eSwgdlQpLnk7XHJcbiAgICAgICAgZmxvYXQgQiA9IHRleHR1cmUyRCh1VmVsb2NpdHksIHZCKS55O1xyXG5cclxuICAgICAgICB2ZWMyIEMgPSB0ZXh0dXJlMkQodVZlbG9jaXR5LCB2VXYpLnh5O1xyXG4gICAgICAgIGlmICh2TC54IDwgMC4wKSB7IEwgPSAtQy54OyB9XHJcbiAgICAgICAgaWYgKHZSLnggPiAxLjApIHsgUiA9IC1DLng7IH1cclxuICAgICAgICBpZiAodlQueSA+IDEuMCkgeyBUID0gLUMueTsgfVxyXG4gICAgICAgIGlmICh2Qi55IDwgMC4wKSB7IEIgPSAtQy55OyB9XHJcblxyXG4gICAgICAgIGZsb2F0IGRpdiA9IDAuNSAqIChSIC0gTCArIFQgLSBCKTtcclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGRpdiwgMC4wLCAwLjAsIDEuMCk7XHJcbiAgICB9XHJcbmBcclxuKVxyXG5cclxuY29uc3QgY3VybFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXHJcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxyXG4gIGBcclxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEO1xyXG5cclxuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2VXY7XHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdkw7XHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdlI7XHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdlQ7XHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdkI7XHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VmVsb2NpdHk7XHJcblxyXG4gICAgdm9pZCBtYWluICgpIHtcclxuICAgICAgICBmbG9hdCBMID0gdGV4dHVyZTJEKHVWZWxvY2l0eSwgdkwpLnk7XHJcbiAgICAgICAgZmxvYXQgUiA9IHRleHR1cmUyRCh1VmVsb2NpdHksIHZSKS55O1xyXG4gICAgICAgIGZsb2F0IFQgPSB0ZXh0dXJlMkQodVZlbG9jaXR5LCB2VCkueDtcclxuICAgICAgICBmbG9hdCBCID0gdGV4dHVyZTJEKHVWZWxvY2l0eSwgdkIpLng7XHJcbiAgICAgICAgZmxvYXQgdm9ydGljaXR5ID0gUiAtIEwgLSBUICsgQjtcclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuNSAqIHZvcnRpY2l0eSwgMC4wLCAwLjAsIDEuMCk7XHJcbiAgICB9XHJcbmBcclxuKVxyXG5cclxuY29uc3Qgdm9ydGljaXR5U2hhZGVyID0gY29tcGlsZVNoYWRlcihcclxuICBnbC5GUkFHTUVOVF9TSEFERVIsXHJcbiAgYFxyXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xyXG4gICAgcHJlY2lzaW9uIGhpZ2hwIHNhbXBsZXIyRDtcclxuXHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2O1xyXG4gICAgdmFyeWluZyB2ZWMyIHZMO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZSO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZUO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZCO1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVZlbG9jaXR5O1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdUN1cmw7XHJcbiAgICB1bmlmb3JtIGZsb2F0IGN1cmw7XHJcbiAgICB1bmlmb3JtIGZsb2F0IGR0O1xyXG5cclxuICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAgICAgZmxvYXQgTCA9IHRleHR1cmUyRCh1Q3VybCwgdkwpLng7XHJcbiAgICAgICAgZmxvYXQgUiA9IHRleHR1cmUyRCh1Q3VybCwgdlIpLng7XHJcbiAgICAgICAgZmxvYXQgVCA9IHRleHR1cmUyRCh1Q3VybCwgdlQpLng7XHJcbiAgICAgICAgZmxvYXQgQiA9IHRleHR1cmUyRCh1Q3VybCwgdkIpLng7XHJcbiAgICAgICAgZmxvYXQgQyA9IHRleHR1cmUyRCh1Q3VybCwgdlV2KS54O1xyXG5cclxuICAgICAgICB2ZWMyIGZvcmNlID0gMC41ICogdmVjMihhYnMoVCkgLSBhYnMoQiksIGFicyhSKSAtIGFicyhMKSk7XHJcbiAgICAgICAgZm9yY2UgLz0gbGVuZ3RoKGZvcmNlKSArIDAuMDAwMTtcclxuICAgICAgICBmb3JjZSAqPSBjdXJsICogQztcclxuICAgICAgICBmb3JjZS55ICo9IC0xLjA7XHJcblxyXG4gICAgICAgIHZlYzIgdmVsID0gdGV4dHVyZTJEKHVWZWxvY2l0eSwgdlV2KS54eTtcclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZlbCArIGZvcmNlICogZHQsIDAuMCwgMS4wKTtcclxuICAgIH1cclxuYFxyXG4pXHJcblxyXG5jb25zdCBwcmVzc3VyZVNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXHJcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxyXG4gIGBcclxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEO1xyXG5cclxuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2VXY7XHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdkw7XHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdlI7XHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdlQ7XHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdkI7XHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1UHJlc3N1cmU7XHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1RGl2ZXJnZW5jZTtcclxuXHJcbiAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgIGZsb2F0IEwgPSB0ZXh0dXJlMkQodVByZXNzdXJlLCB2TCkueDtcclxuICAgICAgICBmbG9hdCBSID0gdGV4dHVyZTJEKHVQcmVzc3VyZSwgdlIpLng7XHJcbiAgICAgICAgZmxvYXQgVCA9IHRleHR1cmUyRCh1UHJlc3N1cmUsIHZUKS54O1xyXG4gICAgICAgIGZsb2F0IEIgPSB0ZXh0dXJlMkQodVByZXNzdXJlLCB2QikueDtcclxuICAgICAgICBmbG9hdCBDID0gdGV4dHVyZTJEKHVQcmVzc3VyZSwgdlV2KS54O1xyXG4gICAgICAgIGZsb2F0IGRpdmVyZ2VuY2UgPSB0ZXh0dXJlMkQodURpdmVyZ2VuY2UsIHZVdikueDtcclxuICAgICAgICBmbG9hdCBwcmVzc3VyZSA9IChMICsgUiArIEIgKyBUIC0gZGl2ZXJnZW5jZSkgKiAwLjI1O1xyXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQocHJlc3N1cmUsIDAuMCwgMC4wLCAxLjApO1xyXG4gICAgfVxyXG5gXHJcbilcclxuXHJcbmNvbnN0IGdyYWRpZW50U3VidHJhY3RTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxyXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcclxuICBgXHJcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuICAgIHByZWNpc2lvbiBtZWRpdW1wIHNhbXBsZXIyRDtcclxuXHJcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdlV2O1xyXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZMO1xyXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZSO1xyXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZUO1xyXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZCO1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVByZXNzdXJlO1xyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVZlbG9jaXR5O1xyXG5cclxuICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAgICAgZmxvYXQgTCA9IHRleHR1cmUyRCh1UHJlc3N1cmUsIHZMKS54O1xyXG4gICAgICAgIGZsb2F0IFIgPSB0ZXh0dXJlMkQodVByZXNzdXJlLCB2UikueDtcclxuICAgICAgICBmbG9hdCBUID0gdGV4dHVyZTJEKHVQcmVzc3VyZSwgdlQpLng7XHJcbiAgICAgICAgZmxvYXQgQiA9IHRleHR1cmUyRCh1UHJlc3N1cmUsIHZCKS54O1xyXG4gICAgICAgIHZlYzIgdmVsb2NpdHkgPSB0ZXh0dXJlMkQodVZlbG9jaXR5LCB2VXYpLnh5O1xyXG4gICAgICAgIHZlbG9jaXR5Lnh5IC09IHZlYzIoUiAtIEwsIFQgLSBCKTtcclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZlbG9jaXR5LCAwLjAsIDEuMCk7XHJcbiAgICB9XHJcbmBcclxuKVxyXG5cclxuY29uc3QgYmxpdCA9ICgoKSA9PiB7XHJcbiAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGdsLmNyZWF0ZUJ1ZmZlcigpKVxyXG4gIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KFstMSwgLTEsIC0xLCAxLCAxLCAxLCAxLCAtMV0pLCBnbC5TVEFUSUNfRFJBVylcclxuICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBnbC5jcmVhdGVCdWZmZXIoKSlcclxuICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBuZXcgVWludDE2QXJyYXkoWzAsIDEsIDIsIDAsIDIsIDNdKSwgZ2wuU1RBVElDX0RSQVcpXHJcbiAgZ2wudmVydGV4QXR0cmliUG9pbnRlcigwLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApXHJcbiAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoMClcclxuXHJcbiAgcmV0dXJuIChkZXN0aW5hdGlvbjogV2ViR0xGcmFtZWJ1ZmZlciB8IG51bGwpID0+IHtcclxuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZGVzdGluYXRpb24pXHJcbiAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCA2LCBnbC5VTlNJR05FRF9TSE9SVCwgMClcclxuICB9XHJcbn0pKClcclxuXHJcbmxldCBkeWU6IERvdWJsZUZCT1xyXG5sZXQgdmVsb2NpdHk6IERvdWJsZUZCT1xyXG5sZXQgZGl2ZXJnZW5jZTogRkJPXHJcbmxldCBjdXJsOiBGQk9cclxubGV0IHByZXNzdXJlOiBEb3VibGVGQk9cclxubGV0IGJsb29tOiBGQk9cclxubGV0IGJsb29tRnJhbWVidWZmZXJzOiBGQk9bXSA9IFtdXHJcbmxldCBzdW5yYXlzOiBGQk9cclxubGV0IHN1bnJheXNUZW1wOiBGQk9cclxuXHJcbmxldCBkaXRoZXJpbmdUZXh0dXJlOiBUZXh0dXJlID0gY3JlYXRlVGV4dHVyZUFzeW5jKCdMRFJfTExMMV8wLnBuZycpXHJcblxyXG5jb25zdCBibHVyUHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGJsdXJWZXJ0ZXhTaGFkZXIsIGJsdXJTaGFkZXIpXHJcbmNvbnN0IGNvcHlQcm9ncmFtID0gbmV3IFByb2dyYW0oYmFzZVZlcnRleFNoYWRlciwgY29weVNoYWRlcilcclxuY29uc3QgY2xlYXJQcm9ncmFtID0gbmV3IFByb2dyYW0oYmFzZVZlcnRleFNoYWRlciwgY2xlYXJTaGFkZXIpXHJcbmNvbnN0IGNvbG9yUHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGJhc2VWZXJ0ZXhTaGFkZXIsIGNvbG9yU2hhZGVyKVxyXG5jb25zdCBjaGVja2VyYm9hcmRQcm9ncmFtID0gbmV3IFByb2dyYW0oYmFzZVZlcnRleFNoYWRlciwgY2hlY2tlcmJvYXJkU2hhZGVyKVxyXG5jb25zdCBibG9vbVByZWZpbHRlclByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBibG9vbVByZWZpbHRlclNoYWRlcilcclxuY29uc3QgYmxvb21CbHVyUHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGJhc2VWZXJ0ZXhTaGFkZXIsIGJsb29tQmx1clNoYWRlcilcclxuY29uc3QgYmxvb21GaW5hbFByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBibG9vbUZpbmFsU2hhZGVyKVxyXG5jb25zdCBzdW5yYXlzTWFza1Byb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBzdW5yYXlzTWFza1NoYWRlcilcclxuY29uc3Qgc3VucmF5c1Byb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBzdW5yYXlzU2hhZGVyKVxyXG5jb25zdCBzcGxhdFByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBzcGxhdFNoYWRlcilcclxuY29uc3QgYWR2ZWN0aW9uUHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGJhc2VWZXJ0ZXhTaGFkZXIsIGFkdmVjdGlvblNoYWRlcilcclxuY29uc3QgZGl2ZXJnZW5jZVByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBkaXZlcmdlbmNlU2hhZGVyKVxyXG5jb25zdCBjdXJsUHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGJhc2VWZXJ0ZXhTaGFkZXIsIGN1cmxTaGFkZXIpXHJcbmNvbnN0IHZvcnRpY2l0eVByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCB2b3J0aWNpdHlTaGFkZXIpXHJcbmNvbnN0IHByZXNzdXJlUHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGJhc2VWZXJ0ZXhTaGFkZXIsIHByZXNzdXJlU2hhZGVyKVxyXG5jb25zdCBncmFkaWVuU3VidHJhY3RQcm9ncmFtID0gbmV3IFByb2dyYW0oYmFzZVZlcnRleFNoYWRlciwgZ3JhZGllbnRTdWJ0cmFjdFNoYWRlcilcclxuXHJcbmNvbnN0IGRpc3BsYXlNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChiYXNlVmVydGV4U2hhZGVyLCBkaXNwbGF5U2hhZGVyU291cmNlKVxyXG5cclxuZnVuY3Rpb24gaW5pdEZyYW1lYnVmZmVycygpIHtcclxuICBsZXQgc2ltUmVzID0gZ2V0UmVzb2x1dGlvbihjb25maWcuU0lNX1JFU09MVVRJT04pXHJcbiAgbGV0IGR5ZVJlcyA9IGdldFJlc29sdXRpb24oY29uZmlnLkRZRV9SRVNPTFVUSU9OKVxyXG5cclxuICBjb25zdCB0ZXhUeXBlID0gZXh0LmhhbGZGbG9hdFRleFR5cGVcclxuICBjb25zdCByZ2JhID0gZXh0LmZvcm1hdFJHQkFcclxuICBjb25zdCByZyA9IGV4dC5mb3JtYXRSR1xyXG4gIGNvbnN0IHIgPSBleHQuZm9ybWF0UlxyXG4gIGNvbnN0IGZpbHRlcmluZyA9IGV4dC5zdXBwb3J0TGluZWFyRmlsdGVyaW5nID8gZ2wuTElORUFSIDogZ2wuTkVBUkVTVFxyXG5cclxuICBpZiAoZHllID09IG51bGwpXHJcbiAgICBkeWUgPSBjcmVhdGVEb3VibGVGQk8oXHJcbiAgICAgIGR5ZVJlcy53aWR0aCxcclxuICAgICAgZHllUmVzLmhlaWdodCxcclxuICAgICAgcmdiYS5pbnRlcm5hbEZvcm1hdCxcclxuICAgICAgcmdiYS5mb3JtYXQsXHJcbiAgICAgIHRleFR5cGUsXHJcbiAgICAgIGZpbHRlcmluZ1xyXG4gICAgKVxyXG4gIGVsc2VcclxuICAgIGR5ZSA9IHJlc2l6ZURvdWJsZUZCTyhcclxuICAgICAgZHllLFxyXG4gICAgICBkeWVSZXMud2lkdGgsXHJcbiAgICAgIGR5ZVJlcy5oZWlnaHQsXHJcbiAgICAgIHJnYmEuaW50ZXJuYWxGb3JtYXQsXHJcbiAgICAgIHJnYmEuZm9ybWF0LFxyXG4gICAgICB0ZXhUeXBlLFxyXG4gICAgICBmaWx0ZXJpbmdcclxuICAgIClcclxuXHJcbiAgaWYgKHZlbG9jaXR5ID09IG51bGwpXHJcbiAgICB2ZWxvY2l0eSA9IGNyZWF0ZURvdWJsZUZCTyhcclxuICAgICAgc2ltUmVzLndpZHRoLFxyXG4gICAgICBzaW1SZXMuaGVpZ2h0LFxyXG4gICAgICByZy5pbnRlcm5hbEZvcm1hdCxcclxuICAgICAgcmcuZm9ybWF0LFxyXG4gICAgICB0ZXhUeXBlLFxyXG4gICAgICBmaWx0ZXJpbmdcclxuICAgIClcclxuICBlbHNlXHJcbiAgICB2ZWxvY2l0eSA9IHJlc2l6ZURvdWJsZUZCTyhcclxuICAgICAgdmVsb2NpdHksXHJcbiAgICAgIHNpbVJlcy53aWR0aCxcclxuICAgICAgc2ltUmVzLmhlaWdodCxcclxuICAgICAgcmcuaW50ZXJuYWxGb3JtYXQsXHJcbiAgICAgIHJnLmZvcm1hdCxcclxuICAgICAgdGV4VHlwZSxcclxuICAgICAgZmlsdGVyaW5nXHJcbiAgICApXHJcblxyXG4gIGRpdmVyZ2VuY2UgPSBjcmVhdGVGQk8oXHJcbiAgICBzaW1SZXMud2lkdGgsXHJcbiAgICBzaW1SZXMuaGVpZ2h0LFxyXG4gICAgci5pbnRlcm5hbEZvcm1hdCxcclxuICAgIHIuZm9ybWF0LFxyXG4gICAgdGV4VHlwZSxcclxuICAgIGdsLk5FQVJFU1RcclxuICApXHJcbiAgY3VybCA9IGNyZWF0ZUZCTyhzaW1SZXMud2lkdGgsIHNpbVJlcy5oZWlnaHQsIHIuaW50ZXJuYWxGb3JtYXQsIHIuZm9ybWF0LCB0ZXhUeXBlLCBnbC5ORUFSRVNUKVxyXG4gIHByZXNzdXJlID0gY3JlYXRlRG91YmxlRkJPKFxyXG4gICAgc2ltUmVzLndpZHRoLFxyXG4gICAgc2ltUmVzLmhlaWdodCxcclxuICAgIHIuaW50ZXJuYWxGb3JtYXQsXHJcbiAgICByLmZvcm1hdCxcclxuICAgIHRleFR5cGUsXHJcbiAgICBnbC5ORUFSRVNUXHJcbiAgKVxyXG5cclxuICBpbml0Qmxvb21GcmFtZWJ1ZmZlcnMoKVxyXG4gIGluaXRTdW5yYXlzRnJhbWVidWZmZXJzKClcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdEJsb29tRnJhbWVidWZmZXJzKCkge1xyXG4gIGxldCByZXMgPSBnZXRSZXNvbHV0aW9uKGNvbmZpZy5CTE9PTV9SRVNPTFVUSU9OKVxyXG5cclxuICBjb25zdCB0ZXhUeXBlID0gZXh0LmhhbGZGbG9hdFRleFR5cGVcclxuICBjb25zdCByZ2JhID0gZXh0LmZvcm1hdFJHQkFcclxuICBjb25zdCBmaWx0ZXJpbmcgPSBleHQuc3VwcG9ydExpbmVhckZpbHRlcmluZyA/IGdsLkxJTkVBUiA6IGdsLk5FQVJFU1RcclxuXHJcbiAgYmxvb20gPSBjcmVhdGVGQk8ocmVzLndpZHRoLCByZXMuaGVpZ2h0LCByZ2JhLmludGVybmFsRm9ybWF0LCByZ2JhLmZvcm1hdCwgdGV4VHlwZSwgZmlsdGVyaW5nKVxyXG5cclxuICBibG9vbUZyYW1lYnVmZmVycy5sZW5ndGggPSAwXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuQkxPT01fSVRFUkFUSU9OUzsgaSsrKSB7XHJcbiAgICBsZXQgd2lkdGggPSByZXMud2lkdGggPj4gKGkgKyAxKVxyXG4gICAgbGV0IGhlaWdodCA9IHJlcy5oZWlnaHQgPj4gKGkgKyAxKVxyXG5cclxuICAgIGlmICh3aWR0aCA8IDIgfHwgaGVpZ2h0IDwgMikgYnJlYWtcclxuXHJcbiAgICBsZXQgZmJvID0gY3JlYXRlRkJPKHdpZHRoLCBoZWlnaHQsIHJnYmEuaW50ZXJuYWxGb3JtYXQsIHJnYmEuZm9ybWF0LCB0ZXhUeXBlLCBmaWx0ZXJpbmcpXHJcbiAgICBibG9vbUZyYW1lYnVmZmVycy5wdXNoKGZibylcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRTdW5yYXlzRnJhbWVidWZmZXJzKCkge1xyXG4gIGxldCByZXMgPSBnZXRSZXNvbHV0aW9uKGNvbmZpZy5TVU5SQVlTX1JFU09MVVRJT04pXHJcblxyXG4gIGNvbnN0IHRleFR5cGUgPSBleHQuaGFsZkZsb2F0VGV4VHlwZVxyXG4gIGNvbnN0IHIgPSBleHQuZm9ybWF0UlxyXG4gIGNvbnN0IGZpbHRlcmluZyA9IGV4dC5zdXBwb3J0TGluZWFyRmlsdGVyaW5nID8gZ2wuTElORUFSIDogZ2wuTkVBUkVTVFxyXG5cclxuICBzdW5yYXlzID0gY3JlYXRlRkJPKHJlcy53aWR0aCwgcmVzLmhlaWdodCwgci5pbnRlcm5hbEZvcm1hdCwgci5mb3JtYXQsIHRleFR5cGUsIGZpbHRlcmluZylcclxuICBzdW5yYXlzVGVtcCA9IGNyZWF0ZUZCTyhyZXMud2lkdGgsIHJlcy5oZWlnaHQsIHIuaW50ZXJuYWxGb3JtYXQsIHIuZm9ybWF0LCB0ZXhUeXBlLCBmaWx0ZXJpbmcpXHJcbn1cclxuXHJcbnR5cGUgRkJPID0gUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlRkJPPlxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRkJPKFxyXG4gIHc6IG51bWJlcixcclxuICBoOiBudW1iZXIsXHJcbiAgaW50ZXJuYWxGb3JtYXQ6IG51bWJlcixcclxuICBmb3JtYXQ6IG51bWJlcixcclxuICB0eXBlOiBudW1iZXIsXHJcbiAgcGFyYW06IG51bWJlclxyXG4pIHtcclxuICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKVxyXG4gIGxldCB0ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpXHJcbiAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSlcclxuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgcGFyYW0pXHJcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIHBhcmFtKVxyXG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpXHJcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSlcclxuICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGludGVybmFsRm9ybWF0LCB3LCBoLCAwLCBmb3JtYXQsIHR5cGUsIG51bGwpXHJcblxyXG4gIGxldCBmYm8gPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpXHJcbiAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmYm8pXHJcbiAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCB0ZXh0dXJlLCAwKVxyXG4gIGdsLnZpZXdwb3J0KDAsIDAsIHcsIGgpXHJcbiAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVClcclxuXHJcbiAgbGV0IHRleGVsU2l6ZVggPSAxLjAgLyB3XHJcbiAgbGV0IHRleGVsU2l6ZVkgPSAxLjAgLyBoXHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB0ZXh0dXJlLFxyXG4gICAgZmJvLFxyXG4gICAgd2lkdGg6IHcsXHJcbiAgICBoZWlnaHQ6IGgsXHJcbiAgICB0ZXhlbFNpemVYLFxyXG4gICAgdGV4ZWxTaXplWSxcclxuICAgIGF0dGFjaChpZDogbnVtYmVyKSB7XHJcbiAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyBpZClcclxuICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSlcclxuICAgICAgcmV0dXJuIGlkXHJcbiAgICB9LFxyXG4gIH1cclxufVxyXG5cclxudHlwZSBEb3VibGVGQk8gPSBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVEb3VibGVGQk8+XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVEb3VibGVGQk8oXHJcbiAgdzogbnVtYmVyLFxyXG4gIGg6IG51bWJlcixcclxuICBpbnRlcm5hbEZvcm1hdDogbnVtYmVyLFxyXG4gIGZvcm1hdDogbnVtYmVyLFxyXG4gIHR5cGU6IG51bWJlcixcclxuICBwYXJhbTogbnVtYmVyXHJcbikge1xyXG4gIGxldCBmYm8xOiBGQk8gPSBjcmVhdGVGQk8odywgaCwgaW50ZXJuYWxGb3JtYXQsIGZvcm1hdCwgdHlwZSwgcGFyYW0pXHJcbiAgbGV0IGZibzI6IEZCTyA9IGNyZWF0ZUZCTyh3LCBoLCBpbnRlcm5hbEZvcm1hdCwgZm9ybWF0LCB0eXBlLCBwYXJhbSlcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHdpZHRoOiB3LFxyXG4gICAgaGVpZ2h0OiBoLFxyXG4gICAgdGV4ZWxTaXplWDogZmJvMS50ZXhlbFNpemVYLFxyXG4gICAgdGV4ZWxTaXplWTogZmJvMS50ZXhlbFNpemVZLFxyXG4gICAgZ2V0IHJlYWQoKTogRkJPIHtcclxuICAgICAgcmV0dXJuIGZibzFcclxuICAgIH0sXHJcbiAgICBzZXQgcmVhZCh2YWx1ZTogRkJPKSB7XHJcbiAgICAgIGZibzEgPSB2YWx1ZVxyXG4gICAgfSxcclxuICAgIGdldCB3cml0ZSgpOiBGQk8ge1xyXG4gICAgICByZXR1cm4gZmJvMlxyXG4gICAgfSxcclxuICAgIHNldCB3cml0ZSh2YWx1ZTogRkJPKSB7XHJcbiAgICAgIGZibzIgPSB2YWx1ZVxyXG4gICAgfSxcclxuICAgIHN3YXAoKSB7XHJcbiAgICAgIGxldCB0ZW1wID0gZmJvMVxyXG4gICAgICBmYm8xID0gZmJvMlxyXG4gICAgICBmYm8yID0gdGVtcFxyXG4gICAgfSxcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2l6ZUZCTyhcclxuICB0YXJnZXQ6IEZCTyxcclxuICB3OiBudW1iZXIsXHJcbiAgaDogbnVtYmVyLFxyXG4gIGludGVybmFsRm9ybWF0OiBudW1iZXIsXHJcbiAgZm9ybWF0OiBudW1iZXIsXHJcbiAgdHlwZTogbnVtYmVyLFxyXG4gIHBhcmFtOiBudW1iZXJcclxuKSB7XHJcbiAgbGV0IG5ld0ZCTyA9IGNyZWF0ZUZCTyh3LCBoLCBpbnRlcm5hbEZvcm1hdCwgZm9ybWF0LCB0eXBlLCBwYXJhbSlcclxuICBjb3B5UHJvZ3JhbS5iaW5kKClcclxuICBnbC51bmlmb3JtMWkoY29weVByb2dyYW0udW5pZm9ybXMudVRleHR1cmUsIHRhcmdldC5hdHRhY2goMCkpXHJcbiAgYmxpdChuZXdGQk8uZmJvKVxyXG4gIHJldHVybiBuZXdGQk9cclxufVxyXG5cclxuZnVuY3Rpb24gcmVzaXplRG91YmxlRkJPKFxyXG4gIHRhcmdldDogRG91YmxlRkJPLFxyXG4gIHc6IG51bWJlcixcclxuICBoOiBudW1iZXIsXHJcbiAgaW50ZXJuYWxGb3JtYXQ6IG51bWJlcixcclxuICBmb3JtYXQ6IG51bWJlcixcclxuICB0eXBlOiBudW1iZXIsXHJcbiAgcGFyYW06IG51bWJlclxyXG4pIHtcclxuICBpZiAodGFyZ2V0LndpZHRoID09IHcgJiYgdGFyZ2V0LmhlaWdodCA9PSBoKSByZXR1cm4gdGFyZ2V0XHJcbiAgdGFyZ2V0LnJlYWQgPSByZXNpemVGQk8odGFyZ2V0LnJlYWQsIHcsIGgsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIHBhcmFtKVxyXG4gIHRhcmdldC53cml0ZSA9IGNyZWF0ZUZCTyh3LCBoLCBpbnRlcm5hbEZvcm1hdCwgZm9ybWF0LCB0eXBlLCBwYXJhbSlcclxuICB0YXJnZXQud2lkdGggPSB3XHJcbiAgdGFyZ2V0LmhlaWdodCA9IGhcclxuICB0YXJnZXQudGV4ZWxTaXplWCA9IDEuMCAvIHdcclxuICB0YXJnZXQudGV4ZWxTaXplWSA9IDEuMCAvIGhcclxuICByZXR1cm4gdGFyZ2V0XHJcbn1cclxuXHJcbnR5cGUgVGV4dHVyZSA9IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVRleHR1cmVBc3luYz5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRleHR1cmVBc3luYyh1cmw6IHN0cmluZykge1xyXG4gIGxldCB0ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpXHJcbiAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSlcclxuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKVxyXG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpXHJcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuUkVQRUFUKVxyXG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLlJFUEVBVClcclxuICBnbC50ZXhJbWFnZTJEKFxyXG4gICAgZ2wuVEVYVFVSRV8yRCxcclxuICAgIDAsXHJcbiAgICBnbC5SR0IsXHJcbiAgICAxLFxyXG4gICAgMSxcclxuICAgIDAsXHJcbiAgICBnbC5SR0IsXHJcbiAgICBnbC5VTlNJR05FRF9CWVRFLFxyXG4gICAgbmV3IFVpbnQ4QXJyYXkoWzI1NSwgMjU1LCAyNTVdKVxyXG4gIClcclxuXHJcbiAgbGV0IG9iaiA9IHtcclxuICAgIHRleHR1cmUsXHJcbiAgICB3aWR0aDogMSxcclxuICAgIGhlaWdodDogMSxcclxuICAgIGF0dGFjaChpZDogbnVtYmVyKSB7XHJcbiAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyBpZClcclxuICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSlcclxuICAgICAgcmV0dXJuIGlkXHJcbiAgICB9LFxyXG4gIH1cclxuXHJcbiAgbGV0IGltYWdlID0gbmV3IEltYWdlKClcclxuICAvL2ltYWdlLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cydcclxuICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICBvYmoud2lkdGggPSBpbWFnZS53aWR0aFxyXG4gICAgb2JqLmhlaWdodCA9IGltYWdlLmhlaWdodFxyXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSlcclxuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCLCBnbC5SR0IsIGdsLlVOU0lHTkVEX0JZVEUsIGltYWdlKVxyXG4gIH1cclxuICBpbWFnZS5zcmMgPSB1cmxcclxuXHJcbiAgcmV0dXJuIG9ialxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVLZXl3b3JkcygpIHtcclxuICBsZXQgZGlzcGxheUtleXdvcmRzID0gW11cclxuICBpZiAoY29uZmlnLlNIQURJTkcpIGRpc3BsYXlLZXl3b3Jkcy5wdXNoKCdTSEFESU5HJylcclxuICBpZiAoY29uZmlnLkJMT09NKSBkaXNwbGF5S2V5d29yZHMucHVzaCgnQkxPT00nKVxyXG4gIGlmIChjb25maWcuU1VOUkFZUykgZGlzcGxheUtleXdvcmRzLnB1c2goJ1NVTlJBWVMnKVxyXG4gIGRpc3BsYXlNYXRlcmlhbC5zZXRLZXl3b3JkcyhkaXNwbGF5S2V5d29yZHMpXHJcbn1cclxuXHJcbi8vIE1haW5cclxudXBkYXRlS2V5d29yZHMoKVxyXG5pbml0RnJhbWVidWZmZXJzKClcclxubXVsdGlwbGVTcGxhdHMoc2FmZVBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAyMCkgKyA1KVxyXG5cclxubGV0IGZwc0ludGVydmFsOiBudW1iZXI7XHJcbmxldCBzdGFydFRpbWU6IG51bWJlcjtcclxubGV0IF9ub3c6IG51bWJlcjtcclxubGV0IHRoZW46IG51bWJlcjtcclxubGV0IGVsYXBzZWQ6ICBudW1iZXI7XHJcbmxldCBsYXN0VXBkYXRlVGltZSA9IERhdGUubm93KCk7XHJcbmxldCBjb2xvclVwZGF0ZVRpbWVyID0gMC4wO1xyXG5zdGFydEFuaW1hdGluZyg5OTkpO1xyXG5cclxuLy9Tb3VyY2U6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xOTc3MjIyMFxyXG5mdW5jdGlvbiBzdGFydEFuaW1hdGluZyhmcHM6IG51bWJlcikge1xyXG4gICAgZnBzSW50ZXJ2YWwgPSAxMDAwIC8gZnBzO1xyXG4gICAgdGhlbiA9IERhdGUubm93KCk7XHJcbiAgICBzdGFydFRpbWUgPSB0aGVuO1xyXG4gICAgdXBkYXRlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZSAoKSB7XHJcbiAgICBfbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGVsYXBzZWQgPSBfbm93IC0gdGhlbjtcclxuXHJcbiAgICAvLyBpZiBlbm91Z2ggdGltZSBoYXMgZWxhcHNlZCwgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG5cclxuICAgIGlmIChlbGFwc2VkID4gZnBzSW50ZXJ2YWwpIHtcclxuXHJcbiAgICAgICAgLy8gR2V0IHJlYWR5IGZvciBuZXh0IGZyYW1lIGJ5IHNldHRpbmcgdGhlbj1fbm93LCBidXQgYWxzbyBhZGp1c3QgZm9yIHlvdXJcclxuICAgICAgICAvLyBzcGVjaWZpZWQgZnBzSW50ZXJ2YWwgbm90IGJlaW5nIGEgbXVsdGlwbGUgb2YgUkFGJ3MgaW50ZXJ2YWwgKDE2LjdtcylcclxuICAgICAgICB0aGVuID0gX25vdyAtIChlbGFwc2VkICUgZnBzSW50ZXJ2YWwpO1xyXG5cclxuICAgICAgICAvLyBQdXQgeW91ciBkcmF3aW5nIGNvZGUgaGVyZVxyXG4gICAgICAgIGNvbnN0IGR0ID0gY2FsY0RlbHRhVGltZSgpXHJcbiAgICAgICAgaWYgKHJlc2l6ZUNhbnZhcygpKSBpbml0RnJhbWVidWZmZXJzKClcclxuICAgICAgICBhcHBseVZpc3VhbGl6ZXIoKVxyXG4gICAgICAgIHVwZGF0ZUNvbG9ycyhkdClcclxuICAgICAgICBhcHBseUlucHV0cygpXHJcbiAgICAgICAgaWYgKCFjb25maWcuUEFVU0VEKSBzdGVwKGR0KVxyXG4gICAgICAgIHJlbmRlcihudWxsKVxyXG4gICAgfVxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGNEZWx0YVRpbWUoKSB7XHJcbiAgbGV0IG5vdyA9IERhdGUubm93KClcclxuICBsZXQgZHQgPSAobm93IC0gbGFzdFVwZGF0ZVRpbWUpIC8gMTAwMFxyXG4gIGR0ID0gTWF0aC5taW4oZHQsIDAuMDE2NjY2KVxyXG4gIGxhc3RVcGRhdGVUaW1lID0gbm93XHJcbiAgcmV0dXJuIGR0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2l6ZUNhbnZhcygpIHtcclxuICBsZXQgd2lkdGggPSBzY2FsZUJ5UGl4ZWxSYXRpbyhjYW52YXMuY2xpZW50V2lkdGgpXHJcbiAgbGV0IGhlaWdodCA9IHNjYWxlQnlQaXhlbFJhdGlvKGNhbnZhcy5jbGllbnRIZWlnaHQpXHJcbiAgaWYgKGNhbnZhcy53aWR0aCAhPSB3aWR0aCB8fCBjYW52YXMuaGVpZ2h0ICE9IGhlaWdodCkge1xyXG4gICAgY2FudmFzLndpZHRoID0gd2lkdGhcclxuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHRcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVDb2xvcnMoZHQ6IG51bWJlcikge1xyXG4gIGlmICghY29uZmlnLkNPTE9SRlVMKSByZXR1cm5cclxuXHJcbiAgY29sb3JVcGRhdGVUaW1lciArPSBkdCAqIGNvbmZpZy5DT0xPUl9VUERBVEVfU1BFRURcclxuICBpZiAoY29sb3JVcGRhdGVUaW1lciA+PSAxKSB7XHJcbiAgICBjb2xvclVwZGF0ZVRpbWVyID0gd3JhcChjb2xvclVwZGF0ZVRpbWVyLCAwLCAxKVxyXG4gICAgcG9pbnRlcnMuZm9yRWFjaChwID0+IHtcclxuICAgICAgcC5jb2xvclVwZGF0ZXMrK1xyXG4gICAgICBpZiAocC5jb2xvclVwZGF0ZXMgPiAyKSB7XHJcbiAgICAgICAgcC5jb2xvciA9IGdlbmVyYXRlQ29sb3IoKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYXBwbHlJbnB1dHMoKSB7XHJcbiAgaWYgKHNwbGF0U3RhY2subGVuZ3RoID4gMCkgbXVsdGlwbGVTcGxhdHMoc3BsYXRTdGFjay5wb3AoKSB8fCAwKVxyXG5cclxuICBwb2ludGVycy5mb3JFYWNoKHAgPT4ge1xyXG4gICAgaWYgKHAubW92ZWQpIHtcclxuICAgICAgcC5tb3ZlZCA9IGZhbHNlXHJcbiAgICAgIHNwbGF0UG9pbnRlcihwKVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWaXN1YWxpemVyIC0gYWRkZWRcclxuICovXHJcbmZ1bmN0aW9uIGFwcGx5VmlzdWFsaXplcigpIHtcclxuICBjb25zdCBkYXRhID0gc29uZ1BsYXllci51cGRhdGUoKVxyXG5cclxuICBpZiAoIWRhdGEpIHtcclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgY29uc3QgZnJlcSA9IGRhdGEuZnJlcVxyXG5cclxuICAvLyBEcmF3P1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZnJlcS5idWNrZXRzOyBpKyspIHtcclxuICAgIGNvbnN0IHggPSBpIC8gZnJlcS5idWNrZXRzXHJcbiAgICBjb25zdCBjb2xvciA9IEhTVnRvUkdCKHgsIDEuMCwgMS4wKVxyXG4gICAgc3BsYXQoeCwgMCwgMCwgZnJlcS5jdXJyZW50W2ldICogMTAsIGNvbG9yLCAwLjAxKVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc3RlcChkdDogbnVtYmVyKSB7XHJcbiAgZ2wuZGlzYWJsZShnbC5CTEVORClcclxuICBnbC52aWV3cG9ydCgwLCAwLCB2ZWxvY2l0eS53aWR0aCwgdmVsb2NpdHkuaGVpZ2h0KVxyXG5cclxuICBjdXJsUHJvZ3JhbS5iaW5kKClcclxuICBnbC51bmlmb3JtMmYoY3VybFByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCB2ZWxvY2l0eS50ZXhlbFNpemVYLCB2ZWxvY2l0eS50ZXhlbFNpemVZKVxyXG4gIGdsLnVuaWZvcm0xaShjdXJsUHJvZ3JhbS51bmlmb3Jtcy51VmVsb2NpdHksIHZlbG9jaXR5LnJlYWQuYXR0YWNoKDApKVxyXG4gIGJsaXQoY3VybC5mYm8pXHJcblxyXG4gIHZvcnRpY2l0eVByb2dyYW0uYmluZCgpXHJcbiAgZ2wudW5pZm9ybTJmKHZvcnRpY2l0eVByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCB2ZWxvY2l0eS50ZXhlbFNpemVYLCB2ZWxvY2l0eS50ZXhlbFNpemVZKVxyXG4gIGdsLnVuaWZvcm0xaSh2b3J0aWNpdHlQcm9ncmFtLnVuaWZvcm1zLnVWZWxvY2l0eSwgdmVsb2NpdHkucmVhZC5hdHRhY2goMCkpXHJcbiAgZ2wudW5pZm9ybTFpKHZvcnRpY2l0eVByb2dyYW0udW5pZm9ybXMudUN1cmwsIGN1cmwuYXR0YWNoKDEpKVxyXG4gIGdsLnVuaWZvcm0xZih2b3J0aWNpdHlQcm9ncmFtLnVuaWZvcm1zLmN1cmwsIGNvbmZpZy5DVVJMKVxyXG4gIGdsLnVuaWZvcm0xZih2b3J0aWNpdHlQcm9ncmFtLnVuaWZvcm1zLmR0LCBkdClcclxuICBibGl0KHZlbG9jaXR5LndyaXRlLmZibylcclxuICB2ZWxvY2l0eS5zd2FwKClcclxuXHJcbiAgZGl2ZXJnZW5jZVByb2dyYW0uYmluZCgpXHJcbiAgZ2wudW5pZm9ybTJmKGRpdmVyZ2VuY2VQcm9ncmFtLnVuaWZvcm1zLnRleGVsU2l6ZSwgdmVsb2NpdHkudGV4ZWxTaXplWCwgdmVsb2NpdHkudGV4ZWxTaXplWSlcclxuICBnbC51bmlmb3JtMWkoZGl2ZXJnZW5jZVByb2dyYW0udW5pZm9ybXMudVZlbG9jaXR5LCB2ZWxvY2l0eS5yZWFkLmF0dGFjaCgwKSlcclxuICBibGl0KGRpdmVyZ2VuY2UuZmJvKVxyXG5cclxuICBjbGVhclByb2dyYW0uYmluZCgpXHJcbiAgZ2wudW5pZm9ybTFpKGNsZWFyUHJvZ3JhbS51bmlmb3Jtcy51VGV4dHVyZSwgcHJlc3N1cmUucmVhZC5hdHRhY2goMCkpXHJcbiAgZ2wudW5pZm9ybTFmKGNsZWFyUHJvZ3JhbS51bmlmb3Jtcy52YWx1ZSwgY29uZmlnLlBSRVNTVVJFKVxyXG4gIGJsaXQocHJlc3N1cmUud3JpdGUuZmJvKVxyXG4gIHByZXNzdXJlLnN3YXAoKVxyXG5cclxuICBwcmVzc3VyZVByb2dyYW0uYmluZCgpXHJcbiAgZ2wudW5pZm9ybTJmKHByZXNzdXJlUHJvZ3JhbS51bmlmb3Jtcy50ZXhlbFNpemUsIHZlbG9jaXR5LnRleGVsU2l6ZVgsIHZlbG9jaXR5LnRleGVsU2l6ZVkpXHJcbiAgZ2wudW5pZm9ybTFpKHByZXNzdXJlUHJvZ3JhbS51bmlmb3Jtcy51RGl2ZXJnZW5jZSwgZGl2ZXJnZW5jZS5hdHRhY2goMCkpXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuUFJFU1NVUkVfSVRFUkFUSU9OUzsgaSsrKSB7XHJcbiAgICBnbC51bmlmb3JtMWkocHJlc3N1cmVQcm9ncmFtLnVuaWZvcm1zLnVQcmVzc3VyZSwgcHJlc3N1cmUucmVhZC5hdHRhY2goMSkpXHJcbiAgICBibGl0KHByZXNzdXJlLndyaXRlLmZibylcclxuICAgIHByZXNzdXJlLnN3YXAoKVxyXG4gIH1cclxuXHJcbiAgZ3JhZGllblN1YnRyYWN0UHJvZ3JhbS5iaW5kKClcclxuICBnbC51bmlmb3JtMmYoZ3JhZGllblN1YnRyYWN0UHJvZ3JhbS51bmlmb3Jtcy50ZXhlbFNpemUsIHZlbG9jaXR5LnRleGVsU2l6ZVgsIHZlbG9jaXR5LnRleGVsU2l6ZVkpXHJcbiAgZ2wudW5pZm9ybTFpKGdyYWRpZW5TdWJ0cmFjdFByb2dyYW0udW5pZm9ybXMudVByZXNzdXJlLCBwcmVzc3VyZS5yZWFkLmF0dGFjaCgwKSlcclxuICBnbC51bmlmb3JtMWkoZ3JhZGllblN1YnRyYWN0UHJvZ3JhbS51bmlmb3Jtcy51VmVsb2NpdHksIHZlbG9jaXR5LnJlYWQuYXR0YWNoKDEpKVxyXG4gIGJsaXQodmVsb2NpdHkud3JpdGUuZmJvKVxyXG4gIHZlbG9jaXR5LnN3YXAoKVxyXG5cclxuICBhZHZlY3Rpb25Qcm9ncmFtLmJpbmQoKVxyXG4gIGdsLnVuaWZvcm0yZihhZHZlY3Rpb25Qcm9ncmFtLnVuaWZvcm1zLnRleGVsU2l6ZSwgdmVsb2NpdHkudGV4ZWxTaXplWCwgdmVsb2NpdHkudGV4ZWxTaXplWSlcclxuICBpZiAoIWV4dC5zdXBwb3J0TGluZWFyRmlsdGVyaW5nKVxyXG4gICAgZ2wudW5pZm9ybTJmKGFkdmVjdGlvblByb2dyYW0udW5pZm9ybXMuZHllVGV4ZWxTaXplLCB2ZWxvY2l0eS50ZXhlbFNpemVYLCB2ZWxvY2l0eS50ZXhlbFNpemVZKVxyXG4gIGxldCB2ZWxvY2l0eUlkID0gdmVsb2NpdHkucmVhZC5hdHRhY2goMClcclxuICBnbC51bmlmb3JtMWkoYWR2ZWN0aW9uUHJvZ3JhbS51bmlmb3Jtcy51VmVsb2NpdHksIHZlbG9jaXR5SWQpXHJcbiAgZ2wudW5pZm9ybTFpKGFkdmVjdGlvblByb2dyYW0udW5pZm9ybXMudVNvdXJjZSwgdmVsb2NpdHlJZClcclxuICBnbC51bmlmb3JtMWYoYWR2ZWN0aW9uUHJvZ3JhbS51bmlmb3Jtcy5kdCwgZHQpXHJcbiAgZ2wudW5pZm9ybTFmKGFkdmVjdGlvblByb2dyYW0udW5pZm9ybXMuZGlzc2lwYXRpb24sIGNvbmZpZy5WRUxPQ0lUWV9ESVNTSVBBVElPTilcclxuICBibGl0KHZlbG9jaXR5LndyaXRlLmZibylcclxuICB2ZWxvY2l0eS5zd2FwKClcclxuXHJcbiAgZ2wudmlld3BvcnQoMCwgMCwgZHllLndpZHRoLCBkeWUuaGVpZ2h0KVxyXG5cclxuICBpZiAoIWV4dC5zdXBwb3J0TGluZWFyRmlsdGVyaW5nKVxyXG4gICAgZ2wudW5pZm9ybTJmKGFkdmVjdGlvblByb2dyYW0udW5pZm9ybXMuZHllVGV4ZWxTaXplLCBkeWUudGV4ZWxTaXplWCwgZHllLnRleGVsU2l6ZVkpXHJcbiAgZ2wudW5pZm9ybTFpKGFkdmVjdGlvblByb2dyYW0udW5pZm9ybXMudVZlbG9jaXR5LCB2ZWxvY2l0eS5yZWFkLmF0dGFjaCgwKSlcclxuICBnbC51bmlmb3JtMWkoYWR2ZWN0aW9uUHJvZ3JhbS51bmlmb3Jtcy51U291cmNlLCBkeWUucmVhZC5hdHRhY2goMSkpXHJcbiAgZ2wudW5pZm9ybTFmKGFkdmVjdGlvblByb2dyYW0udW5pZm9ybXMuZGlzc2lwYXRpb24sIGNvbmZpZy5ERU5TSVRZX0RJU1NJUEFUSU9OKVxyXG4gIGJsaXQoZHllLndyaXRlLmZibylcclxuICBkeWUuc3dhcCgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcih0YXJnZXQ6IEZCTyB8IG51bGwpIHtcclxuICBpZiAoY29uZmlnLkJMT09NKSBhcHBseUJsb29tKGR5ZS5yZWFkLCBibG9vbSlcclxuICBpZiAoY29uZmlnLlNVTlJBWVMpIHtcclxuICAgIGFwcGx5U3VucmF5cyhkeWUucmVhZCwgZHllLndyaXRlLCBzdW5yYXlzKVxyXG4gICAgYmx1ckZCTyhzdW5yYXlzLCBzdW5yYXlzVGVtcCwgMSlcclxuICB9XHJcblxyXG4gIGlmICh0YXJnZXQgPT0gbnVsbCB8fCAhY29uZmlnLlRSQU5TUEFSRU5UKSB7XHJcbiAgICBnbC5ibGVuZEZ1bmMoZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBKVxyXG4gICAgZ2wuZW5hYmxlKGdsLkJMRU5EKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBnbC5kaXNhYmxlKGdsLkJMRU5EKVxyXG4gIH1cclxuXHJcbiAgbGV0IHdpZHRoID0gdGFyZ2V0ID09IG51bGwgPyBnbC5kcmF3aW5nQnVmZmVyV2lkdGggOiB0YXJnZXQud2lkdGhcclxuICBsZXQgaGVpZ2h0ID0gdGFyZ2V0ID09IG51bGwgPyBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0IDogdGFyZ2V0LmhlaWdodFxyXG4gIGdsLnZpZXdwb3J0KDAsIDAsIHdpZHRoLCBoZWlnaHQpXHJcblxyXG4gIGxldCBmYm8gPSB0YXJnZXQgPT0gbnVsbCA/IG51bGwgOiB0YXJnZXQuZmJvXHJcbiAgaWYgKCFjb25maWcuVFJBTlNQQVJFTlQpIGRyYXdDb2xvcihmYm8sIG5vcm1hbGl6ZUNvbG9yKGNvbmZpZy5CQUNLX0NPTE9SKSlcclxuICBpZiAodGFyZ2V0ID09IG51bGwgJiYgY29uZmlnLlRSQU5TUEFSRU5UKSBkcmF3Q2hlY2tlcmJvYXJkKGZibylcclxuICBkcmF3RGlzcGxheShmYm8sIHdpZHRoLCBoZWlnaHQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdDb2xvcihmYm86IFdlYkdMRnJhbWVidWZmZXIgfCBudWxsLCBjb2xvcjogQ29sb3IpIHtcclxuICBjb2xvclByb2dyYW0uYmluZCgpXHJcbiAgZ2wudW5pZm9ybTRmKGNvbG9yUHJvZ3JhbS51bmlmb3Jtcy5jb2xvciwgY29sb3IuciwgY29sb3IuZywgY29sb3IuYiwgMSlcclxuICBibGl0KGZibylcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd0NoZWNrZXJib2FyZChmYm86IFdlYkdMRnJhbWVidWZmZXIgfCBudWxsKSB7XHJcbiAgY2hlY2tlcmJvYXJkUHJvZ3JhbS5iaW5kKClcclxuICBnbC51bmlmb3JtMWYoY2hlY2tlcmJvYXJkUHJvZ3JhbS51bmlmb3Jtcy5hc3BlY3RSYXRpbywgY2FudmFzLndpZHRoIC8gY2FudmFzLmhlaWdodClcclxuICBibGl0KGZibylcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd0Rpc3BsYXkoZmJvOiBXZWJHTEZyYW1lYnVmZmVyIHwgbnVsbCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuICBkaXNwbGF5TWF0ZXJpYWwuYmluZCgpXHJcbiAgY29uc3QgdW5pZm9ybXMgPSBub3ROdWxsKGRpc3BsYXlNYXRlcmlhbC51bmlmb3JtcylcclxuICBpZiAoY29uZmlnLlNIQURJTkcpIGdsLnVuaWZvcm0yZih1bmlmb3Jtcy50ZXhlbFNpemUsIDEuMCAvIHdpZHRoLCAxLjAgLyBoZWlnaHQpXHJcbiAgZ2wudW5pZm9ybTFpKHVuaWZvcm1zLnVUZXh0dXJlLCBkeWUucmVhZC5hdHRhY2goMCkpXHJcbiAgaWYgKGNvbmZpZy5CTE9PTSkge1xyXG4gICAgZ2wudW5pZm9ybTFpKHVuaWZvcm1zLnVCbG9vbSwgYmxvb20uYXR0YWNoKDEpKVxyXG4gICAgZ2wudW5pZm9ybTFpKHVuaWZvcm1zLnVEaXRoZXJpbmcsIGRpdGhlcmluZ1RleHR1cmUuYXR0YWNoKDIpKVxyXG4gICAgbGV0IHNjYWxlID0gZ2V0VGV4dHVyZVNjYWxlKGRpdGhlcmluZ1RleHR1cmUsIHdpZHRoLCBoZWlnaHQpXHJcbiAgICBnbC51bmlmb3JtMmYodW5pZm9ybXMuZGl0aGVyU2NhbGUsIHNjYWxlLngsIHNjYWxlLnkpXHJcbiAgfVxyXG4gIGlmIChjb25maWcuU1VOUkFZUykgZ2wudW5pZm9ybTFpKHVuaWZvcm1zLnVTdW5yYXlzLCBzdW5yYXlzLmF0dGFjaCgzKSlcclxuICBibGl0KGZibylcclxufVxyXG5cclxuZnVuY3Rpb24gYXBwbHlCbG9vbShzb3VyY2U6IEZCTywgZGVzdGluYXRpb246IEZCTykge1xyXG4gIGlmIChibG9vbUZyYW1lYnVmZmVycy5sZW5ndGggPCAyKSByZXR1cm5cclxuXHJcbiAgbGV0IGxhc3QgPSBkZXN0aW5hdGlvblxyXG5cclxuICBnbC5kaXNhYmxlKGdsLkJMRU5EKVxyXG4gIGJsb29tUHJlZmlsdGVyUHJvZ3JhbS5iaW5kKClcclxuICBsZXQga25lZSA9IGNvbmZpZy5CTE9PTV9USFJFU0hPTEQgKiBjb25maWcuQkxPT01fU09GVF9LTkVFICsgMC4wMDAxXHJcbiAgbGV0IGN1cnZlMCA9IGNvbmZpZy5CTE9PTV9USFJFU0hPTEQgLSBrbmVlXHJcbiAgbGV0IGN1cnZlMSA9IGtuZWUgKiAyXHJcbiAgbGV0IGN1cnZlMiA9IDAuMjUgLyBrbmVlXHJcbiAgZ2wudW5pZm9ybTNmKGJsb29tUHJlZmlsdGVyUHJvZ3JhbS51bmlmb3Jtcy5jdXJ2ZSwgY3VydmUwLCBjdXJ2ZTEsIGN1cnZlMilcclxuICBnbC51bmlmb3JtMWYoYmxvb21QcmVmaWx0ZXJQcm9ncmFtLnVuaWZvcm1zLnRocmVzaG9sZCwgY29uZmlnLkJMT09NX1RIUkVTSE9MRClcclxuICBnbC51bmlmb3JtMWkoYmxvb21QcmVmaWx0ZXJQcm9ncmFtLnVuaWZvcm1zLnVUZXh0dXJlLCBzb3VyY2UuYXR0YWNoKDApKVxyXG4gIGdsLnZpZXdwb3J0KDAsIDAsIGxhc3Qud2lkdGgsIGxhc3QuaGVpZ2h0KVxyXG4gIGJsaXQobGFzdC5mYm8pXHJcblxyXG4gIGJsb29tQmx1clByb2dyYW0uYmluZCgpXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9vbUZyYW1lYnVmZmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IGRlc3QgPSBibG9vbUZyYW1lYnVmZmVyc1tpXVxyXG4gICAgZ2wudW5pZm9ybTJmKGJsb29tQmx1clByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCBsYXN0LnRleGVsU2l6ZVgsIGxhc3QudGV4ZWxTaXplWSlcclxuICAgIGdsLnVuaWZvcm0xaShibG9vbUJsdXJQcm9ncmFtLnVuaWZvcm1zLnVUZXh0dXJlLCBsYXN0LmF0dGFjaCgwKSlcclxuICAgIGdsLnZpZXdwb3J0KDAsIDAsIGRlc3Qud2lkdGgsIGRlc3QuaGVpZ2h0KVxyXG4gICAgYmxpdChkZXN0LmZibylcclxuICAgIGxhc3QgPSBkZXN0XHJcbiAgfVxyXG5cclxuICBnbC5ibGVuZEZ1bmMoZ2wuT05FLCBnbC5PTkUpXHJcbiAgZ2wuZW5hYmxlKGdsLkJMRU5EKVxyXG5cclxuICBmb3IgKGxldCBpID0gYmxvb21GcmFtZWJ1ZmZlcnMubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcclxuICAgIGxldCBiYXNlVGV4ID0gYmxvb21GcmFtZWJ1ZmZlcnNbaV1cclxuICAgIGdsLnVuaWZvcm0yZihibG9vbUJsdXJQcm9ncmFtLnVuaWZvcm1zLnRleGVsU2l6ZSwgbGFzdC50ZXhlbFNpemVYLCBsYXN0LnRleGVsU2l6ZVkpXHJcbiAgICBnbC51bmlmb3JtMWkoYmxvb21CbHVyUHJvZ3JhbS51bmlmb3Jtcy51VGV4dHVyZSwgbGFzdC5hdHRhY2goMCkpXHJcbiAgICBnbC52aWV3cG9ydCgwLCAwLCBiYXNlVGV4LndpZHRoLCBiYXNlVGV4LmhlaWdodClcclxuICAgIGJsaXQoYmFzZVRleC5mYm8pXHJcbiAgICBsYXN0ID0gYmFzZVRleFxyXG4gIH1cclxuXHJcbiAgZ2wuZGlzYWJsZShnbC5CTEVORClcclxuICBibG9vbUZpbmFsUHJvZ3JhbS5iaW5kKClcclxuICBnbC51bmlmb3JtMmYoYmxvb21GaW5hbFByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCBsYXN0LnRleGVsU2l6ZVgsIGxhc3QudGV4ZWxTaXplWSlcclxuICBnbC51bmlmb3JtMWkoYmxvb21GaW5hbFByb2dyYW0udW5pZm9ybXMudVRleHR1cmUsIGxhc3QuYXR0YWNoKDApKVxyXG4gIGdsLnVuaWZvcm0xZihibG9vbUZpbmFsUHJvZ3JhbS51bmlmb3Jtcy5pbnRlbnNpdHksIGNvbmZpZy5CTE9PTV9JTlRFTlNJVFkpXHJcbiAgZ2wudmlld3BvcnQoMCwgMCwgZGVzdGluYXRpb24ud2lkdGgsIGRlc3RpbmF0aW9uLmhlaWdodClcclxuICBibGl0KGRlc3RpbmF0aW9uLmZibylcclxufVxyXG5cclxuZnVuY3Rpb24gYXBwbHlTdW5yYXlzKHNvdXJjZTogRkJPLCBtYXNrOiBGQk8sIGRlc3RpbmF0aW9uOiBGQk8pIHtcclxuICBnbC5kaXNhYmxlKGdsLkJMRU5EKVxyXG4gIHN1bnJheXNNYXNrUHJvZ3JhbS5iaW5kKClcclxuICBnbC51bmlmb3JtMWkoc3VucmF5c01hc2tQcm9ncmFtLnVuaWZvcm1zLnVUZXh0dXJlLCBzb3VyY2UuYXR0YWNoKDApKVxyXG4gIGdsLnZpZXdwb3J0KDAsIDAsIG1hc2sud2lkdGgsIG1hc2suaGVpZ2h0KVxyXG4gIGJsaXQobWFzay5mYm8pXHJcblxyXG4gIHN1bnJheXNQcm9ncmFtLmJpbmQoKVxyXG4gIGdsLnVuaWZvcm0xZihzdW5yYXlzUHJvZ3JhbS51bmlmb3Jtcy53ZWlnaHQsIGNvbmZpZy5TVU5SQVlTX1dFSUdIVClcclxuICBnbC51bmlmb3JtMWkoc3VucmF5c1Byb2dyYW0udW5pZm9ybXMudVRleHR1cmUsIG1hc2suYXR0YWNoKDApKVxyXG4gIGdsLnZpZXdwb3J0KDAsIDAsIGRlc3RpbmF0aW9uLndpZHRoLCBkZXN0aW5hdGlvbi5oZWlnaHQpXHJcbiAgYmxpdChkZXN0aW5hdGlvbi5mYm8pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJsdXJGQk8odGFyZ2V0OiBGQk8sIHRlbXA6IEZCTywgaXRlcmF0aW9uczogbnVtYmVyKSB7XHJcbiAgYmx1clByb2dyYW0uYmluZCgpXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcclxuICAgIGdsLnVuaWZvcm0yZihibHVyUHJvZ3JhbS51bmlmb3Jtcy50ZXhlbFNpemUsIHRhcmdldC50ZXhlbFNpemVYLCAwLjApXHJcbiAgICBnbC51bmlmb3JtMWkoYmx1clByb2dyYW0udW5pZm9ybXMudVRleHR1cmUsIHRhcmdldC5hdHRhY2goMCkpXHJcbiAgICBibGl0KHRlbXAuZmJvKVxyXG5cclxuICAgIGdsLnVuaWZvcm0yZihibHVyUHJvZ3JhbS51bmlmb3Jtcy50ZXhlbFNpemUsIDAuMCwgdGFyZ2V0LnRleGVsU2l6ZVkpXHJcbiAgICBnbC51bmlmb3JtMWkoYmx1clByb2dyYW0udW5pZm9ybXMudVRleHR1cmUsIHRlbXAuYXR0YWNoKDApKVxyXG4gICAgYmxpdCh0YXJnZXQuZmJvKVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc3BsYXRQb2ludGVyKHBvaW50ZXI6IFBvaW50ZXIpIHtcclxuICBsZXQgZHggPSBwb2ludGVyLmRlbHRhWCAqIGNvbmZpZy5TUExBVF9GT1JDRVxyXG4gIGxldCBkeSA9IHBvaW50ZXIuZGVsdGFZICogY29uZmlnLlNQTEFUX0ZPUkNFXHJcbiAgc3BsYXQocG9pbnRlci50ZXhjb29yZFgsIHBvaW50ZXIudGV4Y29vcmRZLCBkeCwgZHksIHBvaW50ZXIuY29sb3IpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG11bHRpcGxlU3BsYXRzKGFtb3VudDogbnVtYmVyKSB7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKykge1xyXG4gICAgY29uc3QgY29sb3IgPSBnZW5lcmF0ZUNvbG9yKClcclxuICAgIGNvbG9yLnIgKj0gMTAuMFxyXG4gICAgY29sb3IuZyAqPSAxMC4wXHJcbiAgICBjb2xvci5iICo9IDEwLjBcclxuICAgIGNvbnN0IHggPSBNYXRoLnJhbmRvbSgpXHJcbiAgICBjb25zdCB5ID0gTWF0aC5yYW5kb20oKVxyXG4gICAgY29uc3QgZHggPSAxMDAwICogKE1hdGgucmFuZG9tKCkgLSAwLjUpXHJcbiAgICBjb25zdCBkeSA9IDEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSlcclxuICAgIHNwbGF0KHgsIHksIGR4LCBkeSwgY29sb3IpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogU3BsYXQgc29tZSBkeWUgaW50byB0aGUgc2ltdWxhdGlvbi5cclxuICogQHBhcmFtIHggQ2VudGVyIFggY29vcmRpbmF0ZS4gRmxvYXQgZnJvbSAwIChsZWZ0KSB0byAxIChyaWdodClcclxuICogQHBhcmFtIHkgQ2VudGVyIFkgY29vcmRpbmF0ZS4gRmxvYXQgZm9ybSAwIChib3R0b20pIHRvIDEgKHRvcClcclxuICogQHBhcmFtIGR4IEhvcml6b250YWwgZm9yY2UgdmVjdG9yIGVsZW1lbnQsIGluIHBpeGVscy4gUG9zaXRpdmUgLT4gbGVmdCwgbmVnYXRpdmUgLT4gcmlnaHQuXHJcbiAqIEBwYXJhbSBkeSBWZXJ0aWNhbCBmb3JjZSB2ZWN0b3IgZWxlbWVudCwgaW4gcGl4ZWxzLiBQb3NpdGl2ZSAtPiB0b3AsIG5lZ2F0aXZlIC0+IGJvdHRvbS5cclxuICogQHBhcmFtIGNvbG9yIENvbG9yLiBVc2luZyB7IHIsIGcsIGIgfSB2YWx1ZXMgPjEgY3JlYXRlcyBhIGxhcmdlciBzcGxhdC5cclxuICovXHJcbmZ1bmN0aW9uIHNwbGF0KHg6IG51bWJlciwgeTogbnVtYmVyLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyLCBjb2xvcj86IENvbG9yLCByYWRpdXM/OiBudW1iZXIpIHtcclxuICBnbC52aWV3cG9ydCgwLCAwLCB2ZWxvY2l0eS53aWR0aCwgdmVsb2NpdHkuaGVpZ2h0KVxyXG4gIHNwbGF0UHJvZ3JhbS5iaW5kKClcclxuICBnbC51bmlmb3JtMWkoc3BsYXRQcm9ncmFtLnVuaWZvcm1zLnVUYXJnZXQsIHZlbG9jaXR5LnJlYWQuYXR0YWNoKDApKVxyXG4gIGdsLnVuaWZvcm0xZihzcGxhdFByb2dyYW0udW5pZm9ybXMuYXNwZWN0UmF0aW8sIGNhbnZhcy53aWR0aCAvIGNhbnZhcy5oZWlnaHQpXHJcbiAgZ2wudW5pZm9ybTJmKHNwbGF0UHJvZ3JhbS51bmlmb3Jtcy5wb2ludCwgeCwgeSlcclxuICBnbC51bmlmb3JtM2Yoc3BsYXRQcm9ncmFtLnVuaWZvcm1zLmNvbG9yLCBkeCwgZHksIDAuMClcclxuICBnbC51bmlmb3JtMWYoc3BsYXRQcm9ncmFtLnVuaWZvcm1zLnJhZGl1cywgY29ycmVjdFJhZGl1cygocmFkaXVzIHx8IGNvbmZpZy5TUExBVF9SQURJVVMpIC8gMTAwLjApKVxyXG4gIGJsaXQodmVsb2NpdHkud3JpdGUuZmJvKVxyXG4gIHZlbG9jaXR5LnN3YXAoKVxyXG5cclxuICBpZiAoY29sb3IpIHtcclxuICAgIGdsLnZpZXdwb3J0KDAsIDAsIGR5ZS53aWR0aCwgZHllLmhlaWdodClcclxuICAgIGdsLnVuaWZvcm0xaShzcGxhdFByb2dyYW0udW5pZm9ybXMudVRhcmdldCwgZHllLnJlYWQuYXR0YWNoKDApKVxyXG4gICAgZ2wudW5pZm9ybTNmKHNwbGF0UHJvZ3JhbS51bmlmb3Jtcy5jb2xvciwgY29sb3IuciwgY29sb3IuZywgY29sb3IuYilcclxuICAgIGJsaXQoZHllLndyaXRlLmZibylcclxuICAgIGR5ZS5zd2FwKClcclxuICB9XHJcbn1cclxuLy8gRXhwb3NlXHJcbjsod2luZG93IGFzIGFueSkuc3BsYXQgPSBzcGxhdFxyXG5cclxuZnVuY3Rpb24gY29ycmVjdFJhZGl1cyhyYWRpdXM6IG51bWJlcikge1xyXG4gIGxldCBhc3BlY3RSYXRpbyA9IGNhbnZhcy53aWR0aCAvIGNhbnZhcy5oZWlnaHRcclxuICBpZiAoYXNwZWN0UmF0aW8gPiAxKSByYWRpdXMgKj0gYXNwZWN0UmF0aW9cclxuICByZXR1cm4gcmFkaXVzXHJcbn1cclxuXHJcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IHtcclxuICBsZXQgcG9zWCA9IHNjYWxlQnlQaXhlbFJhdGlvKGUub2Zmc2V0WClcclxuICBsZXQgcG9zWSA9IHNjYWxlQnlQaXhlbFJhdGlvKGUub2Zmc2V0WSlcclxuICBsZXQgcG9pbnRlciA9IHBvaW50ZXJzLmZpbmQocCA9PiBwLmlkID09IC0xKVxyXG4gIGlmIChwb2ludGVyID09IG51bGwpIHBvaW50ZXIgPSBuZXcgUG9pbnRlcigpXHJcbiAgdXBkYXRlUG9pbnRlckRvd25EYXRhKHBvaW50ZXIsIC0xLCBwb3NYLCBwb3NZKVxyXG59KVxyXG5cclxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4ge1xyXG4gIGxldCBwb2ludGVyID0gcG9pbnRlcnNbMF1cclxuICBpZiAoIXBvaW50ZXIuZG93bikgcmV0dXJuXHJcbiAgbGV0IHBvc1ggPSBzY2FsZUJ5UGl4ZWxSYXRpbyhlLm9mZnNldFgpXHJcbiAgbGV0IHBvc1kgPSBzY2FsZUJ5UGl4ZWxSYXRpbyhlLm9mZnNldFkpXHJcbiAgdXBkYXRlUG9pbnRlck1vdmVEYXRhKHBvaW50ZXIsIHBvc1gsIHBvc1kpXHJcbn0pXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHtcclxuICB1cGRhdGVQb2ludGVyVXBEYXRhKHBvaW50ZXJzWzBdKVxyXG59KVxyXG5cclxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBlID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KClcclxuICBjb25zdCB0b3VjaGVzID0gZS50YXJnZXRUb3VjaGVzXHJcbiAgd2hpbGUgKHRvdWNoZXMubGVuZ3RoID49IHBvaW50ZXJzLmxlbmd0aCkgcG9pbnRlcnMucHVzaChuZXcgUG9pbnRlcigpKVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IHBvc1ggPSBzY2FsZUJ5UGl4ZWxSYXRpbyh0b3VjaGVzW2ldLnBhZ2VYKVxyXG4gICAgbGV0IHBvc1kgPSBzY2FsZUJ5UGl4ZWxSYXRpbyh0b3VjaGVzW2ldLnBhZ2VZKVxyXG4gICAgdXBkYXRlUG9pbnRlckRvd25EYXRhKHBvaW50ZXJzW2kgKyAxXSwgdG91Y2hlc1tpXS5pZGVudGlmaWVyLCBwb3NYLCBwb3NZKVxyXG4gIH1cclxufSlcclxuXHJcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFxyXG4gICd0b3VjaG1vdmUnLFxyXG4gIGUgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCB0b3VjaGVzID0gZS50YXJnZXRUb3VjaGVzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdWNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IHBvaW50ZXIgPSBwb2ludGVyc1tpICsgMV1cclxuICAgICAgaWYgKCFwb2ludGVyLmRvd24pIGNvbnRpbnVlXHJcbiAgICAgIGxldCBwb3NYID0gc2NhbGVCeVBpeGVsUmF0aW8odG91Y2hlc1tpXS5wYWdlWClcclxuICAgICAgbGV0IHBvc1kgPSBzY2FsZUJ5UGl4ZWxSYXRpbyh0b3VjaGVzW2ldLnBhZ2VZKVxyXG4gICAgICB1cGRhdGVQb2ludGVyTW92ZURhdGEocG9pbnRlciwgcG9zWCwgcG9zWSlcclxuICAgIH1cclxuICB9LFxyXG4gIGZhbHNlXHJcbilcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGUgPT4ge1xyXG4gIGNvbnN0IHRvdWNoZXMgPSBlLmNoYW5nZWRUb3VjaGVzXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3VjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgcG9pbnRlciA9IHBvaW50ZXJzLmZpbmQocCA9PiBwLmlkID09IHRvdWNoZXNbaV0uaWRlbnRpZmllcilcclxuICAgIGlmIChwb2ludGVyID09IG51bGwpIGNvbnRpbnVlXHJcbiAgICB1cGRhdGVQb2ludGVyVXBEYXRhKHBvaW50ZXIpXHJcbiAgfVxyXG59KVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcclxuICBpZiAoZS5jb2RlID09PSAnS2V5UCcpIGNvbmZpZy5QQVVTRUQgPSAhY29uZmlnLlBBVVNFRFxyXG4gIGlmIChlLmtleSA9PT0gJyAnKSBzcGxhdFN0YWNrLnB1c2goc2FmZVBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAyMCkgKyA1KVxyXG4gIGlmIChlLmtleSA9PT0gJ2EnKVxyXG4gICAgICBtdWx0aXBsZVNwbGF0c0EoKTtcclxuICBpZiAoZS5rZXkgPT09ICdzJylcclxuICAgICAgbXVsdGlwbGVTcGxhdHNTKCk7XHJcbiAgaWYgKGUua2V5ID09PSAnZCcpXHJcbiAgICAgIG11bHRpcGxlU3BsYXRzRCgpO1xyXG4gIGlmIChlLmtleSA9PT0gJ2YnKVxyXG4gICAgICBtdWx0aXBsZVNwbGF0c0YoKTtcclxuICBpZiAoZS5rZXkgPT09ICdnJylcclxuICAgICAgbXVsdGlwbGVTcGxhdHNHKCk7XHJcbiAgaWYgKGUua2V5ID09PSAnaicpXHJcbiAgICAgIG11bHRpcGxlU3BsYXRzSigpO1xyXG59KVxyXG5cclxuXHJcbmZ1bmN0aW9uIG11bHRpcGxlU3BsYXRzQSAoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMvKmFtb3VudCovOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjb2xvciA9IGdlbmVyYXRlQ29sb3IoKTtcclxuICAgICAgICBjb2xvci5yID0gMC41Oy8vKj0gMTAuMDtcclxuICAgICAgICBjb2xvci5nID0gMC41Oy8vKj0gMTAuMDtcclxuICAgICAgICBjb2xvci5iID0gMC41Oy8vKj0gMTAuMDtcclxuICAgICAgICBjb25zdCB4ID0gMC4zICogaSArIDAuMjtcclxuICAgICAgICBjb25zdCB5ID0gMC4yO1xyXG4gICAgICAgIGNvbnN0IGR4ID0gMDsvLzEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgICAgY29uc3QgZHkgPSA1MDAwOy8vMTAwMCAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgICAgICBzcGxhdCh4LCB5LCBkeCwgZHksIGNvbG9yLCAyLjEpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIG11bHRpcGxlU3BsYXRzUyAoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMvKmFtb3VudCovOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjb2xvciA9IGdlbmVyYXRlQ29sb3IoKTtcclxuICAgICAgICBjb2xvci5yICo9IDUuMDtcclxuICAgICAgICBjb2xvci5nICo9IDUuMDtcclxuICAgICAgICBjb2xvci5iICo9IDUuMDtcclxuICAgICAgICBjb25zdCB4ID0gMC4zICogaSArIDAuMjtcclxuICAgICAgICBjb25zdCB5ID0gMC44O1xyXG4gICAgICAgIGNvbnN0IGR4ID0gMDsvLzEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgICAgY29uc3QgZHkgPSAtNTAwMDsvLzEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgICAgc3BsYXQoeCwgeSwgZHgsIGR5LCBjb2xvcik7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMvKmFtb3VudCovOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjb2xvciA9IGdlbmVyYXRlQ29sb3IoKTtcclxuICAgICAgICBjb2xvci5yICo9IDUuMDtcclxuICAgICAgICBjb2xvci5nICo9IDUuMDtcclxuICAgICAgICBjb2xvci5iICo9IDUuMDtcclxuICAgICAgICBjb25zdCB4ID0gMC4zICogaSArIDAuMjtcclxuICAgICAgICBjb25zdCB5ID0gMC45NTtcclxuICAgICAgICBjb25zdCBkeCA9IDA7Ly8xMDAwICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xyXG4gICAgICAgIGNvbnN0IGR5ID0gLTUwMDA7Ly8xMDAwICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xyXG4gICAgICAgIHNwbGF0KHgsIHksIGR4LCBkeSwgY29sb3IpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIG11bHRpcGxlU3BsYXRzRCAoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMvKmFtb3VudCovOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjb2xvciA9IGdlbmVyYXRlQ29sb3IoKTtcclxuICAgICAgICBjb2xvci5yICo9IDEwLjA7XHJcbiAgICAgICAgY29sb3IuZyAqPSAxMC4wO1xyXG4gICAgICAgIGNvbG9yLmIgKj0gMTAuMDtcclxuICAgICAgICBjb25zdCB4ID0gMC4yO1xyXG4gICAgICAgIGNvbnN0IHkgPSAtMC4zICogaSArIDAuODtcclxuICAgICAgICBjb25zdCBkeCA9IDUwMDA7Ly8xMDAwICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xyXG4gICAgICAgIGNvbnN0IGR5ID0gMDsvLzEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgICAgc3BsYXQoeCwgeSwgZHgsIGR5LCBjb2xvcik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbXVsdGlwbGVTcGxhdHNGICgpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMy8qYW1vdW50Ki87IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gZ2VuZXJhdGVDb2xvcigpO1xyXG4gICAgICAgIGNvbG9yLnIgKj0gMTAuMDtcclxuICAgICAgICBjb2xvci5nICo9IDEwLjA7XHJcbiAgICAgICAgY29sb3IuYiAqPSAxMC4wO1xyXG4gICAgICAgIGNvbnN0IHggPSAwLjg7XHJcbiAgICAgICAgY29uc3QgeSA9IDAuMyAqIGkgKyAwLjI7XHJcbiAgICAgICAgY29uc3QgZHggPSAtNTAwMDsvLzEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgICAgY29uc3QgZHkgPSAwOy8vMTAwMCAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgICAgICBzcGxhdCh4LCB5LCBkeCwgZHksIGNvbG9yKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbXVsdGlwbGVTcGxhdHNHICgpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMy8qYW1vdW50Ki87IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gZ2VuZXJhdGVDb2xvcigpO1xyXG4gICAgICAgIGNvbG9yLnIgKj0gMTUuMDtcclxuICAgICAgICBjb2xvci5nICo9IDE1LjA7XHJcbiAgICAgICAgY29sb3IuYiAqPSAxNS4wO1xyXG4gICAgICAgIGNvbnN0IHggPSAwLjMgKiBpICsgMC4yO1xyXG4gICAgICAgIGNvbnN0IHkgPSAwLjg7XHJcbiAgICAgICAgY29uc3QgZHggPSAwOy8vMTAwMCAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgICAgICBjb25zdCBkeSA9IC01MDAwOy8vMTAwMCAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgICAgICBzcGxhdCh4LCB5LCBkeCwgZHksIGNvbG9yKTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMy8qYW1vdW50Ki87IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gZ2VuZXJhdGVDb2xvcigpO1xyXG4gICAgICAgIGNvbG9yLnIgKj0gMTUuMDtcclxuICAgICAgICBjb2xvci5nICo9IDE1LjA7XHJcbiAgICAgICAgY29sb3IuYiAqPSAxNS4wO1xyXG4gICAgICAgIGNvbnN0IHggPSAwLjMgKiBpICsgMC4yMjtcclxuICAgICAgICBjb25zdCB5ID0gMC44NTtcclxuICAgICAgICBjb25zdCBkeCA9IDA7Ly8xMDAwICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xyXG4gICAgICAgIGNvbnN0IGR5ID0gLTUwMDA7Ly8xMDAwICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xyXG4gICAgICAgIHNwbGF0KHgsIHksIGR4LCBkeSwgY29sb3IpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyLyphbW91bnQqLzsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY29sb3IgPSBnZW5lcmF0ZUNvbG9yKCk7XHJcbiAgICAgICAgY29sb3IuciAqPSAwLjA7XHJcbiAgICAgICAgY29sb3IuZyAqPSAwLjA7XHJcbiAgICAgICAgY29sb3IuYiAqPSAwLjA7XHJcbiAgICAgICAgY29uc3QgeCA9IDAuMyAqIGkgKyAwLjM1O1xyXG4gICAgICAgIGNvbnN0IHkgPSAwLjE1O1xyXG4gICAgICAgIGNvbnN0IGR4ID0gMDsvLzEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgICAgY29uc3QgZHkgPSA1MDAwOy8vMTAwMCAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgICAgICBzcGxhdCh4LCB5LCBkeCwgZHksIGNvbG9yKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbXVsdGlwbGVTcGxhdHNKICgpIHtcclxuICAgIGxldCBhbW91bnQgPSAxMDtcclxuICAgIGxldCBzdGVwID0gTWF0aC5QSSoyL2Ftb3VudDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHtcclxuICAgICAgICBjb25zdCBjb2xvciA9IGdlbmVyYXRlQ29sb3IoKTtcclxuICAgICAgICBjb2xvci5yICo9IDEwLjA7XHJcbiAgICAgICAgY29sb3IuZyAqPSAxMC4wO1xyXG4gICAgICAgIGNvbG9yLmIgKj0gMTAuMDtcclxuICAgICAgICBjb25zdCB4ID0gMC41ICsgKDAuMSpNYXRoLnNpbihzdGVwKmkpKSooY2FudmFzLmhlaWdodCAvIGNhbnZhcy53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgeSA9IDAuNSArIDAuMSpNYXRoLmNvcyhzdGVwKmkpO1xyXG4gICAgICAgIGNvbnN0IGR4ID0gMzAwMCpNYXRoLnNpbihzdGVwKmkpOy8vMTAwMCAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgICAgICBjb25zdCBkeSA9IDMwMDAqTWF0aC5jb3Moc3RlcCppKTsvLzEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgICAgc3BsYXQoeCwgeSwgZHgsIGR5LCBjb2xvciwgMC4wMSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVBvaW50ZXJEb3duRGF0YShwb2ludGVyOiBQb2ludGVyLCBpZDogbnVtYmVyLCBwb3NYOiBudW1iZXIsIHBvc1k6IG51bWJlcikge1xyXG4gIHBvaW50ZXIuaWQgPSBpZFxyXG4gIHBvaW50ZXIuZG93biA9IHRydWVcclxuICBwb2ludGVyLm1vdmVkID0gZmFsc2VcclxuICBwb2ludGVyLnRleGNvb3JkWCA9IHBvc1ggLyBjYW52YXMud2lkdGhcclxuICBwb2ludGVyLnRleGNvb3JkWSA9IDEuMCAtIHBvc1kgLyBjYW52YXMuaGVpZ2h0XHJcbiAgcG9pbnRlci5wcmV2VGV4Y29vcmRYID0gcG9pbnRlci50ZXhjb29yZFhcclxuICBwb2ludGVyLnByZXZUZXhjb29yZFkgPSBwb2ludGVyLnRleGNvb3JkWVxyXG4gIHBvaW50ZXIuZGVsdGFYID0gMFxyXG4gIHBvaW50ZXIuZGVsdGFZID0gMFxyXG4gIHBvaW50ZXIuY29sb3JVcGRhdGVzID0gMFxyXG5cclxuICBpZiAoIWNvbmZpZy5SQU5ET01fQ09MT1IpIHtcclxuICAgIHBvaW50ZXIuY29sb3IgPSBtdXRlVUlDb2xvcihjb25maWcuU1BMQVRfQ09MT1IpXHJcbiAgfSBlbHNlIHtcclxuICAgIHBvaW50ZXIuY29sb3IgPSBnZW5lcmF0ZUNvbG9yKClcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVBvaW50ZXJNb3ZlRGF0YShwb2ludGVyOiBQb2ludGVyLCBwb3NYOiBudW1iZXIsIHBvc1k6IG51bWJlcikge1xyXG4gIHBvaW50ZXIucHJldlRleGNvb3JkWCA9IHBvaW50ZXIudGV4Y29vcmRYXHJcbiAgcG9pbnRlci5wcmV2VGV4Y29vcmRZID0gcG9pbnRlci50ZXhjb29yZFlcclxuICBwb2ludGVyLnRleGNvb3JkWCA9IHBvc1ggLyBjYW52YXMud2lkdGhcclxuICBwb2ludGVyLnRleGNvb3JkWSA9IDEuMCAtIHBvc1kgLyBjYW52YXMuaGVpZ2h0XHJcbiAgcG9pbnRlci5kZWx0YVggPSBjb3JyZWN0RGVsdGFYKHBvaW50ZXIudGV4Y29vcmRYIC0gcG9pbnRlci5wcmV2VGV4Y29vcmRYKVxyXG4gIHBvaW50ZXIuZGVsdGFZID0gY29ycmVjdERlbHRhWShwb2ludGVyLnRleGNvb3JkWSAtIHBvaW50ZXIucHJldlRleGNvb3JkWSlcclxuICBwb2ludGVyLm1vdmVkID0gTWF0aC5hYnMocG9pbnRlci5kZWx0YVgpID4gMCB8fCBNYXRoLmFicyhwb2ludGVyLmRlbHRhWSkgPiAwXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVBvaW50ZXJVcERhdGEocG9pbnRlcjogUG9pbnRlcikge1xyXG4gIHBvaW50ZXIuZG93biA9IGZhbHNlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvcnJlY3REZWx0YVgoZGVsdGE6IG51bWJlcikge1xyXG4gIGxldCBhc3BlY3RSYXRpbyA9IGNhbnZhcy53aWR0aCAvIGNhbnZhcy5oZWlnaHRcclxuICBpZiAoYXNwZWN0UmF0aW8gPCAxKSBkZWx0YSAqPSBhc3BlY3RSYXRpb1xyXG4gIHJldHVybiBkZWx0YVxyXG59XHJcblxyXG5mdW5jdGlvbiBjb3JyZWN0RGVsdGFZKGRlbHRhOiBudW1iZXIpIHtcclxuICBsZXQgYXNwZWN0UmF0aW8gPSBjYW52YXMud2lkdGggLyBjYW52YXMuaGVpZ2h0XHJcbiAgaWYgKGFzcGVjdFJhdGlvID4gMSkgZGVsdGEgLz0gYXNwZWN0UmF0aW9cclxuICByZXR1cm4gZGVsdGFcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVDb2xvcigpIHtcclxuICBsZXQgYyA9IEhTVnRvUkdCKE1hdGgucmFuZG9tKCksIDEuMCwgMS4wKVxyXG4gIGMuciAqPSAwLjE1XHJcbiAgYy5nICo9IDAuMTVcclxuICBjLmIgKj0gMC4xNVxyXG4gIHJldHVybiBjXHJcbn1cclxuXHJcbmZ1bmN0aW9uIEhTVnRvUkdCKGg6IG51bWJlciwgczogbnVtYmVyLCB2OiBudW1iZXIpIHtcclxuICBsZXQgciA9IDAsXHJcbiAgICBnID0gMCxcclxuICAgIGIgPSAwLFxyXG4gICAgaSA9IDAsXHJcbiAgICBmID0gMCxcclxuICAgIHAgPSAwLFxyXG4gICAgcSA9IDAsXHJcbiAgICB0ID0gMFxyXG4gIGkgPSBNYXRoLmZsb29yKGggKiA2KVxyXG4gIGYgPSBoICogNiAtIGlcclxuICBwID0gdiAqICgxIC0gcylcclxuICBxID0gdiAqICgxIC0gZiAqIHMpXHJcbiAgdCA9IHYgKiAoMSAtICgxIC0gZikgKiBzKVxyXG5cclxuICBzd2l0Y2ggKGkgJSA2KSB7XHJcbiAgICBjYXNlIDA6XHJcbiAgICAgIDsociA9IHYpLCAoZyA9IHQpLCAoYiA9IHApXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlIDE6XHJcbiAgICAgIDsociA9IHEpLCAoZyA9IHYpLCAoYiA9IHApXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlIDI6XHJcbiAgICAgIDsociA9IHApLCAoZyA9IHYpLCAoYiA9IHQpXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlIDM6XHJcbiAgICAgIDsociA9IHApLCAoZyA9IHEpLCAoYiA9IHYpXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlIDQ6XHJcbiAgICAgIDsociA9IHQpLCAoZyA9IHApLCAoYiA9IHYpXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlIDU6XHJcbiAgICAgIDsociA9IHYpLCAoZyA9IHApLCAoYiA9IHEpXHJcbiAgICAgIGJyZWFrXHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcixcclxuICAgIGcsXHJcbiAgICBiLFxyXG4gIH1cclxufVxyXG5cclxudHlwZSBDb2xvciA9IHsgcjogbnVtYmVyOyBnOiBudW1iZXI7IGI6IG51bWJlciB9XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVDb2xvcihpbnB1dDogQ29sb3IpOiBDb2xvciB7XHJcbiAgbGV0IG91dHB1dCA9IHtcclxuICAgIHI6IGlucHV0LnIgLyAyNTUsXHJcbiAgICBnOiBpbnB1dC5nIC8gMjU1LFxyXG4gICAgYjogaW5wdXQuYiAvIDI1NSxcclxuICB9XHJcbiAgcmV0dXJuIG91dHB1dFxyXG59XHJcblxyXG5mdW5jdGlvbiB0ZkNvbG9yKGlucHV0OiBDb2xvciwgdGY6ICh4OiBudW1iZXIpID0+IG51bWJlcik6IENvbG9yIHtcclxuICBsZXQgb3V0cHV0ID0ge1xyXG4gICAgcjogdGYoaW5wdXQuciksXHJcbiAgICBnOiB0ZihpbnB1dC5nKSxcclxuICAgIGI6IHRmKGlucHV0LmIpLFxyXG4gIH1cclxuICByZXR1cm4gb3V0cHV0XHJcbn1cclxuXHJcbmNvbnN0IG11dGVVSUNvbG9yID0gKGNvbG9yOiBDb2xvcikgPT4gdGZDb2xvcihjb2xvciwgeCA9PiB4IC8gMjcwICsgMC4wNSlcclxuXHJcbmZ1bmN0aW9uIHdyYXAodmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XHJcbiAgbGV0IHJhbmdlID0gbWF4IC0gbWluXHJcbiAgaWYgKHJhbmdlID09IDApIHJldHVybiBtaW5cclxuICByZXR1cm4gKCh2YWx1ZSAtIG1pbikgJSByYW5nZSkgKyBtaW5cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uOiBudW1iZXIpIHtcclxuICBsZXQgYXNwZWN0UmF0aW8gPSBnbC5kcmF3aW5nQnVmZmVyV2lkdGggLyBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0XHJcbiAgaWYgKGFzcGVjdFJhdGlvIDwgMSkgYXNwZWN0UmF0aW8gPSAxLjAgLyBhc3BlY3RSYXRpb1xyXG5cclxuICBsZXQgbWluID0gTWF0aC5yb3VuZChyZXNvbHV0aW9uKVxyXG4gIGxldCBtYXggPSBNYXRoLnJvdW5kKHJlc29sdXRpb24gKiBhc3BlY3RSYXRpbylcclxuXHJcbiAgaWYgKGdsLmRyYXdpbmdCdWZmZXJXaWR0aCA+IGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQpIHJldHVybiB7IHdpZHRoOiBtYXgsIGhlaWdodDogbWluIH1cclxuICBlbHNlIHJldHVybiB7IHdpZHRoOiBtaW4sIGhlaWdodDogbWF4IH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGV4dHVyZVNjYWxlKHRleHR1cmU6IFRleHR1cmUsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IHdpZHRoIC8gdGV4dHVyZS53aWR0aCxcclxuICAgIHk6IGhlaWdodCAvIHRleHR1cmUuaGVpZ2h0LFxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2NhbGVCeVBpeGVsUmF0aW8oaW5wdXQ6IG51bWJlcikge1xyXG4gIGxldCBwaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMVxyXG4gIHJldHVybiBNYXRoLmZsb29yKGlucHV0ICogcGl4ZWxSYXRpbylcclxufVxyXG5cclxuZnVuY3Rpb24gaGFzaENvZGUoczogc3RyaW5nKSB7XHJcbiAgaWYgKHMubGVuZ3RoID09IDApIHJldHVybiAwXHJcbiAgbGV0IGhhc2ggPSAwXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgcy5jaGFyQ29kZUF0KGkpXHJcbiAgICBoYXNoIHw9IDAgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXHJcbiAgfVxyXG4gIHJldHVybiBoYXNoXHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFRQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQUE7QUFBQTtBQUhBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0FBR0E7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTtBQUdBOzs7Ozs7Ozs7O0FBWUE7QUFHQTs7Ozs7Ozs7Ozs7QUFhQTtBQUdBOzs7Ozs7OztBQVVBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBK0RBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQkE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzQkE7QUFHQTs7Ozs7Ozs7Ozs7OztBQWVBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1DQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvQkE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0NBO0FBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNEJBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQkE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUErQkE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXdCQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQVNBO0FBVUE7QUFDQTs7QUFTQTtBQVVBO0FBUUE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFTQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./script.ts\n");

/***/ }),

/***/ "./soundcloud-badge.js":
/*!*****************************!*\
  !*** ./soundcloud-badge.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Forked because the original relied on require('fs'), which works ok in Bundler\r\n// but requires shenanigans in Webpack. It's easier just to inline the files as\r\n// backtick strings.\r\n//\r\n// We still keep soundcloud-badge as a package.json requirement so we\r\n// don't have to add its dependencies (lazy).\r\n\r\nvar resolve = __webpack_require__(/*! soundcloud-resolve */ \"./node_modules/soundcloud-resolve/browser.js\")\r\nvar fonts = __webpack_require__(/*! google-fonts */ \"./node_modules/google-fonts/index.js\")\r\nvar minstache = __webpack_require__(/*! minstache */ \"./node_modules/minstache/index.js\")\r\nvar insert = __webpack_require__(/*! insert-css */ \"./node_modules/insert-css/index.js\")\r\n\r\nvar icons = {\r\n    black: 'https://developers.soundcloud.com/assets/logo_black.png'\r\n  , white: 'https://developers.soundcloud.com/assets/logo_white.png'\r\n}\r\n\r\nconst template = minstache.compile(`\r\n<div class=\"npm-scb-wrap\">\r\n  <div class=\"npm-scb-inner\">\r\n    <a target=\"_blank\" href=\"{{!urls.song}}\">\r\n      <img class=\"npm-scb-icon\" src=\"{{!icon}}\">\r\n      <img class=\"npm-scb-artwork\" src=\"{{!artwork}}\">\r\n    </a>\r\n    <div class=\"npm-scb-info\">\r\n      <a target=\"_blank\" href=\"{{!urls.song}}\">\r\n        <p class=\"npm-scb-title\">{{!title}}</p>\r\n      </a>\r\n      <a target=\"_blank\" href=\"{{!urls.artist}}\">\r\n        <p class=\"npm-scb-artist\">{{!artist}}</p>\r\n      </a>\r\n    </div>\r\n  </div>\r\n  <div class=\"npm-scb-now-playing\">\r\n    Now Playing:\r\n    <a href=\"{{!urls.song}}\">{{!title}}</a>\r\n    by\r\n    <a href=\"{{!urls.artist}}\">{{!artist}}</a>\r\n  </div>\r\n</div>\r\n`)\r\n\r\nconst css = `\r\n.npm-scb-wrap {\r\n  font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\r\n  font-weight: 200;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 999;\r\n}\r\n\r\n.npm-scb-wrap a {\r\n  text-decoration: none;\r\n  color: #000;\r\n}\r\n.npm-scb-white\r\n.npm-scb-wrap a {\r\n  color: #fff;\r\n}\r\n\r\n.npm-scb-inner {\r\n  position: absolute;\r\n  top: -120px; left: 0;\r\n  padding: 8px;\r\n  width: 100%;\r\n  height: 150px;\r\n  z-index: 2;\r\n  -webkit-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\r\n     -moz-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\r\n      -ms-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\r\n       -o-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\r\n          transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\r\n}\r\n.npm-scb-wrap:hover\r\n.npm-scb-inner {\r\n  top: 0;\r\n}\r\n\r\n.npm-scb-artwork {\r\n  position: absolute;\r\n  top: 16px; left: 16px;\r\n  width: 104px; height: 104px;\r\n  box-shadow: 0 0 8px -3px #000;\r\n  outline: 1px solid rgba(0,0,0,0.1);\r\n  z-index: 2;\r\n}\r\n.npm-scb-white\r\n.npm-scb-artwork {\r\n  outline: 1px solid rgba(255,255,255,0.1);\r\n  box-shadow: 0 0 10px -2px rgba(255,255,255,0.9);\r\n}\r\n\r\n.npm-scb-info {\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 120px;\r\n  width: 300px;\r\n  z-index: 1;\r\n}\r\n\r\n.npm-scb-info > a {\r\n  display: block;\r\n}\r\n\r\n.npm-scb-now-playing {\r\n  font-size: 12px;\r\n  line-height: 12px;\r\n  position: absolute;\r\n  width: 500px;\r\n  z-index: 1;\r\n  padding: 15px 0;\r\n  top: 0; left: 138px;\r\n  opacity: 1;\r\n  -webkit-transition: opacity 0.25s;\r\n     -moz-transition: opacity 0.25s;\r\n      -ms-transition: opacity 0.25s;\r\n       -o-transition: opacity 0.25s;\r\n          transition: opacity 0.25s;\r\n}\r\n\r\n.npm-scb-wrap:hover\r\n.npm-scb-now-playing {\r\n  opacity: 0;\r\n}\r\n\r\n.npm-scb-white\r\n.npm-scb-now-playing {\r\n  color: #fff;\r\n}\r\n.npm-scb-now-playing > a {\r\n  font-weight: bold;\r\n}\r\n\r\n.npm-scb-info > a > p {\r\n  margin: 0;\r\n  padding-bottom: 0.25em;\r\n  line-height: 1.35em;\r\n  margin-left: 1em;\r\n  font-size: 1em;\r\n}\r\n\r\n.npm-scb-title {\r\n  font-weight: bold;\r\n}\r\n\r\n.npm-scb-icon {\r\n  position: absolute;\r\n  top: 120px;\r\n  padding-top: 0.75em;\r\n  left: 16px;\r\n}\r\n`\r\n\r\nmodule.exports = badge\r\nfunction noop(err){ if (err) throw err }\r\n\r\nvar inserted = false\r\nvar gwfadded = false\r\n\r\nfunction badge(options, callback) {\r\n  if (!inserted) insert(css), inserted = true\r\n\r\n  if (!gwfadded && options.getFonts) {\r\n    fonts.add({ 'Open Sans': [300, 600] })\r\n    gwfadded = true\r\n  }\r\n\r\n  options = options || {}\r\n  callback = callback || noop\r\n\r\n  var div   = options.el || document.createElement('div')\r\n  var icon  = !('dark' in options) || options.dark ? 'black' : 'white'\r\n  var id    = options.client_id\r\n  var song  = options.song\r\n\r\n  resolve(id, song, function(err, json) {\r\n    if (err) return callback(err)\r\n    if (json.kind !== 'track') throw new Error(\r\n      'soundcloud-badge only supports individual tracks at the moment'\r\n    )\r\n\r\n    div.classList[\r\n      icon === 'black' ? 'remove' : 'add'\r\n    ]('npm-scb-white')\r\n\r\n    div.innerHTML = template({\r\n        artwork: json.artwork_url || json.user.avatar_url\r\n      , artist: json.user.username\r\n      , title: json.title\r\n      , icon: icons[icon]\r\n      , urls: {\r\n          song: json.permalink_url\r\n        , artist: json.user.permalink_url\r\n      }\r\n    })\r\n\r\n    document.body.appendChild(div)\r\n\r\n    callback(null, json.stream_url + '?client_id=' + id, json, div)\r\n  })\r\n\r\n  return div\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zb3VuZGNsb3VkLWJhZGdlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc291bmRjbG91ZC1iYWRnZS5qcz8xOGJkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEZvcmtlZCBiZWNhdXNlIHRoZSBvcmlnaW5hbCByZWxpZWQgb24gcmVxdWlyZSgnZnMnKSwgd2hpY2ggd29ya3Mgb2sgaW4gQnVuZGxlclxyXG4vLyBidXQgcmVxdWlyZXMgc2hlbmFuaWdhbnMgaW4gV2VicGFjay4gSXQncyBlYXNpZXIganVzdCB0byBpbmxpbmUgdGhlIGZpbGVzIGFzXHJcbi8vIGJhY2t0aWNrIHN0cmluZ3MuXHJcbi8vXHJcbi8vIFdlIHN0aWxsIGtlZXAgc291bmRjbG91ZC1iYWRnZSBhcyBhIHBhY2thZ2UuanNvbiByZXF1aXJlbWVudCBzbyB3ZVxyXG4vLyBkb24ndCBoYXZlIHRvIGFkZCBpdHMgZGVwZW5kZW5jaWVzIChsYXp5KS5cclxuXHJcbnZhciByZXNvbHZlID0gcmVxdWlyZSgnc291bmRjbG91ZC1yZXNvbHZlJylcclxudmFyIGZvbnRzID0gcmVxdWlyZSgnZ29vZ2xlLWZvbnRzJylcclxudmFyIG1pbnN0YWNoZSA9IHJlcXVpcmUoJ21pbnN0YWNoZScpXHJcbnZhciBpbnNlcnQgPSByZXF1aXJlKCdpbnNlcnQtY3NzJylcclxuXHJcbnZhciBpY29ucyA9IHtcclxuICAgIGJsYWNrOiAnaHR0cHM6Ly9kZXZlbG9wZXJzLnNvdW5kY2xvdWQuY29tL2Fzc2V0cy9sb2dvX2JsYWNrLnBuZydcclxuICAsIHdoaXRlOiAnaHR0cHM6Ly9kZXZlbG9wZXJzLnNvdW5kY2xvdWQuY29tL2Fzc2V0cy9sb2dvX3doaXRlLnBuZydcclxufVxyXG5cclxuY29uc3QgdGVtcGxhdGUgPSBtaW5zdGFjaGUuY29tcGlsZShgXHJcbjxkaXYgY2xhc3M9XCJucG0tc2NiLXdyYXBcIj5cclxuICA8ZGl2IGNsYXNzPVwibnBtLXNjYi1pbm5lclwiPlxyXG4gICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cInt7IXVybHMuc29uZ319XCI+XHJcbiAgICAgIDxpbWcgY2xhc3M9XCJucG0tc2NiLWljb25cIiBzcmM9XCJ7eyFpY29ufX1cIj5cclxuICAgICAgPGltZyBjbGFzcz1cIm5wbS1zY2ItYXJ0d29ya1wiIHNyYz1cInt7IWFydHdvcmt9fVwiPlxyXG4gICAgPC9hPlxyXG4gICAgPGRpdiBjbGFzcz1cIm5wbS1zY2ItaW5mb1wiPlxyXG4gICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwie3shdXJscy5zb25nfX1cIj5cclxuICAgICAgICA8cCBjbGFzcz1cIm5wbS1zY2ItdGl0bGVcIj57eyF0aXRsZX19PC9wPlxyXG4gICAgICA8L2E+XHJcbiAgICAgIDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJ7eyF1cmxzLmFydGlzdH19XCI+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJucG0tc2NiLWFydGlzdFwiPnt7IWFydGlzdH19PC9wPlxyXG4gICAgICA8L2E+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuICA8ZGl2IGNsYXNzPVwibnBtLXNjYi1ub3ctcGxheWluZ1wiPlxyXG4gICAgTm93IFBsYXlpbmc6XHJcbiAgICA8YSBocmVmPVwie3shdXJscy5zb25nfX1cIj57eyF0aXRsZX19PC9hPlxyXG4gICAgYnlcclxuICAgIDxhIGhyZWY9XCJ7eyF1cmxzLmFydGlzdH19XCI+e3shYXJ0aXN0fX08L2E+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG5gKVxyXG5cclxuY29uc3QgY3NzID0gYFxyXG4ubnBtLXNjYi13cmFwIHtcclxuICBmb250LWZhbWlseTogJ09wZW4gU2FucycsICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgZm9udC13ZWlnaHQ6IDIwMDtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgei1pbmRleDogOTk5O1xyXG59XHJcblxyXG4ubnBtLXNjYi13cmFwIGEge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICBjb2xvcjogIzAwMDtcclxufVxyXG4ubnBtLXNjYi13aGl0ZVxyXG4ubnBtLXNjYi13cmFwIGEge1xyXG4gIGNvbG9yOiAjZmZmO1xyXG59XHJcblxyXG4ubnBtLXNjYi1pbm5lciB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogLTEyMHB4OyBsZWZ0OiAwO1xyXG4gIHBhZGRpbmc6IDhweDtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDE1MHB4O1xyXG4gIHotaW5kZXg6IDI7XHJcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGN1YmljLWJlemllcigxLCAwLCAwLCAxKSwgdG9wIDAuNXM7XHJcbiAgICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGN1YmljLWJlemllcigxLCAwLCAwLCAxKSwgdG9wIDAuNXM7XHJcbiAgICAgIC1tcy10cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGN1YmljLWJlemllcigxLCAwLCAwLCAxKSwgdG9wIDAuNXM7XHJcbiAgICAgICAtby10cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGN1YmljLWJlemllcigxLCAwLCAwLCAxKSwgdG9wIDAuNXM7XHJcbiAgICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGN1YmljLWJlemllcigxLCAwLCAwLCAxKSwgdG9wIDAuNXM7XHJcbn1cclxuLm5wbS1zY2Itd3JhcDpob3ZlclxyXG4ubnBtLXNjYi1pbm5lciB7XHJcbiAgdG9wOiAwO1xyXG59XHJcblxyXG4ubnBtLXNjYi1hcnR3b3JrIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAxNnB4OyBsZWZ0OiAxNnB4O1xyXG4gIHdpZHRoOiAxMDRweDsgaGVpZ2h0OiAxMDRweDtcclxuICBib3gtc2hhZG93OiAwIDAgOHB4IC0zcHggIzAwMDtcclxuICBvdXRsaW5lOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjEpO1xyXG4gIHotaW5kZXg6IDI7XHJcbn1cclxuLm5wbS1zY2Itd2hpdGVcclxuLm5wbS1zY2ItYXJ0d29yayB7XHJcbiAgb3V0bGluZTogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4xKTtcclxuICBib3gtc2hhZG93OiAwIDAgMTBweCAtMnB4IHJnYmEoMjU1LDI1NSwyNTUsMC45KTtcclxufVxyXG5cclxuLm5wbS1zY2ItaW5mbyB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogMTZweDtcclxuICBsZWZ0OiAxMjBweDtcclxuICB3aWR0aDogMzAwcHg7XHJcbiAgei1pbmRleDogMTtcclxufVxyXG5cclxuLm5wbS1zY2ItaW5mbyA+IGEge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcblxyXG4ubnBtLXNjYi1ub3ctcGxheWluZyB7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIGxpbmUtaGVpZ2h0OiAxMnB4O1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogNTAwcHg7XHJcbiAgei1pbmRleDogMTtcclxuICBwYWRkaW5nOiAxNXB4IDA7XHJcbiAgdG9wOiAwOyBsZWZ0OiAxMzhweDtcclxuICBvcGFjaXR5OiAxO1xyXG4gIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjI1cztcclxuICAgICAtbW96LXRyYW5zaXRpb246IG9wYWNpdHkgMC4yNXM7XHJcbiAgICAgIC1tcy10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMjVzO1xyXG4gICAgICAgLW8tdHJhbnNpdGlvbjogb3BhY2l0eSAwLjI1cztcclxuICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4yNXM7XHJcbn1cclxuXHJcbi5ucG0tc2NiLXdyYXA6aG92ZXJcclxuLm5wbS1zY2Itbm93LXBsYXlpbmcge1xyXG4gIG9wYWNpdHk6IDA7XHJcbn1cclxuXHJcbi5ucG0tc2NiLXdoaXRlXHJcbi5ucG0tc2NiLW5vdy1wbGF5aW5nIHtcclxuICBjb2xvcjogI2ZmZjtcclxufVxyXG4ubnBtLXNjYi1ub3ctcGxheWluZyA+IGEge1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcblxyXG4ubnBtLXNjYi1pbmZvID4gYSA+IHAge1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nLWJvdHRvbTogMC4yNWVtO1xyXG4gIGxpbmUtaGVpZ2h0OiAxLjM1ZW07XHJcbiAgbWFyZ2luLWxlZnQ6IDFlbTtcclxuICBmb250LXNpemU6IDFlbTtcclxufVxyXG5cclxuLm5wbS1zY2ItdGl0bGUge1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcblxyXG4ubnBtLXNjYi1pY29uIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAxMjBweDtcclxuICBwYWRkaW5nLXRvcDogMC43NWVtO1xyXG4gIGxlZnQ6IDE2cHg7XHJcbn1cclxuYFxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBiYWRnZVxyXG5mdW5jdGlvbiBub29wKGVycil7IGlmIChlcnIpIHRocm93IGVyciB9XHJcblxyXG52YXIgaW5zZXJ0ZWQgPSBmYWxzZVxyXG52YXIgZ3dmYWRkZWQgPSBmYWxzZVxyXG5cclxuZnVuY3Rpb24gYmFkZ2Uob3B0aW9ucywgY2FsbGJhY2spIHtcclxuICBpZiAoIWluc2VydGVkKSBpbnNlcnQoY3NzKSwgaW5zZXJ0ZWQgPSB0cnVlXHJcblxyXG4gIGlmICghZ3dmYWRkZWQgJiYgb3B0aW9ucy5nZXRGb250cykge1xyXG4gICAgZm9udHMuYWRkKHsgJ09wZW4gU2Fucyc6IFszMDAsIDYwMF0gfSlcclxuICAgIGd3ZmFkZGVkID0gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cclxuICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3BcclxuXHJcbiAgdmFyIGRpdiAgID0gb3B0aW9ucy5lbCB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gIHZhciBpY29uICA9ICEoJ2RhcmsnIGluIG9wdGlvbnMpIHx8IG9wdGlvbnMuZGFyayA/ICdibGFjaycgOiAnd2hpdGUnXHJcbiAgdmFyIGlkICAgID0gb3B0aW9ucy5jbGllbnRfaWRcclxuICB2YXIgc29uZyAgPSBvcHRpb25zLnNvbmdcclxuXHJcbiAgcmVzb2x2ZShpZCwgc29uZywgZnVuY3Rpb24oZXJyLCBqc29uKSB7XHJcbiAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxyXG4gICAgaWYgKGpzb24ua2luZCAhPT0gJ3RyYWNrJykgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAnc291bmRjbG91ZC1iYWRnZSBvbmx5IHN1cHBvcnRzIGluZGl2aWR1YWwgdHJhY2tzIGF0IHRoZSBtb21lbnQnXHJcbiAgICApXHJcblxyXG4gICAgZGl2LmNsYXNzTGlzdFtcclxuICAgICAgaWNvbiA9PT0gJ2JsYWNrJyA/ICdyZW1vdmUnIDogJ2FkZCdcclxuICAgIF0oJ25wbS1zY2Itd2hpdGUnKVxyXG5cclxuICAgIGRpdi5pbm5lckhUTUwgPSB0ZW1wbGF0ZSh7XHJcbiAgICAgICAgYXJ0d29yazoganNvbi5hcnR3b3JrX3VybCB8fCBqc29uLnVzZXIuYXZhdGFyX3VybFxyXG4gICAgICAsIGFydGlzdDoganNvbi51c2VyLnVzZXJuYW1lXHJcbiAgICAgICwgdGl0bGU6IGpzb24udGl0bGVcclxuICAgICAgLCBpY29uOiBpY29uc1tpY29uXVxyXG4gICAgICAsIHVybHM6IHtcclxuICAgICAgICAgIHNvbmc6IGpzb24ucGVybWFsaW5rX3VybFxyXG4gICAgICAgICwgYXJ0aXN0OiBqc29uLnVzZXIucGVybWFsaW5rX3VybFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KVxyXG5cclxuICAgIGNhbGxiYWNrKG51bGwsIGpzb24uc3RyZWFtX3VybCArICc/Y2xpZW50X2lkPScgKyBpZCwganNvbiwgZGl2KVxyXG4gIH0pXHJcblxyXG4gIHJldHVybiBkaXZcclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./soundcloud-badge.js\n");

/***/ })

/******/ });